(function(globals){function obj_extend(t,e){for(var n in e)null!=e[n]&&(null==globals[n]||"object"!=typeof globals[n]||"object"!=typeof e[n]?t[n]=e[n]:obj_extend(globals[n],e[n]))}/*!
 * ClassJS v1.1.70
 * Part of the Atma.js Project
 * http://atmajs.com/
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 *
 * (c) 2012, 2015 Atma.js and other contributors
 */
!function(t,e){"use strict";function n(){return e(i,r)}var r,i="undefined"==typeof window||null==window.navigator?global:window;return r=t||i,"function"==typeof define&&define.amd?define(n):(n(),void("undefined"!=typeof module&&(module.exports=r.Class)))}(this,function(t,e){"use strict";var n,r,o,l,u,s,a,c,f,h=Array.prototype.slice,p=Array.prototype.sort,d={ModelHost:null},v="__$class__";!function(){n=function(t){return"function"==typeof t},r=function(t){return null!=t&&"object"==typeof t},s=function(t){return null!=t&&"Date"===t.constructor.name&&t instanceof Date},o=function(t){return null!=t&&"number"==typeof t.length&&"function"==typeof t.slice},l=o,u=function(t){return"string"==typeof t},a=function(t){return"string"==typeof t&&""!==t},c=function(t){return null==t?!1:"object"!=typeof t?!1:t.constructor===Object},f=function(e){return void 0===e||e===t}}();var m,g,_;!function(){m=function(t,e){if(g(t))for(var n=0,r=t.length;r>n;n++)e(t[n],n);else e(t)},g=function(t){return null!=t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.splice},_=function(t,e){for(var n=t.length,r=-1;++r<n;)e(t[r])===!0&&(t.splice(r,1),r--,n--)},"function"!=typeof Array.isArray&&(Array.isArray=function(t){return t instanceof Array?!0:null==t||"object"!=typeof t?!1:void 0!==t.length&&"function"==typeof t.slice})}();var y,b,x,w,C,k;!function(){function e(t,e){if(null==e||"object"!=typeof e)return e;var n=this,i=n[t];return i[v]&&i.toJSON?r(i[v],e):e}function r(t,e){var n={};return n.json=e,n[v]=t,n}function i(t,e){var n;return null!=e&&"object"==typeof e&&e[v]&&(n=Q(e[v]),"function"==typeof n?e=new n(e.json):console.error("<class:parse> Class was not registered",e[v])),e}function o(e,n){"function"==typeof e&&(e=e.prototype),null==n&&(n={});var r,i,l;for(i in e)if(l=e[i],r=null==l?null:typeof l,"function"!==r){var u=i.charCodeAt(0);if(!(95===u&&"_id"!==i||u>=65&&90>=u))if("object"!==r)n[i]=r;else{var s=l.constructor,a=s&&s.name;if("Object"!==a&&a&&t[a]===s){n[i]=a;continue}n[i]=o(l)}}return e.__proto__&&o(e.__proto__,n),n}y=function(t,e){M(d.ModelHost||Q.Model,t,e)},b=function(t){return D(d.ModelHost||Q.Model,t)},x=function(t,e){var r=u(t)?b(t):t;return!n(r)&&console.error("<class:patch> Not a Function",t),e.Base=r,r=Q(e),u(t)&&y(t,r),r},w=function(t){return JSON.stringify(t,e)},C=function(t){return JSON.parse(t,i)},k=function(t){return o(t)}}();var S,N,j;!function(){function t(t,e){return function(n){var r=s(n),i=r[e];c(i)&&R(t,i)}}function e(t,e){if(null!=e){"function"==typeof t&&(t=t.prototype),"function"==typeof e&&(e=e.prototype);var n,r;for(n in e)"constructor"!==n&&(r=e[n],null!=r&&(t[n]=r))}}function i(t,e){var n;return n=t?function(e){var n=1===arguments.length&&h(e)?e:arguments;return U(t,this,n)}:q,function(){return this["super"]=n,U(e,this,arguments)}}function o(t,n,r,o,l,u){var s=o,c=o;s.constructor=t.prototype.constructor,null!=r&&(c[a]={},m(r,function(t){e(c[a],t)}),c=c[a]),null!=n&&(c[a]=n.prototype);for(var f in u)null==s[f]&&(s[f]=u[f]);for(var f in l)s[f]=i(s[f],l[f]);t.prototype=s}function u(t,n,r,o,l,u){if(null!=n){var s=function(){};s.prototype=n.prototype,t.prototype=new s,t.prototype.constructor=t}null!=r&&m(r,function(n){delete n.constructor,e(t,n)});var a=t.prototype;R(a,u);for(var c in l)a[c]=i(a[c],l[c]);e(t,o)}function s(t){return n(t)?t.prototype:t}var a="__proto__",f=Object.prototype.toString,h=function(t){return"[object Arguments]"===f.call(t)};S=a in Object.prototype?o:u,N=function(t,e){if(null!=e)if(l(e))for(var i=e.length;--i>-1;)N(t,e[i]);else{var o;n(e)?o=e:r(e.Static)&&(o=e.Static),null!=o&&I(t,o)}},j=function(e,n,r){var i,o;for(i in e)o=e[i],c(o)&&(null!=n&&c(n.prototype[i])&&R(o,n.prototype[i]),null!=r&&m(r,t(o,i)))}}();var E,A,O="__$serialization";!function(){E=function(t){var e,n,r,i=this,o={};null==t&&(t=i[O]);var l;for(e in i)if(l=e,null!=t&&t.hasOwnProperty(e)&&(r=t[e],null!=r&&"object"==typeof r&&(r.key&&(l=r.key),r.hasOwnProperty("serialize")))){if(null==r.serialize)continue;o[l]=r.serialize(i[e])}else if(95!==e.charCodeAt(0)&&"Static"!==e&&"Validate"!==e&&(n=i[e],null!=n))if("_id"!==e){switch(typeof n){case"function":continue;case"object":if(s(n))break;var u=n.toJSON;if(null==u)break;o[l]=n.toJSON();continue}o[l]=n}else o[l]=n;return null!=i._id&&(o._id=i._id),o},A=function(){for(var t,e=this,n=e.length,r=0,i=new Array(n);n>r;r++){if(t=e[r],null!=t&&"object"==typeof t){var o=t.toJSON;if(o===E||o===A){i[r]=t.toJSON();continue}if(null==o){i[r]=E.call(t);continue}}i[r]=t}return i}}();var T,D,M,R,P,L,I,F;!function(){T=function(t){n(t)&&(t=t.prototype);for(var e,r,i=1,o=arguments.length;o>i;i++){e=n(arguments[i])?arguments[i].prototype:arguments[i];for(r in e)if("Static"!==r||null==t.Static)t[r]=e[r];else for(r in e.Static)t.Static[r]=e.Static[r]}return t},D=function(t,e){for(var n=e.split("."),r=n.length,i=-1;++i<r;){if(null==t)return null;t=t[n[i]]}return t},M=function(t,e,n){for(var r,i=e.split("."),o=i.length,l=-1;++l<o-1;)r=i[l],null==t[r]&&(t[r]={}),t=t[r];t[i[l]]=n},R=function(t,e){for(var n in e)null==t[n]&&(t[n]=e[n]);return t},P=function(t,e){if(null==t&&(t={}),null==e)return t;var n,r;for(r in e)n=e[r],null!=n&&(t[r]=n);return t},function(){function t(t,r,i){if(null==t)return{};if(null==r)return r;var o,l;for(l in r)i===!0&&null!=t[l]||(o=e(r,l),null!=o?void 0===o.value?n(t,l,o):t[l]=o.value:L(t,r.__proto__));return t}var e=Object.getOwnPropertyDescriptor,n=Object.defineProperty;return null==e?(L=P,void(I=R)):(L=function(e,n){return t(e,n,!1)},void(I=function(e,n){return t(e,n,!0)}))}(),function(){function t(t,n,o){var l,a,c,f;for(a in n)if(null==s||t!==o||s.hasOwnProperty(a)!==!1){switch(a.charCodeAt(0)){case 63:if(f=a.substring(1),c=t[f],!c)continue;if(l=e(c,n[a],o),null!=l)return l.setInvalidProperty(f),l;continue;case 45:if(f=a.substring(1),"object"==typeof t&&f in t)return i(f);continue}if(c=t[a],null==c)return r(a);if(l=e(c,n[a],o),null!=l)return l.setInvalidProperty(a),l}if(u)for(a in t)if(!(a in n||"?"+a in n))return i(a)}function e(e,i,u){if(null==i)return null;if("function"==typeof i){var s=i.call(u,e);return null==s||s===!0?null:s===!1?l():o(s)}if(null==e)return r();if("string"==typeof i){var a="string",c="number",f="boolean";switch(i){case a:return typeof e!==a||0===e.length?n(a):null;case c:return typeof e!==c?n(c):null;case f:return typeof e!==f?n(f):null}}if(i instanceof RegExp)return i.test(e)===!1?l():null;if(Array.isArray(i)){if(Array.isArray(e)===!1)return n("array");for(var s,h=-1,p=e.length;++h<p;)if(s=t(e[h],i[0]))return s.setInvalidProperty(h),s;return null}return typeof e!=typeof i?n(typeof e):"object"==typeof e?t(e,i):null}F=function(e){if(null==e)return l("object");s=null,u=!1;for(var n,r,i=arguments.length;--i>0;)switch(r=arguments[i],typeof r){case"string":null==s&&(s={}),s[r]=1;continue;case"boolean":u=r;continue;case"undefined":continue;default:if(1!==i)return l("validation argument at "+i);n=r;continue}return null==n&&(n=e.Validate),null==n?null:t(e,n,e)};var n,r,i,o,l,u=!1,s=null;!function(){function t(t,n,r){return r.type=t,r.property=null,r.setInvalidProperty=e,n.prototype=r,function(t){return new n(t)}}function e(t){return null==this.property?void(this.property=t):void(this.property=t+"."+this.property)}n=t("type",function(t){this.expect=t},{toString:function(){return"Invalid type."+(this.expect?" Expect: "+this.expect:"")+(this.property?" Property: "+this.property:"")}}),r=t("expect",function(t){this.property=t},{toString:function(){return"Property expected."+(this.property?"`"+this.property+"`":"")}}),i=t("unexpect",function(t){this.property=t},{toString:function(){return"Unexpected property"+(this.property?"`"+this.property+"`":"")}}),o=t("custom",function(t){this.error=t},{toString:function(){return"Custom validation: "+this.error+(this.property?" Property: "+this.property:"")}}),l=t("invalid",function(t){this.expect=t},{toString:function(){return"Invalid."+(this.expect?" Expect: "+this.expect:"")+(this.property?" Property: "+this.property:"")}})}()}()}();var $,H;!function(){function t(t,e,n){for(var r in e)n(D(t,r),e[r],r)}function e(t,e,n){for(var r in e)M(t,r,n(D(t,r),e[r],r))}function n(){var t=arguments;return function(e,n,r){for(var i,o=0,l=t.length;l>o;o++)if(i=t[o],i(e,n,r)===!1)return}}function r(t,e,n){return g(t)===!1?(console.warn("<patch> property is not an array",n),!1):void 0}function i(t,e,n){if(e.hasOwnProperty("$each"))for(var r=0,i=e.$each.length;i>r;r++)t.push(e.$each[r]);else t.push(e)}function o(t,e,n){t[e>0?"pop":"shift"]()}function l(t,e,n){_(t,function(t){return c(t,e)})}function u(t,e,n){return t+e}function s(t,e,n){return e}function a(){}$=function(t,e){for(var n in e){var r=p[n];r?r[f](t,e[n],r[h]):console.error("Unknown or not implemented patcher",n)}return t},H=function(t){if(null==t)return"Undefined";var e=!1;for(var n in t)if(e=!0,null==p[n])return"Unsupported patcher: "+n;return e===!1?"No data":null};var c;!function(){c=function(t,e){for(var n in e)if(t[n]!==e[n])return!1;return!0}}();var f=0,h=1,p={$push:[t,n(r,i)],$pop:[t,n(r,o)],$pull:[t,n(r,l)],$inc:[e,u],$set:[e,s],$unset:[e,a],$bit:[e,a]}}();var z,U,B,q,V;!function(){function t(t,e){if(t.length!==e.length)return!1;for(var n=t.length,r=0;n>r;r++)if(t[r]!==e[r])return!1;return!0}z=function(t,e){return function(){return U(t,e,arguments)}},U=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4])}return t.apply(e,n)},B=function(t){var e=h.call(arguments,1);return function(){return arguments.length>0&&(e=e.concat(h.call(arguments))),U(t,null,e)}},q=function(){},V=function(e,n){if(0===e.length)return 0;for(var r=n.length,i=-1;++i<r;)if(t(n[i],e))return i+1;return n.push(e),n.length}}();var G={};(function(){!function(t){function e(){this._callbacks=[]}function n(t){function n(t){return function(){o+=1,i[t]=Array.prototype.slice.call(arguments),o===l&&r.done(i)}}var r=new e,i=[];if(!t||!t.length)return r.done(i),r;for(var o=0,l=t.length,u=0;l>u;u++)t[u].then(n(u));return r}function r(t,n){var i=new e;return 0===t.length?i.done.apply(i,n):t[0].apply(null,n).then(function(){t.splice(0,1),r(t,arguments).then(function(){i.done.apply(i,arguments)})}),i}function i(t){var e="";if("string"==typeof t)e=t;else{var n=encodeURIComponent;for(var r in t)t.hasOwnProperty(r)&&(e+="&"+n(r)+"="+n(t[r]))}return e}function o(){var t;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return t}function l(t,n,r,l){function u(){d.abort(),v.done(f,"",d)}var d,v=new e,m=l&&l["Content-Type"]||p.contentType;try{d=o()}catch(g){return v.done(c,""),v}if(r)if("GET"===t)n+="?"+i(r),r=null;else switch(m){case s:r=i(r);break;case a:try{r=JSON.stringify(r)}catch(_){return v.done(h,""),v}break;default:r=i(r)}d.open(t,n),r&&d.setRequestHeader("Content-Type",m);for(var y in l)l.hasOwnProperty(y)&&d.setRequestHeader(y,l[y]);var b=p.ajaxTimeout;if(b)var x=setTimeout(u,b);return d.onreadystatechange=function(){if(b&&clearTimeout(x),4===d.readyState){var t=!d.status||(d.status<200||d.status>=300)&&304!==d.status;v.done(t,d.responseText,d)}},d.send(r),v}function u(t){return function(e,n,r){return l(t,e,n,r)}}var s="application/x-www-form-urlencoded",a="application/json",c=1,f=2,h=3;e.prototype.then=function(t,n){var r;return this._isdone?r=t.apply(n,this.result):(r=new e,this._callbacks.push(function(){var e=t.apply(n,arguments);e&&"function"==typeof e.then&&e.then(r.done,r)})),r},e.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var t=0;t<this._callbacks.length;t++)this._callbacks[t].apply(null,arguments);this._callbacks=[]};var p={Promise:e,join:n,chain:r,ajax:l,get:u("GET"),post:u("POST"),put:u("PUT"),del:u("DELETE"),patch:u("PATCH"),ENOXHR:c,ETIMEOUT:f,E_PREPAIR_DATA:h,ajaxTimeout:0,contentType:a};"function"==typeof define&&define.amd?define(function(){return p}):t.promise=p}(this)}).call(G),m(["get"],function(t){G[t]=function(e,n){this.promise[t](e).then(function(t,e,r){return t?void n.onError(t,e,r):void n.onSuccess(e)})}}),m(["del","post","put","patch"],function(t){G[t]=function(e,n,r){this.promise[t](e,n).then(function(t,e,n){r(t,e,n)})}});var K;!function(){K=function(e){if(this===Q||null==this||this===t){var n=function(t){this[O]=P(this[O],e),K.call(this,t)};return n}null!=e&&(this.deserialize?this.deserialize(e):K.deserialize(this,e))},K.serialize=function(t){return n(t.toJSON)?t.toJSON():E.call(t,t[O])},K.deserialize=function(t,e){if(u(e))try{e=JSON.parse(e)}catch(i){return console.error("<json:deserialize>",e),t}if(o(e)&&n(t.push)){t.length=0;for(var l=0,s=e.length;s>l;l++)t.push(e[l]);return t}var a,c,f,h,p,d=t[O];if(null!=d){var v="__desAsKeys";if(a=d[v],null==a){a=d[v]={};for(f in d)"__desAsKeys"!==f&&d[f].hasOwnProperty("key")===!0&&(a[d[f].key]=f)}}for(f in e)h=e[f],c=f,null!=d&&(p=d.hasOwnProperty(f)?d[f]:null,a[f]&&(c=a[f]),null!=p&&(r(p)&&(p=p.deserialize),u(p)&&(p=b(p)),n(p)))?t[c]=h instanceof p?h:new p(h):t[c]=h;return t}}();var J,W=function(){function t(t){this.route=r(t)}function e(t){var e=o.exec(t);return e?{optional:"?"===(e[2]||e[3]),parts:[e[1],e[4]]}:(e=l.exec(t))?{optional:"?"===e[3],parts:[e[1],e[4],e[5]]}:(console.error("Paths breadcrumbs should be matched by regexps"),{parts:[t]})}function n(t,n){for(var r=t.split(n),i=0,o=r.length;o>i;i++)r[i]=e(r[i]);return r}function r(t){var e=/[^\:\{]\?[^:]/.exec(t),r=null;return e&&(e=e.index+1,r=t.substring(e+1),t=t.substring(0,e)),{path:n(t,"/"),query:null==r?null:n(r,"&")}}function i(t,e,n){for(var r,i,o,l=[],u=0,s=t.length;s>u;u++)if(o=t[u],i=o.parts.slice(0),null!=i[1]){if(r=i[1],i[1]=e[r],null!=i[1])l.push(i.join(""));else if(!o.optional)return console.error("Object has no value, for not optional part - ",r),null}else l.push(i[0]);return l.join(n)}t.prototype={constructor:t,create:function(t){var e,n;return e=i(this.route.path,t,"/"),null==e?null:this.route.query&&(n=i(this.route.query,t,"&"),null==n)?null:e+(n?"?"+n:"")},hasAliases:function(t){for(var e,n=0,r=this.route.path.length;r>n;n++)if(e=this.route.path[n].parts[1],e&&null==t[e])return!1;return!0}};var o=/^([^:\?]*)(\??):(\??)([\w]+)$/,l=/^([^\{\?]*)(\{(\??)([\w]+)\})?([^\s]*)?$/;return t}();!function(){function t(t,e,n,r){return null==r?t:(null!=e?U(r,t,e):n.push(r),t)}function e(t){t._done=null,t._fail=null,t._always=null}function n(t,e,n){if(null!=t){for(var r,i=t.length,o=-1;++o<i;)r=t[o],r&&U(r,e,n);t.length=0}}function r(t){return null==t||"object"!=typeof t?!1:t instanceof J?!0:"function"==typeof t.done&&"function"==typeof t.fail}J=function(){},J.prototype={_isAsync:!0,_done:null,_fail:null,_always:null,_resolved:null,_rejected:null,defer:function(){this._rejected=null,this._resolved=null},isResolved:function(){return null!=this._resolved},isRejected:function(){return null!=this._rejected},isBusy:function(){return null==this._resolved&&null==this._rejected},resolve:function(){var t=this._done,r=this._always;return this._resolved=arguments,e(this),n(t,this,arguments),n(r,this,[this]),this},reject:function(){var t=this._fail,r=this._always;return this._rejected=arguments,e(this),n(t,this,arguments),n(r,this,[this]),this},resolveDelegate:function(){return z(this.resolve,this)},rejectDelegate:function(){return z(this.reject,this)},then:function(t,e){return this.pipe(t,e)},done:function(e){return null!=this._rejected?this:t(this,this._resolved,this._done||(this._done=[]),e)},fail:function(e){return null!=this._resolved?this:t(this,this._rejected,this._fail||(this._fail=[]),e)},always:function(e){return t(this,this._rejected||this._resolved,this._always||(this._always=[]),e)},pipe:function(t){function e(t,e,n){return function(){if(null!=n){var i=n.apply(this,arguments);if(null!=i)return r(i)===!0?void i.pipe(t):void t[e](i)}t[e].apply(t,arguments)}}var n;if("function"==typeof t){n=new J;var i=t,o=arguments.length>1?arguments[1]:null;return this.done(e(n,"resolve",i)).fail(e(n,"reject",o)),n}n=t;for(var l,u=arguments.length,s=1===u,a=1===u,c=0;++c<u;)switch(l=arguments[c]){case"done":s=!0;break;case"fail":a=!0;break;default:console.error("Unsupported pipe channel",arguments[c])}return s&&this.done(n.resolveDelegate()),a&&this.fail(n.rejectDelegate()),this},pipeCallback:function(){var t=this;return function(e){if(null!=e)return void t.reject(e);var n=h.call(arguments,1);U(t.resolve,t,n)}}},J.run=function(t,e){var n=new J;return null==e&&(e=n),t.call(e,n.resolveDelegate(),n.rejectDelegate(),n),n},J.create=function(t){return function(){var e=h.call(arguments),n=new J;return e.unshift(n),U(t,this,e),n}},J.memoize=function(t){var e={},n=[];return function(){var r=h.call(arguments),i=V(n,r);if(null!=e[i])return e[i];var o=e[i]=new J;return r.unshift(o),U(t,this,r),o}}}();var X;!function(){function t(){var t,e,n=h.call(arguments),r=n.shift(),i=this._listeners[r],o=0;if(null==i)return this;for(e=i.length;e>o;o++)t=i[o],U(t,this,n),t._once===!0&&(i.splice(o,1),o--,e--);return this}X=function(){this._listeners={}},X.prototype={constructor:X,on:function(t,e){return null!=e&&(this._listeners[t]||(this._listeners[t]=[])).push(e),this},once:function(t,e){return null!=e&&(e._once=!0,(this._listeners[t]||(this._listeners[t]=[])).push(e)),this},pipe:function(t){var e,n=this;return function(){e=h.call(arguments),e.unshift(t),U(n.trigger,n,e)}},emit:t,trigger:t,off:function(t,e){var n=this._listeners[t];if(null==n)return this;if(1===arguments.length)return n.length=0,this;for(var r=n.length,i=-1;++i<r;)n[i]===e&&(n.splice(i,1),i--,r--);return this}}}();var Y,Q=function(t){var e,n;if(u(t)){if(e=t,1===arguments.length)return b(t);n=arguments[1],n[v]=e}else n=t;var r=n.Base,i=n.Extends,l=n.Static,s=n.Construct,a=null,c=n.Store,h=n.Self,p=n.Override;return null!=r&&delete n.Base,null!=i&&delete n.Extends,null!=l&&delete n.Static,null!=h&&delete n.Self,null!=s&&delete n.Construct,null!=c&&(null==i?i=c:o(i)?i.unshift(c):i=[c,i],delete n.Store),null!=p&&delete n.Override,null==r&&null==i&&null==h?(void 0===n.toJSON&&(n.toJSON=E),a=null==s?function(){}:s,n.constructor=a.prototype.constructor,null!=l&&L(a,l),a.prototype=n,null!=e&&y(e,a),a):(a=function(){if(null!=i)for(var t=i instanceof Array,e=t?i.length:1,n=0,o=null;e>n;n++)o=t?i[n]:i,"function"==typeof o&&U(o,this,arguments);if(null!=r&&U(r,this,arguments),null!=h&&f(this)===!1)for(var l in h)this[l]=z(h[l],this);if(null!=s){var u=U(s,this,arguments);if(null!=u)return u}return this["super"]=null,this},null!=e&&y(e,a),null!=l&&L(a,l),null!=r&&N(a,r),null!=i&&N(a,i),j(n,r,i),S(a,r,i,n,p,{toJSON:E}),n=null,l=null,a)};!function(){function t(t,n,r){var i,o=e(t,n,!0);return r.done(function(){i=h.call(arguments),i.unshift(null),o.apply(null,i)}).fail(function(t){o(t)})}function e(t,e,r){null==r&&(r=!0),t._timeout&&clearTimeout(t._timeout),t.defer(),t._wait++,e&&(t._result||(t._result={}),e in t._result&&console.warn("<await>",e,"already awaiting"),t._result[e]=null);var i=B(n,t,e,r);return t._timeout=setTimeout(i,Y.TIMEOUT),i}function n(t,e,n){if(0===arguments.length)return t._wait=0,void t.reject("408: Timeout");if(0!==t._wait){var r=t._result;if(e){var i=h.call(arguments,3);r[e]={error:n?i.shift():null,arguments:i}}else n&&null!=arguments[3]&&(null==r&&(r=t._result={}),r.__error=arguments[3]);if(0===--t._wait){clearTimeout(t._timeout);var o,l,u=r&&r.__error;if(null==u)for(l in r)if(o=r[l],u=o&&o.error)break;if(u)return void t.reject(u,r);t.resolve(r)}}}Y=Q({Extends:J.prototype,_wait:0,_timeout:null,_result:null,_resolved:[],Construct:function(){for(var e,n=arguments.length,r=-1;++r<n;)e=arguments[r],null!=e&&"function"==typeof e.done&&t(this,null,e)},delegate:function(t,n){return e(this,t,n)},deferred:function(e){return t(this,e,new J)},Static:{TIMEOUT:2e3}})}();var Z,tt,et,nt,rt={fetch:null,save:null,del:null,onSuccess:null,onError:null,Static:{fetch:function(t){return(new this).fetch(t)}}};!function(){function t(t,n){return function(){var r=null==t._rejected,i=r?t._resolved:t._rejected,u=r?o:l;e([u,t,n].concat(i))}}function e(t){u.trigger.apply(u,t)}var n,r,i="start",o="fulfilled",l="rejected",u=new X;Z=function(t){u.on(i,t),n=!0},tt=function(t,e){u.on(o,t).on(l,e),r=!0},et=function(t){u.off(o,t).off(l,t).off(i,t)},nt=function(o){return J.prototype.defer.call(this),n&&e([i,this,o]),r&&this.always(t(this,o)),this}}(),Q.Remote=function(){function t(t,n){var r;try{r=JSON.parse(n)}catch(i){return void e(t,i)}t.deserialize(r),t.resolve(t)}function e(t,e,r){var i;if("string"==typeof e&&n(r))try{i=JSON.parse(e)}catch(o){i=o}t.reject(i||e)}function n(t){var e=t.getResponseHeader(u);return null!=e&&-1!==e.toLowerCase().indexOf(s)}function i(t,i,l){return function(u,s,a){if(n(a))try{s=JSON.parse(s)}catch(u){return console.error("<XHR> invalid json response",s),e(t,u,a)}if(i&&i(u,s),u)return e(t,s,a);if("save"===l&&r(s)){if(o(t))for(var c=t.length,f=s.length,h=-1;++h<c&&f>h;)K.deserialize(t[h],s[h]);else t.deserialize(s);return t.resolve(t)}t.resolve(s)}}function l(t){return new a(t)}var u="content-type",s="json",a=function(t){this._route=new W(t)};return T(a,rt,K,J,{defer:nt,serialize:function(){return o(this)?A.call(this):E.call(this)},deserialize:function(t){return K.deserialize(this,t)},fetch:function(t){return this.defer("fetch"),G.get(this._route.create(t||this),this),this},save:function(t){this.defer("save");var e=this.serialize(),n=this._route.create(this),r=this._route.hasAliases(this)?"put":"post";return G[r](n,e,i(this,t,"save")),this},patch:function(t){return this.defer("patch"),$(this,t),G.patch(this._route.create(this),t,i(this)),this},del:function(t){this.defer("del");var e=this.serialize(),n=this._route.create(this);return G.del(n,e,i(this,t)),this},onSuccess:function(e){t(this,e)},onError:function(t,n,r){e(this,n,r)}}),l.onBefore=Z,l.onAfter=tt,m(["get","post","put","delete"],function(t){l[t]=function(e,n){var r=n;null!=n.serialize&&(r=n.serialize()),null==r&&n.toJSON&&(r=n.toJSON());var o=new J;return G[t](e,r,i(o)),o}}),l}(),Q.MongoStore=function(){function t(){return c?c:a?"mongodb://"+R+":"+P+"/"+a:null}function e(t){var e,n="_id",i=null;if(u(t))e=t;else if(r(t)&&(e=t.collection,i=t.indexes,null!=t.primaryKey)){n=t.primaryKey;var o={};o[n]=1,null==i&&(i=[]),i.push([o,{unique:!0}])}!e&&console.error("<MongoStore> should define a collection name",t),this._coll=e,this._indexes=i,this._primaryKey=n,null!=i&&F.add(e,i)}var l,s;!function(){l=function(t,e){var n;return function(r){r&&(n=r),0===--t&&e(n)}},s=function(t){return function(e){return e?t.reject(e):void t.resolve()}}}();var a,c,f,p,d,v,m,_,y,b,x,w,C,k,S,N,j,A,O,D,M,R="127.0.0.1",P=27017,L={auto_reconnect:!0,native_parser:!0,w:1},I=function(t){t.ip&&(R=t.ip),t.port&&(P=t.port),t.db&&(a=t.db),t.params&&(L=t.params),c=t.connection};!function(){var e,n,r,o,l,s,c,g,E;!function(){function t(t,e,n,r){function o(t){t&&(l=t),0===--s&&r(l)}var l,u=n.length,s=u;if(i=-1,0===u)return r();for(;++i<u;)t(e,n[i][0],n[i][1],o)}e=function(t,e,n,r){var i=P.collection(t);return null==n?i.findOne(e,r):void i.findOne(e,n,r)},n=function(t,e,n,r){function i(t,e){return t?r(t):void e.toArray(r)}var o=P.collection(t);return null==n?o.find(e,i):void o.find(e,n,i)},r=function(t,e,n,r){P.collection(t).update(e,n,u,r)},o=function(e,n,i){t(r,e,n,i)},l=function(t,e,n,r){P.collection(t).update(e,n,r)},s=function(e,n,r){t(l,e,n,r)},c=function(t,e,n){P.collection(t).remove(e,{justOne:!0},n)},g=function(t,e,n){P.collection(t).remove(e,{justOne:!1},n)},E=function(t,e,n){P.collection(t).count(e,n)};var u={upsert:!0,multi:!1}}();var T,R;!function(){function t(t){return null==t?{$query:{},$explain:!0}:t.$query?(t.$explain=!0,t):{$query:t,$explain:!0}}function i(e){return e.forEach(function(e){return[t(e[0]),e[1]]})}function u(t,e){return function(n,r){return m.count++,n?void m.errors.push(n):void a(t,e,r)}}function a(t,e,n,r){if(r=r||{},null!=n&&"number"!=typeof n){if(Array.isArray(n))return void n.forEach(function(n,i){r.isArray=!0,r.index=i,a(t,e,n,r)});if(n.clause)return void n.clause.forEach(function(n,i){r.isClause=!0,r.index=i,a(t,e,n,i)});if(null!=n.millis&&n.millis>=p)return void f("slow",t,e,n,r);if(null!=n.cursor)return-1!==n.cursor.indexOf("BasicCursor")?void f("unindexed",t,e,n,r):v&&v(n,t,e)?void f("custom",t,e,n,r):void 0}}function f(t,e,n,r,i){i.reason=t;var o={coll:e,query:n,plan:r,params:i};d&&d(o),m.slow.push(o)}var h=!1,p=50,d=null,v=null,m={count:0,slow:[],errors:[]},_=e,y=n,b=r,x=o,w=l,C=s,k=c,S=g,N=E;R=function(){return m},T=function(a,f){if(f&&(p=f.slow||p,d=f.onDetect||d,v=f.detector||v),h!==a){if(null==a&&(a=!!h),h=a,h===!1)return e=_,n=y,r=b,o=x,l=w,s=C,c=k,g=S,void(E=N);e=function(e,n,r,i){_.apply(null,arguments),_(e,t(n),r,u(e,n))},n=function(e,n,r,i){y.apply(null,arguments),y(e,t(n),r,u(e,n))},r=function(e,n,r,i){b.apply(null,arguments),b(e,t(n),r,u(e,n))},o=function(t,e,n){x.apply(null,arguments),x(t,i(e),u(t,e))},l=function(e,n,r,i){w.apply(null,arguments),w(e,t(n),r,u(e,n))},s=function(t,e,n){C.apply(null,arguments),C(t,i(e),u(t,e))},c=function(e,n,r){k.apply(null,arguments),k(e,t(n),u(e,n))},g=function(e,n,r){S.apply(null,arguments),S(e,t(n),u(e,n))},E=function(e,n,r){N.apply(null,arguments),N(e,t(n),u(e,n))}}}}(),M=R,D=T;var P,I;p=function(t,e){if(null==P)return F(H(p,t,e));var n=P.collection(t);return null==n?e("<mongo> Collection Not Found: "+t):void e(null,n)},A=function(t){var e=new Q.Deferred;return p(t,function(t,n){return t?e.reject(t):void e.resolve(n)}),e},f=function(t){return null==P?F(H(f,t)):void t(null,P)},O=function(t){var e=new J;return f(function(t,n){return t?e.reject(t):void e.resolve(n)}),e},d=function(t,n,r){return null==P?F(H(d,t,n,r)):void e(t,$(n),null,r)},v=function(t,e,r,i){return null==P?F(H(v,t,e,r,i)):(null==r&&(r={}),void n(t,$(e),r,i))},m=function(t,e,n){return null==P?F(H(m,t,e,n)):void E(t,e,n)},_=function(t,e,n){return null==P?F(H(_,t,e,n)):void P.collection(t).insert(e,{safe:!0},n)},y=function(t,e,n){return null==P?F(H(y,t,e,n)):void P.collection(t).insertOne(e,{safe:!0},n)},b=function(t,e,n){return null==P?F(H(b,t,e,n)):void P.collection(t).insertMany(e,{safe:!0},n)},x=function(t,e,n){if(null==P)return F(H(x,t,e,n));if(null==e._id)return n("<mongo:update> invalid ID");var r={_id:k(e._id)};l(t,r,e,n)},w=function(t,e,n){var r=e.map(function(t){return[{_id:k(t._id)},t]});s(t,r,n)},S=function(t,e,n,r){if(null==P)return F(H(S,t,e,n,r));var i={_id:k(e)};l(t,i,n,r)},C=function(t,e,n,r){if(null==P)return F(C.bind(null,t,e,r));e=$(e);var i=n?c:g;i(t,e,r)},N=function(t,e,n){if(null==P)return F(H(N,t,e,n));var r=P.collection(t);return Array.isArray(e)?void r.ensureIndex(e[0],e[1],n):void r.ensureIndex(e,n)},k=function(t){return u(t)&&24===t.length?j().ObjectID(t):t},j=function(){return j=function(){return I},I=require("mongodb")};var F=function(){var e,n=[],r=!1;return function(i){function o(t,e){null==t&&(P=e);for(var i=n.length,o=-1;++o<i;)n[o](t);n.length=0,r=!1}return P?i():null==a?i('Database is not set. Call Class.MongoStore.settings({db:"myDbName"})'):(n.push(i),r?void 0:(j(),r=!0,(e=t())?void I.MongoClient.connect(e,L,o):i("<mongo> Invalid connection string")))}}(),$=function(t){if(null==t)return t;if(t.hasOwnProperty("$query")||t.hasOwnProperty("$limit"))return t;t.hasOwnProperty("_id")&&(t._id=k(t._id));var e={62:{0:"$gt",61:"$gte"},60:{0:"$lt",61:"$lte"}};for(var n in t){var r,i=t[n];if("string"==typeof i)switch(r=i.charCodeAt(0)){case 62:case 60:var o=e[r][0];61===i.charCodeAt(1)?(o=e[r][61],i=i.substring(2)):i=i.substring(1),t[n]={},t[n][o]=parseInt(i);continue}}return t},H=function(t){var e=h.call(arguments,1),n=e[e.length-1];return function(r){return r?n(r):(arguments.length>0&&(e=e.concat(arguments)),U(t,null,e))}}}();var F;!function(){function t(t,e,n){for(var r=-1,i=e.length,o=l(i,n);++r<i;)N(t,e[r],o)}function e(e){for(var o=(new J,i.length),u=l(o,e),s=-1;++s<o;)t(i[s][n],i[s][r],u)}F={add:function(t,e){i.push([t,e])},ensureAll:e,ensure:t};var n=0,r=1,i=[]}();var B=function(){function t(t){e.call(this,t)}T(t,rt,K,J,{fetch:function(t){return this._ensureFree()===!1?this:(d(this._coll,t,z(this._fetched,this)),this)},save:function(){if(this._ensureFree()===!1)return this;var t=this.serialize(),e=null==t._id?y:x;return e(this._coll,t,z(this._inserted,this)),this},del:function(){return this._ensureFree()===!1?this:(this._id?C(this._coll,{_id:this._id},!0,z(this._completed,this)):this._completed("<class:patch> `_id` is not defined"),this)},patch:function(t){if(this._ensureFree()===!1)return this;if(null==this._id)return this._completed("<class:patch> `_id` is not defined");var e=H(t);return null!=e?this._completed(e):($(this,t),S(this._coll,this._id,t,z(this._completed,this)),this)},Static:{fetch:function(t){return(new this).fetch(t)},resolveCollection:function(){return A((new this)._coll)}},serialize:function(){return E.call(this)},deserialize:function(t){return K.deserialize(this,t),this._id&&(this._id=k(this._id)),this},_busy:!1,_coll:null,_indexes:null,_primaryKey:null,_ensureFree:function(){return this._busy?(console.warn("<mongo:single> transport requested, but is busy for the same instance."),!1):(this.defer(),this._busy=!0,!0)},_completed:function(t){return this._busy=!1,t?this.reject(t):this.resolve(this)},_fetched:function(t,e){null==t&&(null==e?t={message:"Entry Not Found",code:404}:this.deserialize(e)),this._completed(t)},_inserted:function(t,e){if(null==t){var n=e.ops;null!=n&&null==this._id&&(o(n)&&1===n.length?this._id=n[0]._id:console.error("<mongo:insert-single> expected an array in callback"))}this._completed(t)}});var n=function(e){return new t(e)};return n.prototype=t.prototype,n}(),q=function(){function t(t){e.call(this,t)}function r(t,e){var r=t._ctor,i=new r(e);null==i._id&&n(i.deserialize)&&i.deserialize(e),t[t.length++]=i}T(t,J,{fetch:function(t,e){return this._ensureFree()===!1?this:(v(this._coll,t,e,z(this._fetched,this)),this)},save:function(){if(this._ensureFree()===!1)return this;for(var t,e=[],n=[],r=[],i=this._coll,o=z(this._completed,this),u=0,s=this.length;s>u;u++)t=this[u],null!=t._id?r.push(t.serialize()):(e.push(t.serialize()),n.push(u));if(e.length&&r.length){var a=l(2,o);return b(i,e,this._insertedDelegate(this,a,n)),w(i,r,a),this}return e.length?(b(i,e,this._insertedDelegate(this,this._completed,n)),this):r.length?(w(i,r,o),this):this},del:function(t){if(null==t&&0!==arguments.length)return console.error("<MongoStore:del> - selector is specified, but is undefined"),this;if(this._ensureFree()===!1)return this;var e=null==t?this.toArray():this.remove(t);if(e&&e.length){for(var n,r=[],i=0,o=e.length;o>i;i++)n=e[i],n._id&&r.push(n._id);C(this._coll,{_id:{$in:r}},!1,z(this._completed,this))}else this._completed();return this},Static:{fetch:function(t,e){return(new this).fetch(t,e)},count:function(t){var e=new J;return m(this.prototype._coll,t,function(t,n){return null!=t?void e.reject(n):void e.resolve(n)}),e}},_busy:!1,_coll:null,_indexes:null,_primaryKey:null,_ensureFree:function(){return this._busy?(console.warn("<mongo:collection> requested transport, but is busy by the same instance."),!1):(this._busy=!0,this._resolved=null,this._rejected=null,!0)},_completed:function(t){this._busy=!1,t?this.reject(t):this.resolve(this)},_fetched:function(t,e){if(g(e))for(var n,i=0,o=e.length;o>i;i++)n=e[i],r(this,n);else e&&r(this,e);this._completed(t)},_insertedDelegate:function(t,e,n){function r(n){e.call(t,n)}return function(e,i){if(null==e){var l=i.ops;if(o(l)===!1)return console.error("<mongo:bulk insert> array expected"),r();if(l.length!==n.length)return console.error("<mongo:bul insert> count missmatch",l.length,n.length),r();for(var u,s=0,a=n.length;a>s;s++)u=n[s],t[u]._id=l[s]._id}r(e)}}});var i=function(e){return new t(e)};return i.prototype=t.prototype,i}();return{Single:B,Collection:q,settings:I,resolveDb:O,resolveCollection:A,createId:function(t){return k(t)},ensureIndexes:function(t){var e=t.prototype,n=e._indexes,r=e._coll,i=new J;return null==n?i.reject("<No indexes> "+r):(F.ensure(r,n,s(i)),
i)},ensureIndexesAll:function(){var t=new J;return F.ensureAll(s(t)),t},profiler:{toggle:D,getData:M}}}(),Q.bind=function(t){for(var e,n=arguments,r=1,i=arguments.length;i>r;r++)e=n[r],t[e]=t[e].bind(t);return t},Q.cfg=function(t,e){if(u(t))return 1===arguments.length?d[t]:void(d[t]=e);if(r(t))for(var n in t)Q.cfg(n,t[n])},Q.Model={},Q.Serializable=K,Q.Deferred=J,Q.EventEmitter=X,Q.Await=Y,Q.validate=F,Q.stringify=w,Q.parse=C,Q.patch=x,Q.properties=k,Q.Collection=function(){function t(t,e){return e instanceof t?e:new t(e)}function e(){var t,e=arguments.length,i=arguments[e-1],o=arguments[e-2];return e>2&&(t=arguments[0]),i._ctor=o,T(i,r,n),null==t?Q(i):Q(t,i)}var n=function(){function e(t,e){if(null==e)return!1;if("function"==typeof e)return e(t);if("object"==typeof e){if(t.constructor===e.constructor&&t.constructor!==Object)return t===e;var n,r;for(var i in e){if(n=t[i],r=e[i],"string"==typeof r){var o=r[0],l=1;if("<"===o||">"===o)switch("="===r[1]&&(o+="=",l++),r=r.substring(l),o){case"<":if(n>=r)return!1;continue;case"<=":if(n>r)return!1;continue;case">":if(r>=n)return!1;continue;case">=":if(r>n)return!1;continue}}if(n!=r)return!1}return!0}return console.warn("No valid matcher",e),!1}function n(t,e){for(var n=this.length,r=-1;++r<n;)t.call(e||this,this[r],r);return this}var r={length:0,push:function(){for(var e=arguments.length,n=-1;++n<e;)this[this.length++]=t(this._ctor,arguments[n]);return this},pop:function(){var t=this[--this.length];return this[this.length]=null,t},shift:function(){if(0===this.length)return null;for(var t=this[0],e=this.length-1,n=0;e>n;n++)this[n]=this[n+1];return this[e]=null,this.length--,t},unshift:function(e){this.length++;for(var n=this.length;--n;)this[n]=this[n-1];return this[0]=t(this._ctor,e),this},splice:function(e,n){var r,i,o,l=this.length;if(e>=l)for(n=0,r=l,i=e;i>r;r++)this[r]=void 0;var u=n,s=e,a=e+u,c=arguments.length-2,f=l+c-u,h=a,p=l,d=f-l;if(d>0)for(r=p;--r>=h;)this[r+d]=this[r];if(0>d)for(r=h;p>r;)this[r+d]=this[r],r++;for(r=s,o=2;o<arguments.length;o)this[r++]=t(this._ctor,arguments[o++]);return this.length=f,this},slice:function(){return U(h,this,arguments)},sort:function(t){return p.call(this,t),this},reverse:function(){for(var t=h.call(this),e=this.length,n=-1;++n<e;)this[n]=t[e-n-1];return this},toString:function(){return h.call(this,0).toString()},each:n,forEach:n,where:function(t){for(var n,r=new this.constructor,i=0,o=this.length;o>i;i++)n=this[i],e(n,t)&&(r[r.length++]=n);return r},remove:function(t){for(var n=-1,r=[],i=0,o=this.length;o>i;i++)e(this[i],t)?r.push(this[i]):this[++n]=this[i];for(i=++n;o>i;i++)this[i]=null;return this.length=n,r},first:function(t){if(null==t)return this[0];var e=this.indexOf(t);return-1!==e?this[e]:null},last:function(t){if(null==t)return this[this.length-1];var e=this.lastIndexOf(t);return-1!==e?this[e]:null},indexOf:function(t,n){if(null==t)return-1;if(null!=n){if(0>n&&(n=0),n>=this.length)return-1}else n=0;for(var r=this.length;r>n;n++)if(e(this[n],t))return n;return-1},lastIndexOf:function(t,n){if(null==t)return-1;if(null!=n){if(n>=this.length&&(n=this.length-1),0>n)return-1}else n=this.length-1;for(;n>-1;n--)if(e(this[n],t))return n;return-1},map:function(t){for(var e=[],n=this.length,r=-1;++r<n;)e[r]=t(this[r]);return e},filter:function(t,e){for(var n=new this.constructor,r=this.length,i=-1;++i<r;)t.call(e||this,this[i])&&n.push(this[i]);return n}};return"undefined"!=typeof Symbol&&Symbol.iterator&&(r[Symbol.iterator]=function(){var t=this,e=-1;return{next:function(){return{value:t[++e],done:e>t.length-1}},hasNext:function(){return e<t.length}}}),r}(),r={toArray:function(){for(var t=new Array(this.length),e=0,n=this.length;n>e;e++)t[e]=this[e];return t},toJSON:A};return e}(),function(){var t,e;!function(){function n(t,e,n){return function(){t[n]=arguments;for(var r,i=0,o=e[n].length;o>i;i++)r=e[n][i],U(r,this,arguments);e[i]=null,t=null,e=null}}t=function(t){var e={},n=[];return function(){var r=V(arguments,n);return null==e[r]?e[r]=U(t,this,arguments):e[r]}},e=function(t){var e={},r={},i=[];return function(){var o=h.call(arguments),l=o.pop(),u=V(o,i);return e[u]?void U(l,this,e[u]):r[u]?void r[u].push(l):(r[u]=[l],o=h.call(o),o.push(n(e,r,u)),void U(t,this,o))}}}(),Q.Fn={memoize:t,memoizeAsync:e}}(),e.Class=Q}),function(t,e){"use strict";var n,r;return"undefined"==typeof exports||t!==exports&&null!=t||(n=r=global),null==n&&(n="undefined"==typeof window?global:window),null==r&&(r=t||n),"undefined"!=typeof include&&"function"==typeof include.js?(r.include=include,void(r.includeLib=include.Lib||n.includeLib)):void e(n,r,n.document)}(this,function(global,exports,document){"use strict";function fn_proxy(t,e){return function(){t.apply(e,arguments)}}function fn_doNothing(t){"function"==typeof t&&t()}function arr_invoke(t,e,n){if(null!=t&&t instanceof Array!=!1)for(var r=0,i=t.length;i>r;r++)"function"==typeof t[r]&&(null==e?t[r].call(n):t[r].apply(n,e))}function arr_ensure(t,e){if(!e)return t;for(var n,r=e.split("."),i=r.length-1,o=0;i>o;o++)n=r[o],t=t[n]||(t[n]={});return n=r[i],t[n]||(t[n]=[])}function __eval(t,e,n){module.exports={},global.include=e,global.require=require,global.exports=module.exports,global.__filename=path_getFile(e.url),global.__dirname=path_getDir(global.__filename),global.module=module,n!==!0&&(t="(function(){ "+t+"\n}())");try{if(n)vm.runInThisContext(t,global.__filename);else{var r=global.__filename;module=new Module(r,module),module.paths=Module._nodeModulePaths(path_getDir(r)),module.filename=r,module._compile(t,r),module.loaded=!0}}catch(i){console.error("Module Evaluation Error",e.url),console.error(i.stack)}if(null==e.exports){var o=module.exports;("object"!=typeof o||Object.keys(o).length)&&(e.exports=module.exports)}}var bin={js:{},css:{},load:{}},isWeb=!!(global.location&&global.location.protocol&&/^https?:/.test(global.location.protocol)),reg_subFolder=/([^\/]+\/)?\.\.\//,reg_hasProtocol=/^(file|https?):/i,cfg={path:null,loader:null,version:null,lockedToFolder:null,sync:null,eval:null==document},handler={},hasOwnProp={}.hasOwnProperty,emptyResponse={load:{}},__array_slice=Array.prototype.slice,XMLHttpRequest=global.XMLHttpRequest,Helper={reportError:function(t){console.error("IncludeJS Error:",t,t.message,t.url),"function"==typeof handler.onerror&&handler.onerror(t)}},XHR=function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&e&&e(t,n.responseText)},n.open("GET","object"==typeof t?t.url:t,!0),n.send()},obj_inherit,obj_getProperty,obj_setProperty;!function(){obj_inherit=function(t){"function"==typeof t&&(t=t.prototype);for(var e,n,r=1,i=arguments.length;i>r;r++){e="function"==typeof arguments[r]?arguments[r].prototype:arguments[r];for(n in e)t[n]=e[n]}return t},obj_getProperty=function(t,e){for(var n=e.split("."),r=n.length,i=0;r>i;i++){if(null==t)return null;t=t[n[i]]}return t},obj_setProperty=function(t,e,n){for(var r,i=e.split("."),o=i.length-1,l=-1;++l<o;)r=i[l],null==t[r]&&(t[r]={}),t=t[r];t[i[l]]=n}}();var path_getDir,path_getFile,path_getExtension,path_resolveCurrent,path_normalize,path_win32Normalize,path_resolveUrl,path_combine,path_isRelative;!function(){function t(t){for(;-1!==t.indexOf("../");)t=t.replace(reg_subFolder,"");return t.replace(/\/\.\//g,"/")}path_getDir=function(t){return t.substring(0,t.lastIndexOf("/")+1)},path_getFile=function(t){return t=t.replace("file://","").replace(/\\/g,"/").replace(/\?[^\n]+$/,""),/^\/\w+:\/[^\/]/i.test(t)?t.substring(1):t},path_getExtension=function(t){var e=t.indexOf("?");return-1===e?t.substring(t.lastIndexOf(".")+1):t.substring(t.lastIndexOf(".",e)+1,e)},path_resolveCurrent=function(){if(null==document)return"undefined"==typeof module?"":path_win32Normalize(module.parent.filename);var t=document.getElementsByTagName("script"),e=t[t.length-1],n=e&&e.getAttribute("src")||"";if("/"===n[0])return n;var r=window.location.pathname.replace(/\/[^\/]+\.\w+$/,"");return"/"!==r[r.length-1]&&(r+="/"),r+n},path_normalize=function(t){return t.replace(/\\/g,"/").replace(/([^:\/])\/{2,}/g,"$1/")},path_win32Normalize=function(t){return t=path_normalize(t),"file:"===t.substring(0,5)?t:"file:///"+t},path_resolveUrl=function(e,n){return reg_hasProtocol.test(e)?t(e):("./"===e.substring(0,2)&&(e=e.substring(2)),"/"===e[0]&&null!=n&&null!=n.base&&(e=path_combine(n.base,e),reg_hasProtocol.test(e))?t(e):"/"===e[0]&&cfg.path&&(e=cfg.path+e.substring(1),reg_hasProtocol.test(e))?t(e):("/"===e[0]?isWeb!==!1&&cfg.lockedToFolder!==!0||(e=e.substring(1)):null!=n&&null!=n.location&&(e=n.location+e),t(e)))},path_isRelative=function(t){var e=t.charCodeAt(0);switch(e){case 47:return!1;case 102:case 104:return reg_hasProtocol.test(t)===!1}return!0},path_combine=function(){for(var t,e="",n=arguments.length,r=-1;++r<n;)t=arguments[r],t&&(t=path_normalize(t),""!==e?("/"!==e[e.length-1]&&(e+="/"),"/"===t[0]&&(t=t.substring(1)),e+=t):e=t);return e}}();var tree_resolveUsage;!function(){function t(e,n,r){if(null==n){console.warn("<include> Usage Not Found:",e),console.warn("- Ensure to have it included before with the correct alias"),console.warn("- Initiator Stacktrace:");for(var i=[],o=r;null!=o;)i.push(o.url),o=o.parent;return console.warn(i.join("\n")),null}for(var l,u,s=n.includes,a=-1,c=s.length;++a<c;)if(l=s[a],u=l.route.alias||Routes.parseAlias(l.route),u===e)return l.resource;return t(e,n.parent,r)}tree_resolveUsage=function(e,n,r){for(var i,o,l,u,s,a=[],c=n.length,f=-1;++f<c;){if(l=o=n[f],u=o.indexOf("."),-1!==u&&(l=o.substring(0,u),o=o.substring(u+1)),s=t(l,e.parent,e),null==s)return null;if(4!==s.state)return e.state=3,s.on(4,r,s,"push"),null;i=s.exports,l!==o&&(i=obj_getProperty(i,o)),"object"==typeof i&&null==i&&console.warn("<include:use> Used resource has no exports",l,e.url),a[f]=i}return a}}();var RoutesLib=function(){var t={},e=/([^\\\/]+)\.\w+$/;return{register:function(e,n,r){if("string"==typeof n&&path_isRelative(n)){var i=r||include,o=i.location||path_getDir(i.url||path_resolveCurrent());path_isRelative(o)&&(o="/"+o),n=o+n}t[e]=n instanceof Array?n:n.split(/[\{\}]/g)},resolve:function(e,n){var r,i,o,l,u,s,a,c,f=n.indexOf("?"),h=n.indexOf("::");if(-1!==h&&(r=n.substring(h+2),n=n.substring(0,h)),-1!==f){for(c=n.substring(f+1).split("&"),o={},u=0,a=c.length;a>u;u++)s=c[u].split("="),o[s[0]]=s[1];n=n.substring(0,f)}if(n=n.split("/"),l=t[e],null==l)return{path:n.join("/"),params:o,alias:r};for(i=l[0],u=1;u<l.length;u++)if(u%2===0)i+=l[u];else{var p=l[u]<<0;if(p>n.length-1&&(p=n.length-1),i+=n[p],u===l.length-2)for(p++;p<n.length;p++)i+="/"+n[p]}return{path:i,params:o,alias:r}},each:function(t,e,n,r,i){var o;if(null!=e)if("lazy"!==t||null!=i)if(e instanceof Array)for(var l=0;l<e.length;l++)this.each(t,e[l],n,r,i);else if("object"!=typeof e){if("string"==typeof e){var u=this.resolve(r,e);return r&&(r+="."+e),void n(r,u,i)}console.error("Include Package is invalid",arguments)}else for(o in e)hasOwnProp.call(e,o)&&this.each(t,e[o],n,o,i);else for(o in e)this.each(t,e[o],n,null,o)},getRoutes:function(){return t},parseAlias:function(t){var n=t.path,r=e.exec(n);return r&&r[1]}}},Routes=RoutesLib(),Events=function(t){function e(){Events.ready=fn_doNothing,null!=n&&(arr_invoke(n),n=null)}if(null==t)return{ready:fn_doNothing,load:fn_doNothing};var n=[];return"onreadystatechange"in t?t.onreadystatechange=function(){/complete|interactive/g.test(t.readyState)!==!1&&e()}:t.addEventListener?t.addEventListener("DOMContentLoaded",e):window.onload=e,{ready:function(t){n.unshift(t)}}}(document),ScriptStack=function(){function t(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t,"onreadystatechange"in n?n.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&e()}:n.onload=n.onerror=e,(i||(i=document.getElementsByTagName("head")[0])).appendChild(n)}function e(){function n(t){t&&"error"===t.type&&console.log("Script Loaded Error",i.url);for(var n=0,r=u.length;r>n;n++)if(u[n]===i){u.splice(n,1);break}return n===r?void console.error("Loaded Resource not found in stack",i):(2.5!==i.state&&i.readystatechanged(3),o=null,void e())}if(!l){if(0===u.length)return void r();if(null==o){var i=o=u[0];if(1!==i.state)return i.state=1,global.include=i,global.iparams=i.route.params,i.source?(__eval(i.source,i),void n()):void t(i.url,n)}}}function n(){if(!l){if(0===u.length)return void r();if(null==o){var t=u[0];if(!(t.state<2)){o=t,t.state=1,global.include=t,__eval(t.source,t);for(var e,i=0,s=u.length;s>i;i++)if(e=u[i],e===t){u.splice(i,1);break}2.5!==t.state&&t.readystatechanged(3),o=null,n()}}}}function r(){for(var t=-1,e=s.length;++t<e;)s[t]();s.length=0}var i,o,l,u=[],s=[];return{load:function(t,r,i){return this.add(t,r),!cfg.eval||i?void e():t.source?(t.state=2,void n()):void XHR(t,function(t,e){e||(console.error("Not Loaded:",t.url),console.error("- Initiator:",t.parent&&t.parent.url||"<root resource>")),t.source=e,t.state=2,n()})},add:function(t,e){if(1===t.priority)return u.unshift(t);if(null==e)return u.push(t);for(var n=u.length,r=-1;++r<n;)if(u[r]===e)return u.splice(r,0,t);u.push(t)},moveToParent:function(t,e){var n,r=u.length,i=-1,o=-1;for(n=0;r>n;n++)if(u[n]===t){o=n;break}if(-1!==o){for(n=0;r>n;n++)if(u[n]===e){i=n;break}-1!==i&&(i>o||(u.splice(o,1),u.splice(i,0,t)))}},pause:function(){l=!0},resume:function(){l=!1,null==o&&this.touch()},touch:function(){var t=cfg.eval?n:e;t()},complete:function(t){return l!==!0&&0===u.length?void t():void s.push(t)}}}(),IncludeDeferred=function(){this.callbacks=[],this.state=-1};IncludeDeferred.prototype={on:function(t,e,n,r){return this===n&&-1===this.state?(e(this),this):(null==r&&(r=this.state<3||this===n?"unshift":"push"),t<=this.state?e(this):this.callbacks[r]({state:t,callback:e}),this)},readystatechanged:function(t){var e,n,r,i;if(t>this.state&&(this.state=t),3===this.state){var o=this.includes;if(null!=o&&o.length)for(e=0;e<o.length;e++)if(4!==o[e].resource.state)return;this.state=4}if(e=0,n=this.callbacks.length,0!==n){for("js"===this.type&&4===this.state&&(i=global.include,global.include=this);n>e&&(r=this.callbacks[e],null==r||r.state>this.state||(this.callbacks.splice(e,1),n--,e--,r.callback(this),!(this.state<4)));e++);null!=i&&"js"===i.type&&(global.include=i)}},ready:function(t){var e=this;return this.on(4,function(){Events.ready(function(){e.resolve(t)})},this)},done:function(t){var e=this;return this.on(4,function(){e.resolve(t)},this)},resolve:function(t){var e=this.includes,n=null==e?0:e.length;if(n>0&&null==this.response){this.response={};for(var r,i,o,l=0;n>l;l++)if(o=e[l],r=o.resource,i=o.route,"undefined"!=typeof r.exports){var u=r.type;switch(u){case"js":case"load":case"ajax":case"mask":var s=i.alias||Routes.parseAlias(i),a="js"===u?this.response:this.response[u]||(this.response[u]={});if(null!=s){a[s]=r.exports;break}console.warn("<includejs> Alias is undefined",r)}}}var c=this.response||emptyResponse,f=this;return null==this._use&&null!=this._usage&&(this._use=tree_resolveUsage(this,this._usage,function(){f.state=4,f.resolve(t),f.readystatechanged(4)}),this.state<4)?void 0:this._use?void t.apply(null,[c].concat(this._use)):void t(c)}};var Include,IncludeLib={};!function(IncludeDeferred){function incl_getResource(t,e){var n=t;if(path_isRelative(t)===!0&&(n="/"+n),null!=e)return bin[e][n];for(var r in bin)if(bin[r].hasOwnProperty(n))return bin[r][n];return null}function embedPlugin(source){eval(source)}function enableModules(){return"undefined"==typeof Object.defineProperty?void console.warn("Browser do not support Object.defineProperty"):(Object.defineProperty(global,"module",{get:function(){return global.include}}),void Object.defineProperty(global,"exports",{get:function(){var t=global.include;return t.exports||(t.exports={})},set:function(t){global.include.exports=t}}))}function includePackage(t,e,n){var r=1===n.length?n[0]:__array_slice.call(n);return t instanceof Resource?t.include(e,r):new Resource("js").include(e,r)}function createIncluder(t){return function(){return includePackage(this,t,arguments)}}function doNothing(){return this}function stub_freeze(t){t.js=t.css=t.load=t.ajax=t.embed=t.lazy=t.inject=t.mask=doNothing}function stub_release(t){for(var e=["js","css","load","ajax","embed","lazy","mask"],n=e.length;-1!==--n;)t[e[n]]=createIncluder(e[n]);t.inject=t.js}Include=function(){IncludeDeferred.call(this)},stub_release(Include.prototype),obj_inherit(Include,IncludeDeferred,{_use:null,_usage:null,isBrowser:!0,isNode:!1,setCurrent:function(t){var e=t.url,n=this.getResourceById(e,"js");if(null==n){"/"===e[0]&&this.base&&(e=this.base+e.substring(1));var n=new Resource("js",{path:e},t.namespace,null,null,e)}n.state<3&&console.error("<include> Resource should be loaded",t),n.state=3,global.include=n},cfg:function(t){switch(typeof t){case"object":var e,n;for(e in t)switch(n=t[e],e){case"loader":for(var r in n)CustomLoader.register(r,n[r]);break;case"modules":n===!0&&enableModules();break;default:cfg[e]=n}break;case"string":if(1===arguments.length)return cfg[t];2===arguments.length&&(cfg[t]=arguments[1]);break;case"undefined":return cfg}return this},routes:function(t){if(null==t)return Routes.getRoutes();if(2===arguments.length)return Routes.register(t,arguments[1],this),this;for(var e in t)Routes.register(e,t[e],this);return this},promise:function(t){for(var e=t.split("."),n=global;e.length;){var r=e.shift();n=n[r]||(n[r]={})}return n},register:function(t){function e(t){return null==s?t:("/"===t.url[0]&&(t.url=s+t.url.substring(1)),"/"===t.parent[0]&&(t.parent=s+t.parent.substring(1)),t.id=t.url,t)}function n(t,e){t.exports=e,t.readystatechanged(4)}var r,i,o,l,u,s=this.base;for(r in t)for(o=t[r],l=o.length,u=-1;++u<l;){i=e(o[u]);var a=i.id,c=i.url,f=i.namespace,h=i.parent&&incl_getResource(i.parent,"js"),p=new Resource,d=i.state;if(a||c){switch(c&&("/"===c[0]&&(c=c.substring(1)),p.location=path_getDir(c)),p.state=null==d?"js"===r?3:4:d,p.namespace=f,p.type=r,p.url=c||a,p.parent=h,p.base=h&&h.base||s,r){case"load":case"lazy":var v=document.querySelector("#includejs-"+a.replace(/\W/g,""));if(null==v){console.error('"%s" Data was not embedded into html',a);break}p.exports=v.innerHTML,CustomLoader.exists(p)&&(p.state=3,CustomLoader.load(p,n))}(bin[r]||(bin[r]={}))[a]=p}}},instance:function(t,e){var n;return null==t?(n=new Include,n.state=4,n):(n=new Resource("package"),n.state=4,n.location=path_getDir(path_normalize(t)),n.parent=e,n)},getResource:function(t,e){return this.base&&"/"===t[0]&&(t=this.base+t.substring(1)),incl_getResource(t,e)},getResourceById:function(t,e){var n=bin[e],r=n[t];return null!=r?r:this.base&&"/"===t[0]&&(r=n[path_combine(this.base,t)],null!=r)?r:this.base&&this.location&&(r=n[path_combine(this.base,this.location,t)],null!=r)?r:this.location&&(r=n[path_combine(this.location,t)],null!=r)?r:null},getResources:function(){return bin},plugin:function(t,e){var n=[],r=0,i=0,o=0,l=function(t,n){i++,embedPlugin(n),i===r-1&&e&&(e(),e=null)};for(Routes.each("",t,function(t,e){n.push("/"===e.path[0]?e.path.substring(1):e.path)}),r=n.length;r>o;o++)XHR(n[o],l);return this},client:function(){return cfg.server===!0&&stub_freeze(this),this},server:function(){return cfg.server!==!0&&stub_freeze(this),this},use:function(){return null==this.parent?(console.error("<include.use> Parent resource is undefined"),this):(this._usage=arguments,this)},pauseStack:fn_proxy(ScriptStack.pause,ScriptStack),resumeStack:fn_proxy(ScriptStack.resume,ScriptStack),allDone:function(t){ScriptStack.complete(function(){function e(){--r<1&&t()}var n=include.getPending(),r=n.length;if(0===r)return void t();for(var i=-1,o=r;++i<o;)n[i].on(4,e,null,"push")})},getPending:function(t){var e,n,r,i=[];for(n in bin)if(null==t||t===n)for(r in bin[n])e=bin[n][r],e.state<4&&i.push(e);return i},Lib:IncludeLib})}(IncludeDeferred);var CustomLoader=function(){function t(t){return"string"==typeof t?!1:"function"==typeof t.ready||"function"==typeof t.process}function e(e){var n=path_getExtension(e),r=cfg.loader[n];if(t(r))return r;var i,o=r;if("object"==typeof o)for(var l in o){i=l,o=o[l];break}return cfg.loader[n]=new Resource("js",Routes.resolve(i,o),i,null,null,null,1)}function n(t,e){return function(n){t(e,n)}}function r(t,e,r,i){if(null==r.process)return void i(e,t);var o=n(i,e),l=r.process(t,e,o);"undefined"!=typeof l&&i(e,l)}function i(t,e,n){function i(t,i){r(i,t,e,n)}return"string"==typeof t.exports?void r(t.exports,t,e,n):e.load?e.load(t,i):void XHR(t,i)}var o={process:function(t,e){try{return JSON.parse(t)}catch(n){return console.error(n,t),null}}};return cfg.loader={json:o},{load:function(t,n){var r=e(t.url);return r.process?void i(t,r,n):void r.on(4,function(){i(t,r.exports,n)},null,"push")},exists:function(t){if(!t.url)return!1;var e=path_getExtension(t.url);return cfg.loader.hasOwnProperty(e)},register:function(t,e){if("string"==typeof e){var n=include;null==n.location&&(n={location:path_getDir(path_resolveCurrent())}),e=path_resolveUrl(e,n)}cfg.loader[t]=e}}}(),LazyModule={create:function(t,e){for(var n=t.split("."),r=global,i=n[n.length-1];n.length>1;){var o=n.shift();r=r[o]||(r[o]={})}n=null,Object.defineProperty(r,i,{get:function(){delete r[i];try{var n=__eval(e,global.include);null==n||n instanceof Resource||(r[i]=n)}catch(o){o.xpath=t,Helper.reportError(o)}finally{return e=null,t=null,r[i]}}})}},Resource;!function(t,e,n,r){function i(t){var e=t.type,i=t.parent,l=t.url;if(null==document&&"css"===e)return t.state=4,t;if(r.exists(t)===!1)switch(e){case"js":case"embed":n.load(t,i,"embed"===e);break;case"ajax":case"load":case"lazy":case"mask":XHR(t,o);break;case"css":t.state=4;var u=document.createElement("link");u.href=l,u.rel="stylesheet",u.type="text/css",document.getElementsByTagName("head")[0].appendChild(u)}else"js"!==e&&"embed"!==e||n.add(t,t.parent),r.load(t,o);return t}function o(t,e){switch(e||console.warn("Resource cannt be loaded",t.url),t.type){case"js":case"embed":return t.source=e,t.state=2,void n.touch();case"load":case"ajax":t.exports=e;break;case"lazy":LazyModule.create(t.xpath,e);break;case"css":var r=document.createElement("style");r.type="text/css",r.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(r);break;case"mask":if(e)return void mask.Module.registerModule(e,{path:t.url}).done(function(e){t.exports=e.exports,t.readystatechanged(4)}).fail(function(e){console.error(e),t.readystatechanged(4)})}t.readystatechanged(4)}function l(t,e,n){if(null==t)return null;null==n&&(n=[]);for(var r,i=t.length,o=-1;++o<i;)r=t[o].resource,e===r.type&&n.push(r),null!=r.includes&&l(r.includes,e,n);return n}Resource=function(e,r,o,l,u,s,a){t.call(this),this.childLoaded=fn_proxy(this.childLoaded,this);var c=r&&r.path;null!=c&&(this.url=c=path_resolveUrl(c,u)),this.type=e,this.xpath=l,this.route=r,this.parent=u,this.priority=a,this.namespace=o,this.base=u&&u.base,null==s&&c&&(s=(path_isRelative(c)?"/":"")+c);var f=bin[e]&&bin[e][s];return f?(f.state<4&&"js"===e&&n.moveToParent(f,u),f):null==c?(this.state=3,this.location=path_getDir(path_resolveCurrent()),this):(this.state=0,this.location=path_getDir(c),(bin[e]||(bin[e]={}))[s]=this,cfg.version&&(this.url+=(-1===this.url.indexOf("?")?"?":"&")+"v="+cfg.version),i(this))},Resource.prototype=obj_inherit(Resource,t,{state:null,location:null,includes:null,response:null,url:null,base:null,type:null,xpath:null,route:null,parent:null,priority:null,namespace:null,setBase:function(t){return this.base=t,this},childLoaded:function(t){var e=this,n=e.includes;if(n&&n.length){if(e.state<3)return;for(var r=0;r<n.length;r++)if(4!==n[r].resource.state)return}e.readystatechanged(4)},create:function(t,e,n,r,i){var o;return this.state=this.state>=3?3:2,this.response=null,null==this.includes&&(this.includes=[]),o=new Resource(t,e,n,r,this,i),this.includes.push({resource:o,route:e}),o},include:function(t,n){var r,i=this,o=[];e.each(t,n,function(e,n,l){null!=i.route&&i.route.path===n.path||(r=i.create(t,n,e,l),o.push(r))});for(var l=-1,u=o.length;++l<u;)o[l].on(4,this.childLoaded);return this},pause:function(){this.state=2.5;var t=this;return function(e){1===arguments.length&&(t.exports=e),t.readystatechanged(3)}},getNestedOfType:function(t){return l(this.includes,t)}})}(Include,Routes,ScriptStack,CustomLoader),IncludeLib.Routes=RoutesLib,IncludeLib.Resource=Resource,IncludeLib.ScriptStack=ScriptStack,IncludeLib.registerLoader=CustomLoader.register,exports.include=new Include,exports.includeLib=IncludeLib,function(){cfg.server=!0;var t,e,n;!function(){function r(t){null!=o[t]&&(o[t].close(),o[t]=null)}var i=require("fs"),o={};e=function(t,e){if(cfg.sync)try{var n=i.readFileSync(t,"utf8");e(null,n)}catch(r){console.error("File Read - ",r)}else i.readFile(t,"utf8",e)},n=function(t,e){r(t),o[t]=i.watch(t,e)},t=function(t){return i.existsSync(t)}}();var r,i,o;!function(){function t(t){if(null!=t){t.content=null,t.exports=null;var e=t.parent;return e.create(t.type,t.route,t.namespace,t.xpath).on(4,e.childLoaded)}}function e(t,e){var n=bin[t][e],r=n.includes;delete bin[t][e],null!=r&&r.forEach(function(t){var e=t.resource,n=e.type,r=e.url;"/"!==r[0]&&(r="/"+r),delete bin[n][r]})}r=function(t){var e;return function(){e&&clearTimeout(e),e=setTimeout(function(){var e;"object"==typeof cfg.autoreload&&(e=function(e){e!==!1&&cfg.autoreload.fileChanged(t,"include")}),o(t,e)},150)}},i=function(t){if(null!=t){var n,r,o,l,u=[];for(n in bin)for(r in bin[n])if(l=bin[n][r],o=r.indexOf(t),-1!==o&&o===r.length-t.length){e(n,r);var s=l.parent&&l.parent.url?i(l.parent.url):[l];u.push.apply(u,s)}return 0===u.length&&console.warn("<include:res:remove> Resource is not in cache",t),u}},o=function(e,n){var r=i(e).filter(function(t){return null!=t});if(0===r.length)return void(n&&n(!1));for(var o=r.length,l=o,u=-1;++u<l;)t(r[u]).done(function(){0===--o&&n&&n()})}}(),XMLHttpRequest=function(){},XMLHttpRequest.prototype={constructor:XMLHttpRequest,open:function(t,e){this.url=e},send:function(){-1!==this.url.indexOf("file://")&&(this.url=path_getFile(this.url));var t=this;e(this.url,function(e,i){e&&(console.error(">>",e.code,e.path),i=""),t.readyState=4,t.responseText=i,t.onreadystatechange(),null==e&&cfg.autoreload&&n(t.url,r(t.url))})}},function(){function e(t,n){if(n>=t.includes.length)return t.readystatechanged(4);var r=t.includes[n],i=r.resource,o=r.route.alias,l=i.exports;i.exports=null,i.type="js",i.includes=null,i.state=3,i.parent=null;for(var u in bin.load)if(bin.load[u]===i){delete bin.load[u];break}try{__eval(l,i,!0)}catch(s){console.error("<inject> Evaluation error",i.url,s),i.state=4}i.readystatechanged(3),i.on(4,function(){i.exports&&o&&(global[o]=i.exports),e(t,++n)})}var n,r;obj_inherit(Resource,{isBrowser:!1,isNode:!0,bin_remove:i,bin_tryReload:o,path_getFile:function(){return path_getFile(this.url)},path_getDir:function(){return path_getDir(path_getFile(this.url))},inject:function(){var t=1===arguments.length?arguments[0]:__array_slice.call(arguments);this.state=this.state>=3?3:2;var n=this,r=n.create();return r.url=this.url,r.location=this.location,r.load(t).done(function(t){r.state=3,r.on(4,function(){var t=1,e=ruqq.arr.indexOf(n.includes,function(t){return t.resource===r});-1===e&&(e=n.includes.length-1,t=0),n.includes.splice.apply(n.includes,[e,t].concat(r.includes)),n.readystatechanged(3)}),e(r,0)}),n},embed:function(){return this.js.apply(this,arguments)},instance:function(e,i){if("string"==typeof e){var o=module,l=new Module(e,o);if(l.filename=path_getFile(e),l.paths=Module._nodeModulePaths(path_getDir(l.filename)),null==n){for(var u=process.env.PATH||process.env.path,s=require("path").delimiter,a=u.split(s),c=a.length,f=/([\\\/]npm[\\\/])|([\\\/]npm$)/gi;--c>-1;)if(f.test(a[c])){n=a[c];break}null==n&&"win32"!==process.platform&&["/usr/lib/node_modules","/usr/local/lib/node_modules"].forEach(function(e){null==n&&t(e)&&(n=e)}),n?(-1===n.indexOf("node_modules")&&(n=path_combine(n,"node_modules")),r=path_combine(path_getDir(path_normalize(process.mainModule.filename)),"node_modules")):(n=!1,console.warn("Could not resolve global NPM Directory from system path (%s)",s,u))}r&&l.paths.unshift(r),n&&l.paths.unshift(n),global.module=module=l,global.require=require=l.require.bind(l)}var h=new Resource;return h.state=4,h.location=e,h.parent=i,h}})}(),obj_inherit(Include,{isBrowser:!1,isNode:!0,bin_tryReload:o,bin_remove:i})}();var vm=require("vm"),Module=(global.module||module).constructor}),/*!
 * MaskJS v0.54.27
 * Part of the Atma.js Project
 * http://atmajs.com/
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 *
 * (c) 2012, 2016 Atma.js and other contributors
 */
function(t,e){"use strict";function n(){var t=e(i,l,u);return o&&(module.exports=t),t}var r="undefined"==typeof window||null==window.navigator?"node":"dom",i="dom"===r?window:global,o="undefined"!=typeof exports&&(null==t||t===exports||t===i);o&&(t=exports);var l=t||i,u=i.document;return"function"==typeof define&&define.amd?define(n):n()}(this,function(global,exports,document){"use strict";function mask_config(){var t=arguments,e=t.length;if(0===e)return __cfg;if(1===e){var n=t[0];if(is_Object(n))return obj_extend(__cfg,n),void listeners_emit("config",n);if(is_String(n))return obj_getProperty(__cfg,n)}if(2===e){var r=t[0];obj_hasProperty(__cfg,r)===!1&&log_warn("Unknown configuration property",r);var n={};return obj_setProperty(n,r,t[1]),obj_setProperty(__cfg,r,t[1]),void listeners_emit("config",n)}}var _Array_slice=Array.prototype.slice,_Array_splice=Array.prototype.splice,_Array_indexOf=Array.prototype.indexOf,_Object_create=null,_Object_hasOwnProp=Object.hasOwnProperty,_Object_getOwnProp=Object.getOwnPropertyDescriptor,_Object_defineProperty=Object.defineProperty,coll_each,coll_remove,coll_map,coll_indexOf,coll_find;if(function(){coll_each=function(t,e,n){if(null==n&&(n=t),null==t)return t;for(var r=t.length,i=0;r>i;i++)e.call(n,t[i],i);return n},coll_indexOf=function(t,e){if(null==t)return-1;for(var n=t.length,r=0;n>r;r++)if(t[r]===e)return r;return-1},coll_remove=function(t,e){var n=coll_indexOf(t,e);return-1===n?!1:(t.splice(n,1),!0)},coll_map=function(t,e,n){var r=new Array(t.length);return coll_each(t,function(t,n){r[n]=e.call(this,t,n)},n),r},coll_find=function(t,e,n){for(var r=t.length,i=0;r>i;i++)if(e.call(n||t,t[i],i))return!0;return!1}}(),void 0===Array.prototype.forEach&&(Array.prototype.forEach=function(t,e){coll_each(this,t,e)}),void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(t){return coll_indexOf(this,t)}),null==String.prototype.trim&&(String.prototype.trim=function(){var t,e=-1,n=this.length;if(0===n)return this;for(;++e<n&&(t=this.charCodeAt(e),!(t>32)););for(;0!==--n&&(t=this.charCodeAt(n),!(t>32)););return 0!==e&&n!==length-1?this.substring(e,n+1):this}),null==Function.prototype.bind){var _Array_slice;Function.prototype.bind=function(){if(arguments.length<2&&"undefined"==typeof arguments[0])return this;var t=this,e=_Array_slice.call(arguments),n=e.shift();return function(){return t.apply(n,e.concat(_Array_slice.call(arguments)))}}}var is_Function,is_Array,is_ArrayLike,is_String,is_Object,is_notEmptyString,is_rawObject,is_Date,is_NODE,is_DOM;!function(){is_Function=function(t){return"function"==typeof t},is_Object=function(t){return null!=t&&"object"==typeof t},is_Array=is_ArrayLike=function(t){return null!=t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.slice},is_String=function(t){return"string"==typeof t},is_notEmptyString=function(t){return"string"==typeof t&&""!==t},is_rawObject=function(t){return null==t||"object"!=typeof t?!1:t.constructor===Object},is_Date=function(t){return null==t||"object"!=typeof t?!1:null!=t.getFullYear&&isNaN(t)===!1},is_DOM="undefined"!=typeof window&&null!=window.navigator,is_NODE=!is_DOM}();var obj_getProperty,obj_setProperty,obj_hasProperty,obj_extend,obj_extendDefaults,obj_extendMany,obj_extendProperties,obj_extendPropertiesDefaults,obj_create,obj_toFastProps,obj_defineProperty;!function(){obj_getProperty=function(t,e){if("."===e)return t;for(var n=t,r=e.split("."),i=r.length,o=-1;null!=n&&++o<i;)n=n[r[o]];return n},obj_setProperty=function(t,e,n){for(var r,i=t,o=e.split("."),l=o.length-1,u=-1;++u<l;)r=o[u],null==i[r]&&(i[r]={}),i=i[r];i[o[u]]=n},obj_hasProperty=function(t,e){var n=obj_getProperty(t,e);return void 0!==n},obj_defineProperty=function(t,e,n){for(var r,i=t,o=e.split("."),l=o.length-1,u=-1;++u<l;)r=o[u],null==i[r]&&(i[r]={}),i=i[r];return r=o[l],_Object_defineProperty?(void 0===n.writable&&(n.writable=!0),void 0===n.configurable&&(n.configurable=!0),void 0===n.enumerable&&(n.enumerable=!0),void _Object_defineProperty(i,r,n)):void(i[r]=void 0===n.value?n.value:n.get&&n.get())},obj_extend=function(t,e){if(null==e)return t||{};if(null==t)return obj_create(e);for(var n in e)t[n]=e[n];return t},obj_extendDefaults=function(t,e){if(null==e)return t||{};if(null==t)return obj_create(e);for(var n in e)null!=t[n]?"toString"===n&&t[n]===Object.prototype.toString&&(t[n]=e[n]):t[n]=e[n];return t};var t=function(t){return null==_Object_getOwnProp?t?obj_extend:obj_extendDefaults:function(e,n){if(null==n)return e||{};if(null==e)return obj_create(n);var r,i,o;for(r in n)i=_Object_getOwnProp(n,r),null!=i&&(t!==!0&&(o=_Object_getOwnProp(e,r),null!=o)||(i.hasOwnProperty("value")?e[r]=i.value:_Object_defineProperty(e,r,i)));return e}};obj_extendProperties=t(!0),obj_extendPropertiesDefaults=t(!1),obj_extendMany=function(t){for(var e=arguments.length,n=1;e>n;n++)t=obj_extend(t,arguments[n]);return t},obj_toFastProps=function(t){function e(){}e.prototype=t,new e},_Object_create=obj_create=Object.create||function(t){var e=function(){};return e.prototype=t,new e}}();var arr_remove,arr_each,arr_indexOf,arr_contains,arr_pushMany;!function(){arr_remove=function(t,e){var n=t.indexOf(e);return-1===n?!1:(t.splice(n,1),!0)},arr_each=function(t,e,n){t.forEach(e,n)},arr_indexOf=function(t,e){return t.indexOf(e)},arr_contains=function(t,e){return-1!==t.indexOf(e)},arr_pushMany=function(t,e){if(null!=e&&null!=t&&t!==e)for(var n=t.length,r=e.length,i=-1;++i<r;)t[n+i]=e[i]}}();var fn_proxy,fn_apply,fn_doNothing,fn_createByPattern;!function(){fn_proxy=function(t,e){return function(){for(var n=arguments.length,r=new Array(n),i=0;n>i;i++)r[i]=arguments[i];return fn_apply(t,e,r)}},fn_apply=function(t,e,n){var r=n.length;return 0===r?t.call(e):1===r?t.call(e,n[0]):2===r?t.call(e,n[0],n[1]):3===r?t.call(e,n[0],n[1],n[2]):4===r?t.call(e,n[0],n[1],n[2],n[3]):t.apply(e,n)},fn_doNothing=function(){return!1},fn_createByPattern=function(t,e){var n=t.length;return function(){var r,i=arguments.length,o=-1;t:for(;++o<n;)if(r=t[o],r.pattern.length===i){for(var l=-1;++l<i;){var u=r.pattern[l],s=arguments[l];if(u(s)===!1)continue t}return r.handler.apply(e,arguments)}return console.error("InvalidArgumentException for a function",t,arguments),null}}}();var str_format,str_dedent;!function(){str_format=function(e){for(var n,r=arguments.length,i=0;++i<r;)n=arguments[i],is_Object(n)&&n.toJSON&&(n=n.toJSON()),e=e.replace(t(i-1),String(n));return e},str_dedent=function(t){for(var e=/^[\t ]*\S/gm,n=e.exec(t),r=-1;null!=n;){var i=n[0].length;(-1===r||r>i)&&(r=i),n=e.exec(t)}if(--r<1)return t;var o=new RegExp("^[\\t ]{1,"+r+"}","gm");return t.replace(o,"").replace(/^[\t ]*\r?\n/,"").replace(/\r?\n[\t ]*$/,"")};var t;!function(){t=function(t){return e[t]||(e[t]=new RegExp("\\{"+t+"\\}","g"))};var e={}}()}();var class_create,class_createEx;!function(){function t(t){return function(){var r=_Array_slice.call(arguments),i=r.pop();null==i&&(i={});for(var o,l,u=i.hasOwnProperty("constructor")?i.constructor:function(){},s=r.length;--s>-1;)l=r[s],"function"==typeof l&&(o=n(l,o),l=l.prototype),t(i,l);return e(n(o,u),i)}}function e(t,e){return e.constructor=t,t.prototype=e,t}function n(t,e){return null==t?e:null==e?t:function(){var n=_Array_slice.call(arguments),r=t.apply(this,n);return void 0!==r?r:e.apply(this,n)}}class_create=t(obj_extendDefaults),class_createEx=t(obj_extendPropertiesDefaults)}();var error_createClass,error_formatSource,error_formatCursor,error_cursor;!function(){function t(t,n){var r=t.hasOwnProperty("constructor")?t.constructor:null;return function(){obj_defineProperty(this,"stack",{value:e(n||3)}),obj_defineProperty(this,"message",{value:str_format.apply(this,arguments)}),null!=r&&r.apply(this,arguments)}}function e(t){var e=(new Error).stack;return null==e?null:e.split("\n").slice(t).join("\n")}error_createClass=function(e,n,r){var i=t(n,r);return i.prototype=new Error,n.constructor=Error,n.name=e,obj_extend(i.prototype,n),i},error_formatSource=function(t,e,n){var r=error_cursor(t,e),i=r[0],o=r[1],l=r[2],u="";return null!=n&&(u+=str_format(" at {0}({1}:{2})\n",n,o,l)),u+error_formatCursor(i,o,l)},error_cursor=function(t,e){var n=t.substring(0,e).split("\n"),r=n.length,i=e+1-n.slice(0,r-1).join("\n").length;return r>1&&(i-=1),[t.split("\n"),r,i]},function(){function t(t,e){for(var n=String(t);n.length<e;)n+=" ";return n}function e(t,e){for(var n="";--e>-1;)n+=t;return n}error_formatCursor=function(n,r,i){var o=3,l=2,u=r-o,s=u+o+l,a="";0>u&&(u=0),s>n.length&&(s=n.length);for(var c,f=String(s).length;s>u;u++)a&&(a+="\n"),c=t(u+1,f),a+=c+"|"+n[u],u+1===r&&(a+="\n"+e(" ",f+1),a+=n[u].substring(0,i-1).replace(/[^\s]/g," "),a+="^");return a}}()}();var class_Dfr;!function(){function t(t,e,n,r){return null==r?t:(null!=e?fn_apply(r,t,e):n.push(r),t)}function e(t){t._done=null,t._fail=null,t._always=null}function n(t,e,n){if(null!=t){for(var r,i=t.length,o=-1;++o<i;)r=t[o],r&&fn_apply(r,e,n);t.length=0}}function r(t){return null==t||"object"!=typeof t?!1:t instanceof class_Dfr?!0:"function"==typeof t.done&&"function"==typeof t.fail}class_Dfr=function(){},class_Dfr.prototype={_isAsync:!0,_done:null,_fail:null,_always:null,_resolved:null,_rejected:null,defer:function(){return this._rejected=null,this._resolved=null,this},isResolved:function(){return null!=this._resolved},isRejected:function(){return null!=this._rejected},isBusy:function(){return null==this._resolved&&null==this._rejected},resolve:function(){var t=this._done,r=this._always;return this._resolved=arguments,e(this),n(t,this,arguments),n(r,this,[this]),this},reject:function(){var t=this._fail,r=this._always;return this._rejected=arguments,e(this),n(t,this,arguments),n(r,this,[this]),this},then:function(t,e){return this.pipe(t,e)},done:function(e){return null!=this._rejected?this:t(this,this._resolved,this._done||(this._done=[]),e)},fail:function(e){return null!=this._resolved?this:t(this,this._rejected,this._fail||(this._fail=[]),e)},always:function(e){return t(this,this._rejected||this._resolved,this._always||(this._always=[]),e)},pipe:function(t){function e(t,e,n){return function(){if(null!=n){var i=n.apply(this,arguments);if(null!=i)return r(i)===!0?void i.pipe(t):void t[e](i)}t[e].apply(t,arguments)}}var n;if("function"==typeof t){n=new class_Dfr;var i=t,o=arguments.length>1?arguments[1]:null;return this.done(e(n,"resolve",i)).fail(e(n,"reject",o)),n}n=t;for(var l,u=arguments.length,s=1===u,a=1===u,c=0;++c<u;)switch(l=arguments[c]){case"done":s=!0;break;case"fail":a=!0;break;default:console.error("Unsupported pipe channel",arguments[c])}return s&&this.done(e(n,"resolve")),a&&this.fail(e(n,"reject")),this},pipeCallback:function(){var t=this;return function(e){if(null!=e)return void t.reject(e);var n=_Array_slice.call(arguments,1);fn_apply(t.resolve,t,n)}},resolveDelegate:function(){return fn_proxy(this.resolve,this)},rejectDelegate:function(){return fn_proxy(this.reject,this)}},class_Dfr.run=function(t,e){var n=new class_Dfr;return null==e&&(e=n),t.call(e,fn_proxy(n.resolve,e),fn_proxy(n.reject,n),n),n}}();var class_EventEmitter;!function(){function t(){var t,e,n=_Array_slice.call(arguments),r=n.shift(),i=this._listeners[r],o=0;if(null==i)return this;for(e=i.length;e>o;o++)t=i[o],fn_apply(t,this,n),t._once===!0&&(i.splice(o,1),o--,e--);return this}class_EventEmitter=function(){this._listeners={}},class_EventEmitter.prototype={on:function(t,e){return null!=e&&(this._listeners[t]||(this._listeners[t]=[])).push(e),this},once:function(t,e){return null!=e&&(e._once=!0,(this._listeners[t]||(this._listeners[t]=[])).push(e)),this},pipe:function(t){var e,n=this;return function(){e=_Array_slice.call(arguments),e.unshift(t),fn_apply(n.trigger,n,e)}},emit:t,trigger:t,off:function(t,e){var n=this._listeners[t];if(null==n)return this;if(1===arguments.length)return n.length=0,this;for(var r=n.length,i=-1;++i<r;)n[i]===e&&(n.splice(i,1),i--,r--);return this}}}();var class_Uri;!function(){function t(t){return t&&"object"==typeof t&&"function"==typeof t.combine}function e(){for(var t,e="",n=0,r=arguments.length;r>n;n++)t=arguments[n],t&&(e?("/"!==e[e.length-1]&&(e+="/"),e+="/"===t[0]?t.substring(1):t):e=t);return e}function n(t){return"/"===t[t.length-1]?t.substring(0,t.length-1):t}function r(t){var e,n=new class_Uri;for(e in t)"string"==typeof t[e]&&(n[e]=t[e]);return n}function i(t){return t.replace(/\\/g,"/").replace(/^\.\//,"").replace(/^(\w+):\/([^\/])/,"/$1:/$2")}function o(t){return h.test(t)&&"/"===t[0]?t.substring(1):t}function l(t){var e=c.exec(t.value);null==e&&"/"===t.value[0]&&(t.protocol="file"),null!=e&&(t.protocol=e[1],t.value=t.value.substring(e[0].length))}function u(t){if(null!=t.protocol){if("file"===t.protocol){var e=h.exec(t.value);return void(e&&(t.host=e[1],t.value=t.value.substring(t.host.length)))}var n=t.value.indexOf("/",2);t.host=~n?t.value.substring(0,n):t.value,t.value=t.value.replace(t.host,"")}}function s(t){var e=t.value.indexOf("?");-1!==e&&(t.search=t.value.substring(e),t.value=t.value.substring(0,e))}function a(t){var e=p.exec(t.value),r=null==e?null:e[1];null!=r&&(t.file=r,t.value=t.value.substring(0,t.value.length-r.length),t.value=n(t.value),e=f.exec(r),t.extension=null==e?null:e[1])}class_Uri=class_create({protocol:null,value:null,path:null,file:null,extension:null,constructor:function(e){return null==e?this:t(e)?e.combine(""):(e=i(e),this.value=e,l(this),u(this),s(this),a(this),this.path=n(this.value),/^[\w]+:\//.test(this.path)&&(this.path="/"+this.path),this)},cdUp:function(){var t=this.path;return null==t||""===t||"/"===t?this:/^\/?[a-zA-Z]+:\/?$/.test(t)?this:(this.path=t.replace(/\/?[^\/]+\/?$/i,""),this)},combine:function(i){if(t(i)&&(i=i.toString()),!i)return r(this);if(h.test(i))return new class_Uri(i);var o=r(this);if(o.value=i,s(o),a(o),!o.value)return o;if(i=o.value.replace(/^\.\//i,""),"/"===i[0])return o.path=i,o;for(;/^(\.\.\/?)/gi.test(i);)o.cdUp(),i=i.substring(3);return o.path=n(e(o.path,i)),o},toString:function(){var t=this.protocol?this.protocol+"://":"",n=e(this.host,this.path,this.file)+(this.search||""),r=t+n;return this.file||this.search||(r+="/"),r},toPathAndQuery:function(){return e(this.path,this.file)+(this.search||"")},toRelativeString:function(t){if("string"==typeof t&&(t=new class_Uri(t)),0===this.path.indexOf(t.path)){var n=this.path?this.path.replace(t.path,""):"";return"/"===n[0]&&(n=n.substring(1)),e(n,this.file)+(this.search||"")}for(var r=this.path.split("/"),i=t.path.split("/"),o="",l=0,u=Math.min(r.length,i.length);u>l&&r[l]===i[l];l++);if(l>0&&(o=r.splice(0,l).join("/")),o){for(var s,a="",c=t.path;c;){if(0===this.path.indexOf(c)){s=this.path.replace(c,"");break}c=c.replace(/\/?[^\/]+\/?$/i,""),a+="../"}return e(a,s,this.file)}return this.toString()},toLocalFile:function(){var t=e(this.host,this.path,this.file);return o(t)},toLocalDir:function(){var t=e(this.host,this.path,"/");return o(t)},toDir:function(){var t=this.protocol?this.protocol+"://":"";return t+e(this.host,this.path,"/")},isRelative:function(){return!(this.protocol||this.host)},getName:function(){return this.file.replace("."+this.extension,"")}});var c=/^([a-zA-Z]+):\/\//,f=/\.([\w\d]+)$/i,h=/(^\/?\w{1}:)(\/|$)/,p=/([^\/]+(\.[\w\d]+)?)$/i;class_Uri.combinePathes=e,class_Uri.combine=e}();var mode_SERVER="server",mode_SERVER_ALL="server:all",mode_SERVER_CHILDREN="server:children",mode_CLIENT="client",mode_BOTH="both",__rgxEscapedChar={"'":/\\'/g,'"':/\\"/g,"{":/\\\{/g,">":/\\>/g,";":/\\>/g},__cfg={allowCache:!0,preprocessor:{style:null,script:null},base:null,modules:"default",getFile:null,getScript:null,buildStyle:null,buildScript:null},attr_extend,attr_first;!function(){attr_extend=function(t,e){if(null==t)return null==e?{}:obj_create(e);if(null==e)return t;var n;for(n in e)"class"!==n||"string"!=typeof t[n]?t[n]=e[n]:t[n]+=" "+e[n];return t},attr_first=function(t){for(var e in t)return e;return null}}();var arr_pushMany;!function(){arr_pushMany=function(t,e){if(null!=e&&null!=t)for(var n=t.length,r=e.length,i=-1;++i<r;)t[n+i]=e[i]}}();var obj_getPropertyEx,obj_toDictionary;!function(){function t(t,e,n,r){for(var i=n,o=t;r>i&&null!=o;)o=o[e[i]],i++;return o}function e(e,n,r,i){for(;null!=e;){var o=e.scope;if(null!=o){var l=t(o,n,r,i);if(null!=l)return l}e=e.parent}return null}obj_getPropertyEx=function(n,r,i,o){if("."===n)return r;var l=n.split("."),u=l.length,s=l[0];if("$c"===s&&(reporter_deprecated("accessor.compo","Use `$` instead of `$c`"),s="$"),"$u"===s&&(reporter_deprecated("accessor.util","Use `_` instead of `$u`"),s="_"),"$"===s)return t(o,l,1,u);if("$a"===s)return t(o&&o.attr,l,1,u);if("_"===s)return t(customUtil_$utils,l,1,u);if("$ctx"===s)return t(i,l,1,u);if("$scope"===s)return e(o,l,1,u);var a=t(r,l,0,u);return null!=a?a:e(o,l,0,u)},obj_toDictionary=function(t){var e,n=[],r=0;for(e in t)n[r++]={key:e,value:t[e]};return n}}();var listeners_on,listeners_off,listeners_emit;!function(){listeners_on=function(e,n){(t[e]||(t[e]=[])).push(n)},listeners_off=function(e,n){return null==n?void(t[e]=[]):void arr_remove(t[e],n)},listeners_emit=function(e){var n=t[e];if(null==n)return!1;var r=n.length,i=-1;if(0===r)return!1;for(var o=0,l=arguments.length,u=new Array(l-1);++o<l;)u[o-1]=arguments[o];for(;++i<r;)n[i].apply(null,u);return!0};var t={compoCreated:null,error:null}}();var throw_,parser_error,parser_warn,error_,error_withSource,error_withNode,warn_,warn_withSource,warn_withNode,log,log_warn,log_error,reporter_createErrorNode,reporter_getNodeStack,reporter_deprecated;!function(){function t(t,e){return function(e,n,l,u,s,a){var c=new t(e),f=i(u);f&&(c.message+=f);var h=o(s);h&&(c.message+=h);var p=error_formatSource(n,l,a);p&&(c.message+="\n"+p),r(c,"error")}}function e(t,e){return function(n,i,o,l){var u=new t(n);u.message="\n"+error_formatSource(i,o,l),r(u,e)}}function n(t,e){return function(n,i){var o=new t(n);o.message=o.message+"\n"+reporter_getNodeStack(i),r(o,e)}}function r(t,e){if(!listeners_emit(e,t)){var n="error"===e?log_error:log_warn;n(t.message),n("\n"+t.stack)}}function i(t){return null==t?"":("number"==typeof t&&(t=String.fromCharCode(t))," Invalid token: `"+t+"`")}function o(t){var e={2:"tag",3:"tag",5:"attribute key",6:"attribute value",8:"literal","var":"VarStatement",expr:"Expression"};return null==t||null==e[t]?"":" in `"+e[t]+"`"}!function(){if("undefined"==typeof console)return void(log=log_warn=log_error=function(){});var t=Function.prototype.bind;log=t.call(console.warn,console),log_warn=t.call(console.warn,console,"MaskJS [Warn] :"),log_error=t.call(console.error,console,"MaskJS [Error] :")}();var l=4,u=error_createClass("MaskError",{},l),s=error_createClass("MaskWarn",{},l);throw_=function(t){log_error(t),listeners_emit("error",t)},error_withSource=e(u,"error"),error_withNode=n(u,"error"),warn_withSource=e(s,"warn"),warn_withNode=n(s,"warn"),parser_error=t(u,"error"),parser_warn=t(s,"warn"),reporter_createErrorNode=function(t){return parser_parse('div style="background:red;color:white;">tt>"""'+t+'"""')},reporter_getNodeStack=function(t){for(var e=[t],n=t.parent;null!=n;)e.unshift(n),n=n.parent;var r="",i=e[0];return i!==t&&is_String(i.source)&&t.sourceIndex>-1&&(r+=error_formatSource(i.source,t.sourceIndex,i.filename)+"\n"),r+="  at "+e.map(function(t){return t.tagName||t.compoName}).join(" > ")},function(){reporter_deprecated=function(e,n){void 0===t[e]&&(t[e]=1,log_warn("[deprecated]",n))};var t={}}()}();var path_getDir,path_getFile,path_getExtension,path_resolveCurrent,path_normalize,path_resolveUrl,path_combine,path_isRelative,path_toRelative,path_appendQuery,path_toLocalFile;!function(){function t(t){return t=path_normalize(t),"file:"===t.substring(0,5)?t:"file://"+t}function e(t){for(var e=t;r.test(e);)e=e.replace(r,"");return e}path_getDir=function(t){return t.substring(0,t.lastIndexOf("/")+1)},path_getFile=function(t){return t=t.replace("file://","").replace(/\\/g,"/").replace(/\?[^\n]+$/,""),/^\/\w+:\/[^\/]/i.test(t)?t.substring(1):t},path_getExtension=function(t){var e=t.indexOf("?");-1!==e&&(t=t.substring(0,e));var n=i.exec(t);return null==n?"":n[1]},path_appendQuery=function(t,e,n){var r=-1===t.indexOf("?")?"?":"&";return t+r+e+"="+n},function(){var e;path_resolveCurrent=function(){return null!=e?e:e=t(process.cwd())}}(),path_normalize=function(t){var n=t.replace(/\\/g,"/").replace(/([^:\/])\/{2,}/g,"$1/").replace(/^\.\//,"").replace(/\/\.\//g,"/");return e(n)},path_resolveUrl=function(t,e){var r=path_normalize(t);return path_isRelative(r)?path_normalize(path_combine(e||path_resolveCurrent(),r)):n.test(r)?r:47===r.charCodeAt(0)&&__cfg.base?path_combine(__cfg.base,r):r},path_isRelative=function(t){var e=t.charCodeAt(0);switch(e){case 47:return!1;case 102:case 104:return n.test(t)===!1}return!0},path_toRelative=function(t,e,n){var r=path_resolveUrl(path_normalize(t),n),i=path_resolveUrl(path_normalize(e),n);return""!==path_getExtension(i)&&(i=path_getDir(i)),i=path_combine(i,"/"),0===r.toUpperCase().indexOf(i.toUpperCase())?r.substring(i.length):t},path_combine=function(){for(var t,n="",r=arguments.length,i=-1;++i<r;)t=arguments[i],t&&(t=path_normalize(t),""!==n?("/"!==n[n.length-1]&&(n+="/"),"/"===t[0]&&(t=t.substring(1)),n+=t):n=t);return e(n)},function(){function t(){return e||(e=path_normalize(process.cwd()))}path_toLocalFile=function(e){return e=path_normalize(e),path_isRelative(e)&&(e="/"+e),47===e.charCodeAt(0)?path_combine(t(),e):(0===e.indexOf("file://")&&(e=e.replace("file://","")),/^\/\w+:\//.test(e)&&(e=e.substring(1)),e)};var e}();var n=/^(file|https?):/i,r=/[^\/\.]+\/\.\.\//,i=/\.(\w+)$/}();var file_get,file_getScript,file_getStyle,file_getJson;!function(){function t(t,e,r){e=path_resolveUrl(e,Module.resolveLocation(r));var i=n[e];return void 0!==i?i:(i=new class_Dfr,t(e,i.pipeCallback()),i)}file_get=function(e,n){return t(o,e,n)},file_getScript=function(e,n){return t(r,e,n)},file_getStyle=function(e,n){return t(i,e,n)},file_getJson=function(n,r){return t(e,n,r)};var e,n={};!function(){e=function(t,e){o(t,function(t,n){if(t)return void e(t);var r;try{r=JSON.parse(n)}catch(t){return void e("JSON error: "+String(t))}e(null,r)})}}();var r;!function(){r=function(t,e){var n=path_toLocalFile(t);try{var r=require(n);e(null,r)}catch(i){e(i)}}}();var i;!function(){i=function(t,e){e()}}();var o;!function(){o=function(e,n){var r=path_toLocalFile(e);t.readFile(r,"utf8",function(t,e){return null!=t?void n({message:t.toString(),status:t.code}):void n(null,e)})};var t=require("fs")}()}();var css_ensureScopedStyles;!function(){function t(t,e){return t.replace(i,function(t,n,r){if(-1!==r.indexOf(":host"))return t;for(var i=r.split(","),o=i.length,l=0;o>l;l++)i[l]=e+" "+i[l];return r=i.join(","),n+r+"{"})}function e(t,e){return t.replace(o,function(t,n,r,i){return n+e+(i||"")+"{"})}function n(t,e){var n="scoped__css__"+t.id;return e.id?(e.className+=" "+n,"."+n):(e.setAttribute("id",n),"#"+n)}css_ensureScopedStyles=function(i,o,l){var u=o.attr;if(null==u.scoped&&null==u[r])return i;u.scoped=null,u[r]=1;var s=n(o,l),a=i;return a=t(a,s),a=e(a,s)};var r="x-scoped",i=/^([\s]*)([^\{\}]+)\{/gm,o=/^([\s]*):host\s*(\(([^)]+)\))?\s*\{/gm}();var path_toLocalFile;!function(){function t(){return path_normalize(process.cwd())}path_toLocalFile=function(e){return e=path_normalize(e),path_isRelative(e)&&(e="/"+e),47===e.charCodeAt(0)?path_combine(t(),e):(0===e.indexOf("file://")&&(e=e.replace("file://","")),/^\/\w+:\//.test(e)&&(e=e.substring(1)),e)}}();var compo_wrapOnTagName;!function(){compo_wrapOnTagName=function(t,e){null!=t.tagName&&t.tagName!==e.tagName&&t.tagName!==t.compoName&&(t.nodes={tagName:t.tagName,attr:t.attr,nodes:t.nodes,type:1})}}();var json_dimissCircular;!function(){function t(n){if(is_Array(n)){for(var r=[],i=n.length,o=-1;++o<i;)r[o]=t(n[o]);return r}if(is_Object(n)){if(-1!==e.indexOf(n))return"[object Circular]";e.push(n);var l={};for(var u in n)l[u]=t(n[u]);return l}return n}json_dimissCircular=function(n){return is_Object(n)&&(e=[],n=t(n),e=null),n};var e}();var node_getType;!function(){node_getType=function(t){var e=t.type;return null==e&&(is_Array(t)?e=10:null!=t.tagName?e=1:null!=t.content&&(e=2)),1===e&&null!=custom_Tags[t.tagName]&&(e=4),e}}();var ctx_stringify;!function(){ctx_stringify=function(t){var e,n=!1,r={};for(var i in t)if(95!==i.charCodeAt(0)){e=t[i];var o=typeof e;null!=e&&"object"!==o&&"function"!==o&&"async"!==i&&(n=!0,r[i]=e)}return n===!1?null:r}}();var meta_get,meta_getVal,meta_getRenderMode,meta_getModelMode,meta_setVal,meta_resolveRenderMode,meta_resolveModelMode;!function(){function t(t,e,n){if(null==t)return null;var i="function"==typeof t?t.prototype:t,o=i.meta;if(null!=o&&o[e])return o[e];if(n){var l=i.attr;if(l&&l[n]){var u=l[n];return meta_setVal(t,e,u),u}}var s=r[e];return void 0===s?log_error("Uknown meta property: ",e):meta_setVal(t,e,s),s}function e(t){if(null!=t){var e=t.meta||t.$meta;return null!=e?e:void(t.mode&&(this.mode=t.mode))}}var n=","+mode_SERVER+","+mode_SERVER_CHILDREN+","+mode_SERVER_ALL+","+mode_CLIENT+","+mode_BOTH;meta_getRenderMode=function(t){var e=meta_resolveRenderMode(t);return new i(e)},meta_getModelMode=function(t){var e=meta_getRenderMode(t);return e.isServer()?e:(e=meta_resolveModelMode(t),new i(e))},meta_get=function(t){if(null==t)return new e;var n="function"==typeof t?t.prototype:t;return new e(n)},meta_resolveRenderMode=function(e){var r=t(e,"mode","x-render-mode");return null==r&&(r=t(e.parent,"mode","x-render-mode"),null==r&&(r=mode_BOTH,meta_setVal(r,"mode",r)),r!==mode_SERVER_ALL&&r!==mode_SERVER_CHILDREN||meta_setVal(e,"mode",mode_SERVER_ALL)),-1===n.indexOf(r)?(log_error("Unknown render mode: "+r),mode_BOTH):r},meta_resolveModelMode=function(e){var r=t(e,"modelMode","x-model-mode")||(log_warn("modeModel is deprecated"),t(e,"modeModel"));return null==r&&(r=t(e.parent,"mode","x-model-mode"),null==r&&(r=mode_BOTH,meta_setVal(r,"modelMode",r)),r!==mode_SERVER_ALL&&r!==mode_SERVER_CHILDREN||meta_setVal(e,"modelMode",mode_SERVER_ALL)),-1===n.indexOf(r)?(log_error("Unknown model mode: "+r),mode_BOTH):r},meta_getVal=function(e,n){return t(e,n)},meta_setVal=function(t,n,r){var i="function"==typeof t?t.prototype:t;i.meta=null==i.meta?new e:obj_create(i.meta),i.meta[n]=r};var r=e.prototype={mode:mode_BOTH,modelMode:mode_BOTH,attributes:null,cache:!1},i=class_create({mode:null,constructor:function(t){this.mode=t},isServer:function(){return this.mode===mode_SERVER_ALL||this.mode===mode_SERVER},isClient:function(){return this.mode===mode_CLIENT}})}();var Meta;!function(){function t(t){return null==t?"null":"object"!=typeof t?t:(is_Array(t)===!1&&(t=e(t)),JSON.stringify(t))}function e(t){var e=Object.create(t);for(var n in e)e[n]=e[n];return e}Meta={stringify:function(t,e){switch(e.mode){case mode_SERVER:case mode_SERVER_ALL:return""}var n=e.type,r=e.single,l=n;return t.ID&&(l+="#"+t.ID),l+=i+" ",l+=o.resolve(e).serialize(t),r&&(l+="/"),new HtmlDom.Comment(l).toString()},close:function(t,e){if(e.single===!0)return"";switch(e.mode){case mode_SERVER:case mode_SERVER_ALL:return""}var n="/"+e.type+(t.ID?"#"+t.ID:"");return new HtmlDom.Comment(n).toString()},parse:function(t){return n(t)}};var n,r=30,i=String.fromCharCode(r);!function(){function t(){var t=e,n=l.indexOf(u,t);return-1===n&&(n=r),e=n+s,l.substring(t,n)}var e,r,l;n=function(n){e=0,l=n,r=n.length;var i={},u=n.charCodeAt(e),s=!1,a=!1;47===u&&(s=!0,u=n.charCodeAt(++e)),47===n.charCodeAt(r-1)&&(a=!0,r--);var i={ID:null,end:s,single:a,type:n[e]};u=n.charCodeAt(++e),35===u&&(++e,i.ID=parseInt(t(),10));for(var c=o.resolve(i),f=c.deserializeSingleProp,h=c.defaultProperties,p=0;r>e;){var d=t();f(i,d,p++)}return null!=h&&h(i,p),i};var u=i+" ",s=u.length}();var o;!function(){function e(t,e){if(null==t||""===t)return e["default"]?e["default"]():null;switch(e.type){case"string":case"mask":return t;case"number":return+t;default:return JSON.parse(t)}}function n(e,n){if(null==e)return"";var r=t(e);return"object"===n.type&&"{}"===r?"":"array"===n.type&&"[]"===r?"":r}o={resolve:function(t){switch(t.type){case"t":return l;case"a":return u;default:return o}},serialize:function(e){var n="";for(var r in e)if("ID"!==r){var o=e[r];null!=o&&(n+=r+":"+t(e[r])+i+" ")}return n},deserializeSingleProp:function(t,e,n){var r=e.indexOf(":"),i=e.substring(0,r),o=e.substring(r+1);"attr"!==i&&"scope"!==i||(o=JSON.parse(o)),t[i]=o},serializeProps_:function(t,e){var r=new Array(t.count),o=t.keys;for(var l in e)if("ID"!==l){var u=o[l];if(void 0!==u){var s=e[l];r[u.index]=n(s,u)}else log_error("Unsupported Meta key:",l)}for(var a=r.length,c=-1,f=0;++c<a;){var s=r[c];null==s&&(s=r[c]=""),""!==s&&(f=c)}return f<r.length-1&&(r=r.slice(0,f+1)),r.join(i+" ")},deserializeSingleProp_:function(t,n,r,i){var o=n.keysArr;if(i>=o.length)return void log_error("Keys count missmatch");var l=o[i],u=e(r,l);t[l.name]=u},prepairProps_:function(t){for(var e={count:t.length,keys:{},keysArr:t},n=t.length,r=-1;++r<n;){var i=t[r];i.index=r,e.keys[i.name]=i}return e}}}();var l;!function(){var t=[{name:"compoName",type:"string"},{name:"attr",type:"object","default":function(){return{}}},{name:"expression",type:"string"},{name:"nodes",type:"mask"},{name:"scope",type:"object"},{name:"modelID",type:"string"}],e=o.prepairProps_(t);l={serialize:function(t,n){return o.serializeProps_(e,t)},deserialize:function(t){return o.deserializeProps_(e,t)},deserializeSingleProp:function(t,n,r){return o.deserializeSingleProp_(t,e,n,r)},defaultProperties:function(t,n){for(var r=e.keysArr,i=r.length,o=n-1;++o<i;){var l=r[o];l["default"]&&(t[l.name]=l["default"]())}}}}();var u;!function(){var t=[{name:"name",type:"string"},{name:"value",type:"string"}],e=o.prepairProps_(t);u={serialize:function(t,n){return o.serializeProps_(e,t)},deserialize:function(t){return o.deserializeProps_(e,t)},deserializeSingleProp:function(t,n,r){return o.deserializeSingleProp_(t,e,n,r)}}}()}();var custom_Utils,custom_Statements,custom_Attributes,custom_Tags,custom_Tags_global,custom_Tags_defs,custom_Parsers,custom_Parsers_Transform,custom_Optimizers,customUtil_get,customUtil_$utils,customUtil_register,customTag_get,customTag_getAll,customTag_register,customTag_registerScoped,customTag_registerFromTemplate,customTag_registerResolver,customTag_Resolver,customTag_Compo_getHandler,customTag_define,customTag_Base,custom_optimize,customStatement_register,customStatement_get,customAttr_register,customAttr_get;!function(){!function(){var t={a:null,abbr:null,article:null,aside:null,audio:null,b:null,big:null,blockquote:null,br:null,button:null,canvas:null,datalist:null,details:null,div:null,em:null,fieldset:null,footer:null,form:null,h1:null,h2:null,h3:null,h4:null,h5:null,h6:null,header:null,i:null,img:null,input:null,label:null,legend:null,li:null,menu:null,nav:null,ol:null,option:null,p:null,pre:null,section:null,select:null,small:null,span:null,strong:null,svg:null,table:null,tbody:null,td:null,textarea:null,tfoot:null,th:null,thead:null,tr:null,tt:null,ul:null,video:null},e={"class":null,id:null,style:null,name:null,type:null,value:null,required:null,disabled:null};custom_Utils={expression:function(t,e,n,r,i){return expression_eval(t,e,n,i)}},custom_Optimizers={},custom_Statements={},custom_Attributes=obj_extend({},e),custom_Tags=obj_extend({},t),custom_Tags_global=obj_extend({},t),custom_Parsers=obj_extend({},t),custom_Parsers_Transform=obj_extend({},t),custom_Tags_defs={}}(),function(){function t(t){return is_Object(t)||is_Function(t)}function e(t){function e(t,e){this.ID=null,this.tagName=t.tagName,this.attr=obj_create(t.attr),this.expression=t.expression,this.nodes=t.nodes,this.nextSibling=t.nextSibling,this.parent=e,this.components=null}return e.prototype=t,e}function n(t){return is_Object(t)&&(t.__Ctor=e(t)),t}customTag_get=function(t,e){if(0===arguments.length)return reporter_deprecated("getHandler.all","Use `mask.getHandlers` to get all components (also scoped)"),customTag_getAll();var n=custom_Tags[t];if(null==n)return null;if(n!==r)return n;for(var i=is_Function(e)?e.prototype:e;null!=i;){if(is_Function(i.getHandler)&&(n=i.getHandler(t),null!=n))return n;i=i.parent}return custom_Tags_global[t];
},customTag_getAll=function(t){if(null==t)return custom_Tags;for(var e,n={},i=t;null!=i;)e=null,e=is_Function(i.getHandlers)?i.getHandlers():i.__handlers__,null!=e&&(n=obj_extendDefaults(n,e)),i=i.parent;for(var o in custom_Tags)e=custom_Tags[o],null!=e&&e!==r&&null==n[o]&&(n[o]=e);return n},customTag_register=function(t,e){if("string"!=typeof t&&3===arguments.length)return void customTag_registerScoped.apply(this,arguments);var i=(custom_Tags[t],n(e)),o=custom_Tags[t]===r?custom_Tags_global:custom_Tags;o[t]=i,obj_toFastProps(custom_Tags)},customTag_registerFromTemplate=function(t,e,n){var r=new class_Dfr;return new Module.ModuleMask(n||"").preprocess_(t,function(t,n){if(t)return r.reject(t);var i=n.__handlers__;for(var o in i)null==n[o]?customTag_registerScoped(e,o,i[o]):customTag_register(o,i[o]);r.resolve(n.__handlers__)}),r},customTag_registerScoped=function(t,e,r){if(null==t)return void customTag_register(e,r);customTag_registerResolver(e);var i=is_Function(t)?t.prototype:t,o=i.__handlers__;null==o&&(o=i.__handlers__={}),o[e]=n(r),null==i.getHandler&&(i.getHandler=customTag_Compo_getHandler)},customTag_define=fn_createByPattern([{pattern:[is_String],handler:function(t){return customTag_registerFromTemplate(t)}},{pattern:[is_String,is_String],handler:function(t,e){var n=customTag_get(t);return customTag_registerFromTemplate(e,n)}},{pattern:[t,is_String],handler:function(t,e){return customTag_registerFromTemplate(e,t)}},{pattern:[is_String,t],handler:function(t,e){return customTag_register(t,e)}},{pattern:[t,is_String,t],handler:function(t,e,n){customTag_registerScoped(t,e,n)}},{pattern:[is_String,is_String,t],handler:function(t,e,n){var r=customTag_get(t);return customTag_registerScoped(r,e,n)}}]),customTag_registerResolver=function(t){var e=custom_Tags[t];e!==r&&(null!=e&&(custom_Tags_global[t]=e),custom_Tags[t]=r,obj_toFastProps(custom_Tags))},customTag_Compo_getHandler=function(t){var e=this.__handlers__;return null==e?null:e[t]},customTag_Base={async:!1,attr:null,await:null,compoName:null,components:null,expression:null,ID:null,meta:null,model:null,nodes:null,parent:null,render:null,renderEnd:null,renderStart:null,tagName:null,type:null};var r;!function(){customTag_Resolver=r=function(t,e,n,r,i){var o=customTag_get(t.tagName,i);return null!=o?is_Function(o)===!1?obj_create(o):new o(t,e,n,r,i):(error_withNode("Component not found: "+t.tagName,t),null)}}()}(),customAttr_register=function(t,e,n){is_Function(e)&&(n=e),custom_Attributes[t]=n},customAttr_get=function(t){return null!=t?custom_Attributes[t]:custom_Attributes},function(){function t(t){if("parsed"===t.arguments)return n(t.process);var r=fn_proxy(t.process||e,t);return r.util=t,r}function e(t,e,n,r,i,o,l){return"node"===l?(this.nodeRenderStart(t,e,n,r,i),this.node(t,e,n,r,i)):(this.attrRenderStart(t,e,n,r,i,o,l),this.attr(t,e,n,r,i,o,l))}function n(t){return function(e,n,r,i,o){var l=expression_evalStatements(e,n,r,o);return t.apply(null,l)}}customUtil_$utils={},customUtil_register=function(e,n){return is_Function(n)?void(custom_Utils[e]=n):(custom_Utils[e]=t(n),void("parsed"===n.arguments&&(customUtil_$utils[e]=n.process)))},customUtil_get=function(t){return null!=t?custom_Utils[t]:custom_Utils}}(),customStatement_register=function(t,e){custom_Statements[t]=is_Function(e)?{render:e}:e},customStatement_get=function(t){return null!=t?custom_Statements[t]:custom_Statements},function(){function t(t){for(var e in t)r[e]=null}function e(t){for(var e in r)void 0===t[e]&&(t[e]=null)}custom_optimize=function(){for(var r=n.length;--r>-1;)t(n[r]);for(r=n.length;--r>-1;)e(n[r]),obj_toFastProps(n[r]);obj_toFastProps(custom_Attributes)};var n=[custom_Statements,custom_Tags,custom_Parsers,custom_Parsers_Transform],r={}}()}();var expression_eval,expression_evalStatements,ExpressionUtil;!function(){function t(t,e){null==e&&(e=!1),r=t,l=0,u=t.length,i=new it;var n,o,s=i,S=nt;t:for(;;)if(u>l&&(n=r.charCodeAt(l))<33)l++;else{if(l>=u)break;if(o=Ct(n),null==o&&u>l)break;if(o===$){if(e===!0)return[i,l];break}if(e===!0){var Y=s.parent;if(null!=Y&&Y.type===V&&null==Y.parent&&o===H)return[i,l]}if(o===$)break;switch(o){case A:s=mt(s,new ot(s)),s=mt(s,new it(s)),l++;continue;case O:var tt=V;S===rt&&(S=nt,tt=J);do s=s.parent;while(null!=s&&s.type!==tt);if(tt===V&&(s=s.parent),null==s){_t("OutOfAst Exception",n);break t}l++;continue;case M:s=mt(s,new st(s)),o=q,l++;break;case R:for(;null!=s&&s.type!==Q;)s=s.parent;l++;continue;case P:if(S!==rt){S=nt;do s=s.parent;while(null!=s&&s.type!==V&&s.type!==Q);if(l++,null==s){_t("Unexpected comma",n);break t}if(s.type===Q){o=q;break}continue}do s=s.parent;while(null!=s&&s.type!==J);if(null==s){_t("OutOfAst Exception",n);break t}s=s.newArgument(),l++;continue;case I:i=new dt(i),s=i.case1,l++;continue;case F:s=i.case2,l++;continue;case L:n=r.charCodeAt(l+1),n>=48&&57>=n?o=B:(o=s.type===V?H:z,l++);break;case T:if(s.type===K||s.type===X||s.type===W){s=mt(s,new ht(s)),s=s.getBody(),l++;continue}s=mt(s,new ut(s)),s=s.body,l++;continue;case D:do s=s.parent;while(null!=s&&s.type!==X&&s.type!==Z);l++;continue}if(s.type===V&&(s=mt(s,new ot(s))),a!==o&&m!==o||null!=s.body)switch(o){case a:case c:case h:case f:case p:case N:case j:case E:case v:case d:case g:case _:case y:case b:case x:case w:case C:case k:for(;s&&s.type!==G;)s=s.parent;if(null==s.body)return _t("Unexpected operator",n);s.join=o;do s=s.parent;while(null!=s&&s.type!==V);if(null==s)return _t("Unexpected operator",n);l++;continue;case U:case B:if(null!=s.body&&null==s.join)return _t("Directive expected",n);U===o&&(l++,mt(s,new lt(bt(n))),l++),B===o&&mt(s,new lt(xt(n)));continue;case H:case z:var et=wt();if(o===H&&("null"===et&&(et=null),"false"===et&&(et=!1),"true"===et&&(et=!0),"string"!=typeof et)){mt(s,new lt(et));continue}for(;u>l;){n=r.charCodeAt(l);{if(!(33>n))break;l++}}if(40===n){S=rt,l++;var gt=mt(s,new at(s,et));s=gt.newArgument();continue}var kt=o===H?ct:ft;s=mt(s,new kt(s,et));break;case q:if(125===yt())continue;var St=wt();if(58!==yt())return _t("Object parser. Semicolon expeted",n);l++,s=s.nextProp(St),o=H;continue}else s=mt(s,new pt(s,o)),l++}return null==s.body&&s.type===G?_t("Unexpected end of expression",n):(vt(i),i)}function e(n,r,i,o){var l,u;if(null==n)return null;if("."===n)return r;if(u="string"==typeof n?s.hasOwnProperty(n)===!0?s[n]:s[n]=t(n):n,null==u)return null;var S,A,O,T=u.type;if(V===T){var D,M;t:for(S=0,O=u.body.length;O>S;S++)if(A=u.body[S],D=e(A,r,i,o),null!=M&&null!=M.join){if(M.join===v)if(l)l=D;else for(;O>S&&u.body[S].join!==d;S++);if(M.join===d){if(l)break t;if(D){l=D;break t}}switch(M.join){case a:l-=D;break;case c:l+=D;break;case f:l/=D;break;case h:l*=D;break;case p:l%=D;break;case N:l|=D;break;case j:l^=D;break;case E:l&=D;break;case y:l=l!=D;break;case b:l=l!==D;break;case g:l=l==D;break;case _:l=l===D;break;case x:l=l>D;break;case w:l=l>=D;break;case C:l=D>l;break;case k:l=D>=l}M=A}else M=A,l=D}if(G===T)return l=e(u.body,r,i,o),null==u.next?l:gt(u.next,l);if(Y===T)return u.body;if(Z===T){var R=u.body.body,P=R.length,S=-1;for(l=new Array(P);++S<P;)l[S]=e(R[S],r,i,o);return l}if(Q===T){l={};var L=u.props;for(var I in L)l[I]=e(L[I],r,i,o);return l}if(K===T||J===T||X===T||W===T)return gt(u,r,i,o);if(tt===T)switch(l=e(u.body,r,i,o),u.prefix){case a:l=-l;break;case m:l=!l}return et===T&&(l=e(u.body,r,i,o),l=e(l?u.case1:u.case2,r,i,o)),l}function n(n,r,i,o){for(var l=t(n).body,u=[],s=l.length,a=-1,c=new it;++a<s;)c.body.push(l[a]),null==l[a].join&&(u.push(e(c,r,i,o)),c.body.length=0);return u}var r,i,o,l=0,u=0,s={},a="-",c="+",f="/",h="*",p="%",d="||",v="&&",m="!",g="==",_="===",y="!=",b="!==",x=">",w=">=",C="<",k="<=",S=".",N="|",j="^",E="&",A=20,O=21,T=22,D=23,M=24,R=25,P=26,L=27,I=28,F=29,$=30,H=31,z=32,U=33,B=34,q=35,V=1,G=2,K=3,J=4,W=5,X=6,Y=7,Q=10,Z=11,tt=12,et=13,nt=1,rt=2;!function(){o={},o[S]=1,o[f]=2,o[h]=2,o[a]=3,o[c]=3,o[x]=4,o[w]=4,o[C]=4,o[k]=4,o[g]=5,o[_]=5,o[y]=5,o[b]=5,o[N]=5,o[j]=5,o[E]=5,o[v]=7,o[d]=7,obj_toFastProps(o)}();var it,ot,lt,ut,st,at,ct,ft,ht,pt,dt;!function(){it=class_create({constructor:function(t){this.parent=t,this.type=V,this.body=[],this.join=null},toString:function(){return this.body.map(function(t){return t.toString()}).join(", ")}}),ot=class_create({constructor:function(t){this.parent=t},type:G,join:null,body:null,toString:function(){return this.body&&this.body.toString()||""}}),lt=class_create({constructor:function(t){this.type=Y,this.body=t,this.join=null},toString:function(){return is_String(this.body)?"'"+this.body.replace(/'/g,"\\'")+"'":this.body}}),ut=class_create({constructor:function(t){this.type=Z,this.parent=t,this.body=new it(this)},toString:function(){return"["+this.body.toString()+"]"}}),st=class_create({constructor:function(t){this.type=Q,this.parent=t,this.props={}},nextProp:function(t){var e=new ot(this);return this.props[t]=e,e}}),at=class_create({constructor:function(t,e){this.parent=t,this.type=J,this.body=e,this.arguments=[],this.next=null},newArgument:function(){var t=new it(this);return this.arguments.push(t),t},toString:function(){var t=this.arguments.map(function(t){return t.toString()}).join(", ");return this.body+"("+t+")"}}),ct=class_create({constructor:function(t,e){this.type=K,this.parent=t,this.body=e,this.next=null},toString:function(){return this.body+(null==this.next?"":"."+this.next.toString())}}),ft=class_create({constructor:function(t,e){this.type=W,this.parent=t,this.body=e,this.next=null},toString:function(){return this.body+(null==this.next?"":"."+this.next.toString())}}),ht=class_create({constructor:function(t){this.parent=t,this.body=new ot(this),this.body.body=new it(this.body),this.next=null},type:X,getBody:function(){return this.body.body}}),pt=class_create({constructor:function(t,e){this.parent=t,this.prefix=e},type:tt,body:null}),dt=class_create({constructor:function(t){this.body=t,this.case1=new it(this),this.case2=new it(this)},type:et,case1:null,case2:null})}();var vt,mt;!function(){function t(t){if(0===t.length)return null;var e=new it(t[0].parent);return e.join=t[t.length-1].join,e.body=t,e}mt=function(t,e){switch(t.type){case V:return t.body.push(e),e;case G:if(e.type===W||e.type===X)return t.next=e;case tt:return t.body=e;case K:case J:case W:case X:return t.next=e}return _t("Invalid expression")},vt=function(e){if(e.type!==V)return void(null!=e.body&&"object"==typeof e.body&&vt(e.body));var n,r,i,l=e.body,u=0,s=l.length;if(0!==s){for(;s>u;u++)vt(l[u]);for(u=1;s>u&&(n=l[u],r=l[u-1],!(o[r.join]>o[n.join]));u++);if(u!==s){for(i=[l[0]],u=1;s>u;u++){n=l[u],r=l[u-1];var a=o[r.join];if(a>o[n.join]&&s-1>u){for(var c,f,h=u;++u<s&&(c=l[u].join,null!=c)&&!(a<=o[c]););f=l.slice(h,u+1),n=t(f),vt(n)}i.push(n)}e.body=i}}}}();var gt,_t;!function(){_t=function(t,e){return parser_error(t,r,l,e,"expr")},gt=function(t,n,r,i){var o,l,u,s,a,c=i,f=t,h=t.body;if("$c"===h&&(reporter_deprecated("accessor.compo","Use `$` instead of `$c`."),h="$"),"$u"===h&&(reporter_deprecated("accessor.util","Use `_` instead of `$u`"),h="_"),"$a"===h&&reporter_deprecated("accessor.attr","Use `$.attr` instead of `$a`"),"$"===h){l=c;var p=f.next,d=null!=p&&p.body;if(null!=d&&null==l[d]){if(p.type===J&&is_Function(Compo.prototype[d]))o=c,l=Compo.prototype[d],f=p;else for(;;){if(l=l.parent,null==l)break;if(null!=l[d]){o=l,l=l[d],f=p;break}}null==l&&(h="$."+d,f=p)}}else if("$a"===h)l=c&&c.attr;else if("_"===h)l=customUtil_$utils;else if("$ctx"===h)l=r;else if("$scope"===h){var p=f.next,d=null!=p&&p.body;if(null!=d){for(;null!=c&&(o=c.scope,null!=o&&(l=o[d]),null==l);)c=c.parent;f=p}}else if(null!=n&&(o=n,l=n[h]),null==l)for(;null!=c&&(o=c.scope,null!=o&&(l=o[h]),null==l);)c=c.parent;for(;;){if(null==l)return null!=f&&null==f.next||log_warn("<mask:expression> Accessor error:",h," in expression `"+t.toString()+"`"),null;if(f.type===J){for(u=[],s=-1,a=f.arguments.length;++s<a;)u[s]=e(f.arguments[s],n,r,c);l=l.apply(o,u)}if(null==l||null==f.next)break;f=f.next,h=f.type===X?e(f.body,n,r,c):f.body,o=l,l=l[h]}return l}}();var yt,bt,xt,wt,Ct;!function(){yt=function(){for(var t;u>l;){if(t=r.charCodeAt(l),t>32)return t;l++}return null},bt=function(t){for(var e,n,i=!1,o=39===t?"'":'"',u=l;(e=r.indexOf(o,l))>-1&&(l=e,92===r.charCodeAt(e-1));)i=!0,l++;return n=r.substring(u,l),i===!0&&(n=n.replace(__rgxEscapedChar[o],o)),n},xt=function(){for(var t,e,n=l;;){if(t=r.charCodeAt(l),46===t){if(e===!0)return _t("Invalid number",t),null;e=!0}if(!((t>=48&&57>=t||46===t)&&u>l))break;l++}return+r.substring(n,l)},wt=function(){var t,e=l,n=r.charCodeAt(l);if(34===n||39===n)return l++,t=bt(n),l++,t;for(;;){if(l===u)break;if(n=r.charCodeAt(l),36!==n&&95!==n){if(!(n>=48&&57>=n||n>=65&&90>=n||n>=97&&122>=n))break;l++}else l++}return r.substring(e,l)},Ct=function(t){if(null==t&&l===u)return null;switch(t){case 40:return A;case 41:return O;case 123:return M;case 125:return R;case 91:return T;case 93:return D;case 44:return P;case 46:return L;case 59:return $;case 43:return c;case 45:return a;case 42:return h;case 47:return f;case 37:return p;case 61:return r.charCodeAt(++l)!==t?(_t("Assignment violation: View can only access model/controllers","="),null):r.charCodeAt(l+1)===t?(l++,_):g;case 33:return 61===r.charCodeAt(l+1)?(l++,61===r.charCodeAt(l+1)?(l++,b):y):m;case 62:return 61===r.charCodeAt(l+1)?(l++,w):x;case 60:return 61===r.charCodeAt(l+1)?(l++,k):C;case 38:return r.charCodeAt(++l)!==t?E:v;case 124:return r.charCodeAt(++l)!==t?N:d;case 94:return j;case 63:return I;case 58:return F}return t>=65&&90>=t||t>=97&&122>=t||95===t||36===t?H:t>=48&&57>=t?B:34===t||39===t?U:(_t("Unexpected or unsupported directive",t),null)}}();var kt;!function(){function n(t,l,u,s){if(null==t)return null;var a,c,f=t.type;if(V===f)for(var h=t.body,p=h.length,d=-1;++d<p;)c=n(h[d],l,u,s),a=r(a,c);if(K===f||W===f||X===f){for(var v,m=t.body,g=t.next;null!=g;){if(v=g.type,J===v)return n(g,l,u,s);if(K!==v&&W!==v&&X!==v)return log_error("Ast Exception: next should be a symbol/function ref"),null;var _=v===X?e(g.body,l,u,s):g.body;if("string"!=typeof _)return log_warn("Can`t extract accessor name",m),null;m+="."+_,g=g.next}return m}switch(f){case G:case tt:case et:c=n(t.body,l,u,s),a=r(a,c)}if(et===f&&(c=n(i.case1,l,u,s),a=r(a,c),c=n(i.case2,l,u,s),a=r(a,c)),J===f){for(var y=t.arguments,p=y.length,d=-1;++d<p;)c=n(y[d],l,u,s),a=r(a,c);c=null;var b=t;t:for(;b=b.parent;)switch(b.type){case K:case W:case X:c=b.body+(null==c?"":"."+c);break;case V:case G:break t;default:c=null;break t}null!=c&&(a=r(a,c)),t.next&&(c=n(t.next,l,u,s),a=r(a,{accessor:o(t),ref:c}))}return a}function r(t,e){if(null==t)return e;if(null==e)return t;if("object"==typeof t&&null!=t.length||(t=[t]),"object"!=typeof e||null==e.length)return-1===t.indexOf(e)&&t.push(e),t;for(var n=0,r=e.length;r>n;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function o(t){var e=t;t:for(;e.parent;){switch(e.parent.type){case V:case G:break t}e=e.parent}return l(e,t.next)}function l(t,e){if(t===e||null==t)return null;if("object"!=typeof t)return t;if(null!=t.length&&"function"==typeof t.splice){for(var n=[],r=0,i=t.length;i>r;r++)n[r]=l(t[r],e);return n}var o={};for(var u in t)null!=t[u]&&"parent"!==u&&(o[u]=l(t[u],e));return o}kt=function(e,r,i,o){return"string"==typeof e&&(e=t(e)),n(e,r,i,o)}}(),expression_eval=e,expression_evalStatements=n,ExpressionUtil={parse:t,eval:e,varRefs:kt,evalStatements:n}}();var Dom;!function(){function t(t){var e=this.nodes;if(null==e)return void(this.nodes=[t]);var n=e.length;if(0!==n){var r=e[n-1];null!=r&&(r.nextSibling=t)}e.push(t)}function e(t,e,n){this.tagName=t,this.parent=e,this.controller=n,this.attr={}}var n=1,r=2,i=3,o=4,l=9,u=10,s=15,a=class_create({constructor:function(t,e){this.type=Dom.NODE,this.tagName=t,this.parent=e,this.attr={}},__single:null,appendChild:t,attr:null,expression:null,nodes:null,parent:null,sourceIndex:-1,stringify:null,tagName:null,type:n}),c=class_create({constructor:function(t,e){this.content=t,this.parent=e},type:r,content:null,parent:null});e.prototype={constructor:e,type:o,parent:null,attr:null,controller:null,nodes:null,components:null,model:null,modelRef:null};var f=class_create({type:i,nodes:null,appendChild:t,source:""});Dom={NODE:n,TEXTNODE:r,FRAGMENT:i,COMPONENT:o,CONTROLLER:l,SET:u,STATEMENT:s,Node:a,TextNode:c,Fragment:f,Component:e}}(),function(){function t(t,e,n,r){function i(t){return expression_eval(t,e,n,r)}if(i(t.expression))return t.nodes;for(;;){if(t=t.nextSibling,null==t||"else"!==t.tagName)break;var o=t.expression;if(null==o||""===o||i(o))return t.nodes}return null}custom_Statements["if"]={getNodes:t,render:function(e,n,r,i,o,l){var u=t(e,n,r,o);null!=u&&builder_build(u,n,r,i,o,l)}}}(),function(){function t(t,n,r,i,o,l,u,s){builder_build(e(r,t,n[0],n[1],n[2],n[3]),i,o,l,u,s)}function e(t,e,i,o,l,u){return"of"===l?is_Array(e)===!1?(log_error("<ForStatement> Value is not enumerable",e),null):n(t,e,i,o,u):"in"===l?"object"!=typeof e?(log_warn("<ForStatement> Value is not an object",e),null):(is_Array(e)&&log_warn("<ForStatement> Consider to use `for..of` for Arrays"),r(t,e,i,o,u)):void 0}function n(t,e,n,r,o){for(var l,u=-1,s=e.length,a=new Array(s);++u<s;)l={},l[n]=e[u],r&&(l[r]=u),a[u]=i(p,t,l,u,n,o);return a}function r(t,e,n,r,o){var l,u,s,a=[],c=0;for(u in e)s=e[u],l={},l[n]=u,r&&(l[r]=s),a[c++]=i(d,t,l,u,r,o);return a}function i(t,e,n,r,i,l){return{type:Dom.COMPONENT,tagName:t,nodes:e,controller:o(t,n,r,i,l)}}function o(t,e,n,r,i){return{meta:{serializeScope:!0},compoName:t,scope:e,elements:null,propVal:r,key:n,expression:i,renderEnd:l,dispose:u,serializeScope:s}}function l(t){this.elements=t}function u(){this.elements&&(this.elements.length=0)}function s(t,e){var n=this,r=n.expression,i=n.key,o=n.propVal,l=t[o];return null!=l&&"object"==typeof l&&(t[o]="$ref:("+r+')."'+i+'"'),t}function a(t){v=t,g=t.length,m=0;var e,n,r,i,o;if(o=c(),40===o&&(i=!0,m++,c()),e=f(),o=c(),44===o){if(i!==!0)return h("Parenthese must be used in multiple var declarion");m++,c(),n=f()}if(i){if(o=c(),41!==o)return h("Closing parenthese expected");m++}o=c();var r;return 105===o&&110===v.charCodeAt(++m)&&(r="in"),111===o&&102===v.charCodeAt(++m)&&(r="of"),null==r?h("Invalid FOR statement. (in|of) expected"):(_[0]=e,_[1]=n,_[2]=r,_[3]=v.substring(++m),_)}function c(){for(var t;g>m;m++)if(t=v.charCodeAt(m),!(33>t))return t;return-1}function f(){for(var t,e=m;g>m;m++)if(t=v.charCodeAt(m),t>48&&57>t){if(e===m)return h("Variable name begins with a digit")}else if(!(36===t||95===t||t>=97&&122>=t||t>=65&&90>=t))break;return e===m?h("Variable declaration expected"):v.substring(e,m)}function h(t){throw new Error("<ForStatement parser> "+t+" `"+v.substring(m,20)+"`")}var p="for..of::item",d="for..in::item";custom_Statements["for"]={render:function(e,n,r,i,o,l){a(e.expression);var u=expression_eval(_[3],n,r,o);null!=u&&t(u,_,e.nodes,n,r,i,o,l)},build:t,parseFor:a,createForNode:i,getNodes:e,getHandler:function(t,e){return o(t,e)}},function(){function t(t){function e(){}return e.prototype={meta:{serializeScope:!0},serializeScope:s,type:Dom.COMPONENT,compoName:t,renderEnd:l,dispose:u},e}custom_Tags[p]=t(p),custom_Tags[d]=t(d)}();var v,m,g,_=["prop1","prop2","in|of","expression"]}(),function(){function t(t,n){for(var r=n.length,i=new Array(r),o=t.nodes,l=t.expression,u="."===l?'."':"("+t.expression+')."',s=0;r>s;s++)i[s]=e(o,n[s],u,s);return i}function e(t,e,r,i){return{type:Dom.COMPONENT,tagName:"each::item",nodes:t,controller:n(e,i,r)}}function n(t,e,n){return{compoName:"each::item",model:t,scope:{index:e},modelRef:n+e+'"',attr:null,meta:null}}custom_Statements.each={render:function(e,n,r,i,o,l){var u=expression_eval(e.expression,n,r,o);null!=u&&builder_build(t(e,u),u,r,i,o,l)}}}(),custom_Statements["with"]={render:function(t,e,n,r,i,o){var l=expression_eval(t.expression,e,n,i);null==l&&warn_withNode("Value is undefined",t),builder_build(t.nodes,l,n,r,i,o)}},function(){function t(t,e,n,r,i){if(null==e)return null;for(var o,l,u,s,a=e.length,c=-1;++c<a;)if(o=e[c],"default"!==o.tagName)if("case"===o.tagName)if(l=o.expression){if(expression_eval(l,n,r,i)==t){u=o;break}}else log_warn("<mask:switch:case> Expression expected");else log_warn("<mask:switch> Case expected",o.tagName);else s=o;return null==u&&(u=s),null!=u?u.nodes:null}custom_Statements["switch"]={render:function(e,n,r,i,o,l){var u=expression_eval(e.expression,n,r,o),s=t(u,e.nodes,n,r,o);null!=s&&builder_build(s,n,r,i,o,l)},getNodes:t}}(),function(){function t(t,e){for(var n=0;n<t.length;n++)t[n].style.display=e?"":"none"}custom_Statements.visible={toggle:t,render:function(e,n,r,i,o,l){var u=[];builder_build(e.nodes,n,r,i,o,u),arr_pushMany(l,u);var s=expression_eval(e.expression,n,r,o);t(u,s)}}}(),function(){function t(t,e,n,r,i,o){return{type:Dom.COMPONENT,compoName:t,attr:{},nodes:e,model:n,container:i,parent:o,index:r,scope:{index:r}}}custom_Statements.repeat={render:function(e,n,r,i,o,l){var u=expression_eval,s=e.expression,a=s.split(".."),c=+u(a[0]||"",n,r,o),f=+u(a[1]||"",n,r,o);if(c!==c||f!==f)return void log_error("Repeat attribute(from..to) invalid",s);for(var h=e.nodes,p=[],d=-1;++d<f;)p[d]=t("repeat::item",h,n,d,i,o);var v=[];builder_build(p,n,r,i,o,v),arr_pushMany(l,v)}}}();var parser_parse,parser_parseHtml,parser_parseAttr,parser_parseAttrObject,parser_parseLiteral,parser_ensureTemplateFunction,parser_setInterpolationQuotes,parser_cleanObject,parser_ObjectLexer,parser_defineContentTag,mask_stringify,mask_stringifyAttr;!function(t,e,n,r){var i="~",o="[",l="]",u=126,s=91,a=93,c=2,f=9,h=6,p=7,d=3,v=5,m=8,g={script:1,style:1,template:1,markdown:1};!function(){parser_defineContentTag=function(t){g[t]=1}}(),parser_cleanObject=function(t){if(is_Array(t)){for(var e=0;e<t.length;e++)parser_cleanObject(t[e]);return t}return delete t.parent,delete t.__single,null!=t.nodes&&parser_cleanObject(t.nodes),t};var _,y,b,x,w,C,k;!function(){_=function(t,e,n,r,i){for(var o,l=0,u=e;n>e;e++)if(o=t.charCodeAt(e),34!==o&&39!==o)if(o!==r){if(o===i&&-1===--l)return e}else l++;else e=y(t,e+1,n,34===o?'"':"'");return parser_warn("Group was not closed",t,u),n},b=function(t,e,n){for(var r;n>e;)if(r=t.charCodeAt(e),36!==r&&95!==r){if(!(r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r))break;e++}else e++;return e},x=function(t,e,n){for(var r;n>e;)if(r=t.charCodeAt(e),36!==r&&95!==r&&58!==r){if(!(r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r))break;e++}else e++;return e},y=function(t,e,n,r){for(var i=e;-1!==(e=t.indexOf(r,e));){if(92!==t.charCodeAt(e-1))return e;e++}return parser_warn("Quote was not closed",t,i-1),n},w=function(t,e,n){for(;n>e;e++)if(t.charCodeAt(e)>32)return e;return e},C=function(t,e){for(;e>0;e--)if(t.charCodeAt(e)>32)return e;return e},k=function(t,e,n){for(;n>e;e++)if(t.charCodeAt(e)<33)return e;return e}}(),function(){function t(t){for(var o,l,u=-1,h=!1;-1!==(u=t.indexOf(i,u));){o=t.charCodeAt(u+1);var d=n(t,u);if(d===!0&&(h=!0),d===!1){if(o===s)break;if(e(o))break}u++}if(-1===u)return h===!0?c(t):null;for(var v,m=t.length,g=[],y=0,b=0,x=!1;;){if(g[b++]=y===u?"":r(t,y,u),l=u+1,o=t.charCodeAt(l),o===s){x=!1,v=_(t,l+1,m,s,a);var w=t.substring(u+2,v);g[b++]=new f(null,w),y=u=v+1}else if(e(o)){x=!0,v=p(t,l,m);var w=t.substring(u+1,v);g[b++]=new f(w,null),y=u=v}else g[b]+=t[l],y=l;for(;-1!==(u=t.indexOf(i,u));){o=t.charCodeAt(u+1);var d=n(t,u);if(d===!0&&(h=!0),d===!1){if(o===s)break;if(e(o))break}u++}if(-1===u)break}return m>y&&(g[b]=h===!0?r(t,y,m):t.substring(y)),g}function e(t){return t>=65&&122>=t||36===t||95===t}function n(t,e){if(0===e)return!1;var r=t.charCodeAt(--e);return 92===r?!n(t,r):!1}function r(t,e,n){var r=t.substring(e,n),o=r.indexOf(i);return-1===o?r:c(r)}function c(t){return t.replace(/\\~/g,"~")}function f(t,e){this.prop=t,this.expr=e}function h(t,e,n,r,i,o,l){for(var u=t.length,s=-1,a=null,c="",f=!0;++s<u;){if(f===!0)null==a?c+=t[s]:a.push(t[s]);else{var h=t[s],p=h.process(n,r,i,o,l,e);null!=p&&("object"==typeof p&&null==a&&(a=[c]),null==a?c+=p:a.push(p))}f=!f}return null==a?c:a}function p(t,e,n){for(var r;n>e;)if(r=t.charCodeAt(e),36!==r&&95!==r&&46!==r){if(!(r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r))break;e++}else e++;return e}parser_ensureTemplateFunction=function(e){var n=t(e);if(null==n)return e;if("string"==typeof n)return n;var r=n;return function(t,n,i,o,l,u){return void 0===t?e:h(r,t,n,i,o,l,u)}},parser_setInterpolationQuotes=function(t,e){return t&&2===t.length?e&&1===e.length?(u=t.charCodeAt(0),s=t.charCodeAt(1),a=e.charCodeAt(0),i=t[0],o=t[1],void(l=e)):void log_error("Interpolation End must be of 1 Character"):void log_error("Interpolation Start must contain 2 Characters")},f.prototype.process=function(t,e,n,r,i,o){if(null!=this.prop)return obj_getPropertyEx(this.prop,t,e,r);var l,u=this.expr,s=u.indexOf(":");if(-1!==s)if(0===s)u=u.substring(s+1);else{var a=d.exec(u);null!=a&&(l=a[1],u=u.substring(s+1))}null!=l&&""!==l||(l="expression");var c=custom_Utils[l];return null==c?(log_error("Undefined custom util:",l),null):c(u,t,e,n,r,i,o)};var d=/\s*(\w+):/}();var S;!function(){function t(t){var r=e(t);return function(t,e,i,o,l){return n(r,t,e,i,o,l)}}var e;!function(){function t(t,n,r,i,o,l){var a=++i;i=_(r,i,o,91,93);var c=e(r,a,i);i++,40!==r.charCodeAt(i)&&d("Punctuation group expected"),a=++i,i=_(r,i,o,40,41);var f=r.substring(a,i);return n.push(new u(t,c,new s(f),l)),i}function n(t,e,n,r,i){var o=++r;return r=_(n,r,i,40,41),e.push(new a(t,n.substring(o,r))),r}function h(t,e,n,r,i){var o=++r;return r=x(n,r,i),e.push(new c(t,n.substring(o,r))),r}function p(t,n,r,i,o){var l=++i;return i=_(r,l,o,40,41),n.push(new f(e(r,l,i),t)),i}function d(t){throw Error("Lexer pattern: "+t)}e=function(u,a,c){void 0===a&&(a=0,c=u.length);var v,m,g,_=[];t:for(;c>a;a++){switch(g=a,v=u.charCodeAt(a),m=!1,63===v&&(m=!0,g=++a,v=u.charCodeAt(a)),v){case 32:_.push(new l(m,a));continue;case 34:case 39:a=y(u,a+1,c,34===v?'"':"'"),_.push(new o(e(u,g+1,a)));continue;case 36:g=++a;var b=!1;v===u.charCodeAt(a)&&(b=!0,g=++a),a=x(u,a,c);var w=u.substring(g,a);if(m===!1&&b===!1){_.push(new i(w)),a--;continue}if(v=u.charCodeAt(a),91===v){a=t(w,_,u,a,c,m);continue}if(40===v){a=n(w,_,u,a,c);continue}if(60===v){a=h(w,_,u,a,c);continue}d("Unexpected extended type");continue;case 40:if(m===!0){a=p(m,_,u,a,c);continue}case 44:case 41:case 91:case 93:case 123:case 125:_.push(new s(String.fromCharCode(v)));continue}for(;c>a;)if(v=u.charCodeAt(++a),!(v>32&&34!==v&&39!==v&&36!==v&&44!==v)){_.push(new r(u.substring(g,a))),--a;continue t}}for(var C,k=_.length,S=-1,N=k>1;N===!0&&++S<k;)C=_[S],C instanceof f!=!1&&C.optional===!0||(N=!1);return _}}();var n;!function(){n=function(t,e,n,r,i,o){for(var l,u,s=n,a=t.length,c=0;a>c;c++)if(l=t[c],u=n,n=l.consume(e,n,r,i),n===u){if(l.optional===!0)continue;if(o===!0)return s;var f="Token of type `"+l.name+"`";return l.token&&(f+=" Did you mean: `"+l.token+"`?"),parser_error(f,e,n),s}return n}}();var r,i,o,l,u,s,a,c,f,h;!function(){function t(t){return new Function("obj","val","obj."+t+"= val;")}function e(t,e){var n=e.constructor;return e.name=t,e.optional=!1,e.token=null,n.prototype=e,n}l=e("Whitespace",{constructor:function(t){this.optional=t},consume:w}),r=e("Const",{constructor:function(t){this.token=t},consume:function(t,e,n){var r=e+this.token.length;return t=t.substring(e,r),t===this.token?r:e}}),i=e("Var",{constructor:function(e){this.token=e,this.setter=t(e)},consume:function(t,e,n,r){var i=x(t,e,n);return i===e?e:(this.setter(r,t.substring(e,i)),i)}}),a=e("ExtendedVar",{constructor:function(e,n){if(this.token=n,this.setter=t(e),42===n.charCodeAt(0)){if("*"===n)return void(this.consume=this.consumeAll);if(3===n.length)return void(this.consume=this.consumeGroup);throw Error("`*` consumer expected group chars to parse")}this.rgx=new RegExp(n,"g")},consumeAll:function(t,e,n,r){return this.setter(r,t.substring(e)),n},consumeGroup:function(t,e,n,r){var o=this.token.charCodeAt(1),l=this.token.charCodeAt(2);if(t.charCodeAt(e)!==o)return i.prototype.consume.call(this,t,e,n,r);var l=_(t,++e,n,o,l);return l===e?e:(this.setter(r,t.substring(e,l)),l+1)},consume:function(t,e,n,r){this.rgx.lastIndex=e;var i=this.rgx.exec(t);if(null==i)return e;var o=i[0];return this.setter(r,o),e+o.length}}),function(){c=e("CustomVar",{constructor:function(e,r){this.fn=n[r],this.token=e,this.setter=t(e)},consume:function(t,e,n,r){for(var i,o=e;n>e&&(i=t.charCodeAt(e),36===i||95===i||58===i||(i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i)||this.fn(i)===!0);e++);return e===o?e:(this.setter(r,t.substring(o,e)),e)}});var n={accessor:function(t){return 46===t}}}(),o=e("String",{constructor:function(t){this.tokens=t},consume:function(t,e,n,r){var i=t.charCodeAt(e);if(34!==i&&39!==i)return e;var o=y(t,e+1,n,34===i?'"':"'");if(1!==this.tokens.length)throw Error("Not implemented");var l=this.tokens[0];return r[l.token]=t.substring(e+1,o),++o}}),u=e("Array",{constructor:function(t,e,n,r){this.token=t,this.delim=n,this.tokens=e,this.optional=r},consume:function(t,e,r,i){for(var o,l,u;;){if(o={},l=n(this.tokens,t,e,r,o,this.optional),e===l){if(null==u)return e;throw Error("Next item expected")}if(null==u&&(u=[]),u.push(o),e=l,l=this.delim.consume(t,e,r),e===l)break;e=l}return i[this.token]=u,e}}),s=e("Punc",{constructor:function(t){this.before=new l(!0),this.delim=new r(t),this.after=new l(!0),this.token=t},consume:function(t,e,n){var r=this.before.consume(t,e,n),i=this.delim.consume(t,r,n);return r===i?e:this.after.consume(t,i,n)}}),f=e("Group",{constructor:function(t,e){this.optional=e,this.tokens=t},consume:function(t,e,r,i){return n(this.tokens,t,e,r,i,this.optional)}}),h=e("OrGroup",{constructor:function(t){this.groups=t,this.length=t.length},consume:function(t,e,n,r){for(var i=e,o=0;o<this.length;o++)if(e=this.groups[o].consume(t,e,n,r),e!==i)return e;return e}})}(),parser_ObjectLexer=S=function(e){return 1===arguments.length&&"string"==typeof e?t(e):p(Array.prototype.slice.call(arguments))};var p;!function(){function e(t,e,r,i,o,l){return"function"==typeof t?t(e,r,i,o,l):n(t,e,r,i,o,l)}function n(t,e,n,r,i,o){for(var l=n,u=t.length,s=-1;++s<u;)if(n=t[s](e,n,r,i,!0),l!==n)return n;return o!==!0&&t[0](e,l,r,i,o),l}function r(e){if("string"==typeof e)return t(e);for(var n=e.length;--n>-1;)e[n]=t(e[n]);return e}p=function(t){for(var n=t.length,i=-1;++i<n;)t[i]=r(t[i]);return function(r,o,l,u,s){var a;for(i=-1;++i<n;)if(a=o,o=e(t[i],r,o,l,u,s),o===a)return a;return o}}}()}(),function(){custom_Parsers["var"]=function(e,n,r,i){for(var o,l,u,s=new t("var",i),a=1,c=2,f=3,h=4,p=a;;)if(r>n&&(l=e.charCodeAt(n))<33)n++;else if(p!==a)if(p!==c)if(p!==f){if(p===h){if(44===l){p=a,n++;continue}break}}else{switch(o=n,n++,l){case 123:case 91:n=_(e,n,r,l,l+2);break;case 39:case 34:n=y(e,n,r,39===l?"'":'"');break;default:for(;r>n&&(l=e.charCodeAt(n),44!==l&&59!==l);)n++;n--}n++,s.attr[u]=e.substring(o,n),p=h}else{if(61!==l)return parser_error("Assignment expected",e,n,l,"var"),[s,n];p=f,n++}else o=n,n=b(e,n,r),u=e.substring(o,n),p=c;return[s,n,0]};var t=class_create(Dom.Node,{stringify:function(){var t=this.attr,e="var ";for(var n in t)"var "!==e&&(e+=","),e+=n+"="+t[n];return e+";"},getObject:function(t,e,n){var r,i={},o=this.attr;for(r in o)i[r]=expression_eval(o[r],t,e,n);return i}})}(),function(){function t(t,n){return function(l,u,s,a){for(var f,h,p,d,v,m=u;s>u&&(v=l.charCodeAt(u),123!==v&&59!==v&&62!==v);)u++;h=parser_parseAttr(l,m,u);for(var g in h)h[g]=parser_ensureTemplateFunction(h[g]);if(62===v){var y=w(l,u+1,s),b=l.charCodeAt(y);if(34!==b&&39!==b){var x=new Dom.Node(t,a);return x.attr=h,[x,u,c]}}if(f=u,p=123===v||62===v){if(u++,123===v&&(f=_(l,u,s,123,125),d=l.substring(u,f)),62===v){var C=parser_parseLiteral(l,u,s);if(null==C)return null;f=C[1],d=C[0],f-=1}if(null!=n&&(d=n(d,h,a),null==d))return[null,f+1];d=e(t,d),"script"!==t&&(d=parser_ensureTemplateFunction(d))}var x=new r(t,a);return x.content=d,x.attr=h,x.id=o+ ++i,[x,f+1,0]}}function e(t,e){var n=__cfg.preprocessor[t];if(null==n)return e;var r=n(e);return null==r?(log_error("Preprocessor must return a string"),e):r}var n;!function(){n={transform:function(t,e,n){if(null!=e.self){var r=n.attr.style;return n.attr.style=parser_ensureTemplateFunction((r||"")+t),
null}return t}}}(),custom_Parsers.style=t("style",n.transform),custom_Parsers.script=t("script");var r=class_create(Dom.Node,{content:null,id:null,stringify:function(t){t.processHead(this);var e=this.content;return null==e?void t.print(";"):(is_Function(e)&&(e=e()),t.openBlock("{"),t.print(e),void t.closeBlock("}"))}}),i=0,o="_cm_"}(),function(){var t="import",e="imports";custom_Parsers[t]=function(t,e,r,o){var l={exports:null,alias:null,path:null,async:null},u=n(t,e,r,l);return[new i(o,l),u,0]},custom_Parsers_Transform[t]=function(t){if(t.tagName===e)return null;var n=new r("imports",t);return t.appendChild(n),n};var n=S(['from "$path"?( is $contentType)','?($$async(async) )* as $alias from "$path"?( is $contentType)','?($$async(async) )$$exports[$name?( as $alias)](,) from "$path"?( is $contentType)']),r=class_create(Dom.Node,{stringify:function(t){t.process(this.nodes)}}),i=class_create({type:Dom.COMPONENT,tagName:t,path:null,alias:null,async:null,exports:null,constructor:function(t,e){this.path=e.path,this.alias=e.alias,this.async=e.async,this.exports=e.exports,this.contentType=e.contentType,this.parent=t},stringify:function(){var e=" from '"+this.path+"'",n=t,r=this.contentType;if(null!=r&&(e+=" is "+r),null!=this.async&&(n+=" "+this.async),e+=";",null!=this.alias)return n+" * as "+this.alias+e;if(null!=this.exports){for(var i,o=this.exports,l="",u=o.length,s=-1;++s<u;)i=o[s],l+=i.name,i.alias&&(l+=" as "+i.alias),s!==u-1&&(l+=", ");return n+" "+l+e}return n+e}})}(),function(){function t(t){custom_Parsers[t]=function(r,i,o,l){var u=new n(t,l),s=e(r,i,o,u);return[u,s,c]}}t("define"),t("let");var e=S("$name","?( ($$arguments[$$prop<accessor>](,)))?( as $$as(*()))?( extends $$extends[$$compo<accessor>](,))","{"),n=class_create(Dom.Node,{as:null,name:null,"extends":null,arguments:null,stringify:function(t){var e=this["extends"],n=this.as,r="";if(null!=n&&0!==n.length&&(r+=" as ("+n+")"),null!=e&&0!==e.length){r+=" extends ";for(var i=e.length,o=-1;++o<i;)r+=e[o].compo,i-1>o&&(r+=", ")}var l=this.tagName+" "+this.name+r;t.write(l),t.openBlock("{"),t.process(this.nodes),t.closeBlock("}")}})}(),function(){function t(t){return function(n,r,i,l){var u=n.indexOf("{",r)+1,s=e(t,n.substring(r,u-1));null==s&&parser_error("Method head syntax error",n,r);var a=_(n,u,i,123,125),c=n.substring(u,a),f=null==s?null:new o(t,s.name,s.args,c,l);return[f,a+1,0]}}function e(t,e){var r=/([^\(\)\n]+)\s*(\(([^\)]*)\))?/.exec(e);if(null==r)return null;var i=r[1].trim(),e=r[3],o=null==e?[]:e.replace(/\s/g,"").split(",");return new n(i,o)}function n(t,e){this.name=t,this.args=e}function r(t,e,n){var r=_Array_slice.call(t),i=__cfg.preprocessor.script;return null!=i&&(e=i(e)),null!=n&&(e+="\n//# sourceURL="+n),r.push(e),new(Function.bind.apply(Function,[null].concat(r)))}var i,o=class_create(Dom.Component.prototype,{name:null,body:null,args:null,fn:null,constructor:function(t,e,n,o,l){this.tagName=t,this.name=e,this.args=n,this.body=o,this.parent=l;var u=null,s=l.tagName;"let"!==s&&"define"!==s||(s+="_"+l.name),u=i(t,e,l),this.fn=r(n,o,u)},stringify:function(t){var e=this.tagName+" "+this.name+"("+this.args.join(",")+")";t.write(e),t.openBlock("{"),t.print(this.body),t.closeBlock("}")}});!function(){i=function(e,n,r){for(var i,o=r.tagName,l=r,u="";null!=l;)i=l.tagName,"let"!==i&&"define"!==i||(""!==u&&(u="."+u),u=l.name+u),l=l.parent;"let"!==o&&"define"!==o&&(""!==u&&(u+="_"),u+=o);var s=u+"_"+e+"_"+n,a=null;return void 0!==t[s]&&(a=++t[s]),null!=a&&(s+="_"+a),t[s]=1,"dynamic://MaskJS/"+s};var t={}}(),custom_Parsers.slot=t("slot"),custom_Parsers.pipe=t("pipe"),custom_Parsers.event=t("event"),custom_Parsers["function"]=t("function")}();var N;!function(){function r(t,e){return t.charCodeAt(e)}function i(t,e,n,i){for(;n>e;e++)if(i===r(t,e))return e;return e}function o(t,e,n){var i=7,o=r(t,e);if(35!==o)return null;for(var l=e+1;++e<n;){if(0===--i)return null;if(o=r(t,e),!(o>=48&&57>=o||o>=65&&70>=o||120===o)){if(59===o)return t.substring(l,e);break}}return null}function l(t){var e=Number("0"+t);return e!==e?(parser_warn("Invalid Unicode Char",t),""):String.fromCharCode(e)}function u(t,e,n){for(var i=10,o=e;n>e;e++,i--){if(0===i)return null;var l=r(t,e);if(59===l)break;{if(!(l>=48&&57>=l||l>=65&&90>=l||l>=97&&122>=l))return null;e++}}return t.substring(o,e)}function s(t,e){if(1===C[e])return t;for(var n=t;null!=n&&(null==n.tagName||n.tagName.toLowerCase()!==e);)n=n.parent;return null==n?(parser_warn("Unmatched closing tag",e),t):n.parent||n}function a(e,n){var r=n,i=b[e];if(null!=i)for(;null!=r&&null!=r.tagName&&1===i[r.tagName.toLowerCase()];)r=r.parent;var o=new t(e,r);return r.appendChild(o),o}function f(t){var e,n,r=t.attr;for(e in r)n=r[e],null!=n&&n!==e&&(r[e]=parser_ensureTemplateFunction(n));null!=r.expression&&(t.expression=r.expression,t.type=Dom.STATEMENT)}function h(t,e){arr_each(e,function(e){t.appendChild(e)})}var p=21,d="[CDATA[",_="DOCTYPE";parser_parseHtml=function(t){var e=N(t,0,!1);return e[0]},N=function(b,S,N){var j,E,A,O=new n,T=O,D=c,M=S,R=b.length;t:for(;R>=M;){if(D===m&&O===T&&N===!0)return[T,M,0];if(D!==v){if(E=r(b,M),60===E){if(E=r(b,++M),33===E){if(45===r(b,M+1)&&45===r(b,M+2)){M=b.indexOf("-->",M+3)+3,2===M&&(parser_warn("Comment has no ending",b,M),M=R),D=m;continue t}if(b.substring(M+1,M+1+d.length).toUpperCase()===d){A=M+1+d.length,M=b.indexOf("]]>",A),-1===M&&(M=R),O.appendChild(new e(b.substring(A,M))),M+=3,D=m;continue t}if(b.substring(M+1,M+1+_.length).toUpperCase()===_){var P=new t("!"+_,O);P.attr.html="html",O.appendChild(P),M=i(b,M,R,62)+1,D=m;continue t}}if(36===E||95===E||58===E||43===E||47===E||E>=65&&90>=E||E>=97&&122>=E){if(47===E&&(D=p,M++,M=w(b,M,R)),A=M,M=x(b,M+1,R),j=b.substring(A,M),D===p){O=s(O,j.toLowerCase()),D=m,M=i(b,M,R,62),M++;continue t}O=a(j,O),D=v;continue t}M--}for(A=M,j="";R>=M;){if(E=r(b,++M),60===E){if(E=r(b,M+1),36===E||95===E||58===E||43===E||47===E||33===E)break;if(E>=65&&90>=E||E>=97&&122>=E)break}if(38===E){var L=null,I=null;I=o(b,M+1),null!=I?L=l(I):(I=u(b,M+1),null!=I&&(L=y(I))),null!=L&&(j+=b.substring(A,M)+L,A=M+I.length+1)}}j+=b.substring(A,M),""!==j&&(j=parser_ensureTemplateFunction(j),O.appendChild(new e(j,O)))}else{if(M=parser_parseAttrObject(b,M,R,O.attr),M===R)break;switch(f(O),r(b,M)){case 47:O=O.parent,M=i(b,M,R,62);break;case 62:1===C[O.tagName.toLowerCase()]&&(O=O.parent)}M++;var F=O.tagName;if("mask"===F||1===g[F]){var $=k(b,M,F),H=$[0];if(M=$[1],"mask"===F){O.parent.nodes.pop(),O=O.parent;var z=parser_parse(H);z.type===Dom.FRAGMENT?h(O,z.nodes):O.appendChild(z)}else O.appendChild(new e($[0])),O=O.parent}D=m}}var U=T.nodes,$=null!=U&&1===U.length?U[0]:T;return[$,R,0]};var y;!function(t){var e;y=function(t){return null==e&&(e=require("./html_entities.js")),e[t]}}(document);var b,C={area:1,base:1,br:1,col:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,menuitem:1,meta:1,param:1,source:1,track:1,wbr:1,"!doctype":1};!function(){var t={input:1,option:1,optgroup:1,select:1,button:1,datalist:1,textarea:1};b={tr:{tr:1,th:1,td:1},th:{th:1},td:{thead:1,td:1},body:{head:1,link:1,script:1},li:{li:1},p:{p:1},h1:{p:1},h2:{p:1},h3:{p:1},h4:{p:1},h5:{p:1},h6:{p:1},select:t,input:t,output:t,button:t,datalist:t,textarea:t,option:{option:1},optgroup:{optgroup:1}}}();var k;!function(){k=function(t,n,r){var i=n,o=n,l=e(r,n).exec(t);return null==l?o=n=t.length:(o=l.index,n=o+l[0].length),[t.substring(i,o),n]};var t={},e=function(e,n){var r=t[e];return null==r&&(r=t[e]=new RegExp("<\\s*/"+e+"[^>]*>","gi")),r.lastIndex=n,r}}()}(),function(){parser_parse=function(r){var i,o,l,g,y,b,x,w,k,S=new n,j=S,E=c,A=d,O=0,T=r.length;j.source=r;t:for(;;){for(;T>O&&(x=r.charCodeAt(O))<33;)O++;if(47===x){if(k=r.charCodeAt(O+1),47===k){for(O++;10!==x&&13!==x&&T>O;)x=r.charCodeAt(++O);continue}if(42===k){O=r.indexOf("*/",O+2)+2,1===O&&(parser_warn("Block comment has no ending",r,O),O=T);continue}}if(A===v&&(null!=i&&(S.attr["class"]=parser_ensureTemplateFunction(i),i=null),null!=g&&(S.attr[g]=g,g=null,o=null)),null!=o){if(E===v)null==g?g=o:y=o,null!=g&&null!=y&&("class"!==g?S.attr[g]=y:i=null==i?y:i+" "+y,g=null,y=null);else if(A===d){var D=custom_Parsers[o];if(null!=D){var M=D(r,O,T,S),R=M[0],P=M[2];if(O=M[1],E=0===P?c:P,null!=R){R.sourceIndex=l;var L=custom_Parsers_Transform[o];if(null!=L){var I=L(S,R);null!=I&&(S.__single=!0,S=I)}if(S.appendChild(R),0!==P)S=R;else if(S.__single===!0)do S=S.parent;while(null!=S&&null!=S.__single)}o=null;continue}b=new t(o,S),b.sourceIndex=l,S.appendChild(b),S=b,E=v}else if(A===m){if(b=new e(o,S),S.appendChild(b),S.__single===!0)do S=S.parent;while(null!=S&&null!=S.__single);E=c}o=null}if(O>=T){E===v&&(null!=i&&(S.attr["class"]=parser_ensureTemplateFunction(i)),null!=g&&(S.attr[g]=g)),x=null;break}if(E===f){for(S=S.parent;null!=S&&null!=S.__single;)S=S.parent;null==S&&(S=j,parser_warn("Unexpected tag closing",r,C(r,O-1))),E=c}switch(x){case 60:if(E!==c)break;var M=N(r,O,!0),R=M[0];if(R.sourceIndex=O,O=M[1],E=c,o=null,S.appendChild(R),S.__single===!0)do S=S.parent;while(null!=S&&null!=S.__single);continue;case 123:A=E,E=c,O++;continue;case 62:A=E,E=c,O++,S.__single=!0;continue;case 59:if(null!=S.nodes){O++;continue}case 125:125!==x||E!==d&&E!==v||O--,O++,A=E,E=f;continue;case 39:case 34:E===h?E=v:A=E=m,O++;var F=!1,$=!1,H=39===x?"'":'"';for(w=O;(O=r.indexOf(H,O))>-1&&92===r.charCodeAt(O-1);)F=!0,O++;-1===O&&(parser_warn("Literal has no ending",r,w-1),O=T),O===w&&(k=r.charCodeAt(O+1),124!==k&&k!==x||($=!0,w=O+2,O=r.indexOf((124===k?"|":H)+H+H,w),-1===O&&(O=T))),l=w,o=r.substring(w,O),F===!0&&(o=o.replace(__rgxEscapedChar[H],H)),E===v&&"class"===g||(o=parser_ensureTemplateFunction(o)),O+=$?3:1;continue}if(E===c){if(A=d,E=d,46===x||35===x){l=O,o="div";continue}}else if(E===v)if(46===x)O++,g="class",E=p;else if(35===x)O++,g="id",E=p;else{if(61===x){O++,E=h,A===d&&null==g&&parser_warn("Unexpected tag assignment",r,O,x,E);continue}if(40===x){w=1+O,O=1+_(r,w,T,x,41),S.expression=r.substring(w,O-1),S.type=Dom.STATEMENT;continue}if(null!=g){l=O,o=g;continue}}E!==h&&E!==p||(A=E,E=v);var z=!1;for(w=O;T>O;){if(x=r.charCodeAt(O),x===u){var k=r.charCodeAt(O+1);k===s?(z=!0,O=1+_(r,O+2,T,u,a),x=r.charCodeAt(O)):(k>=65&&122>=k||36===k||95===k)&&(z=!0)}if(64===x&&91===r.charCodeAt(O+1)&&(O=_(r,O+2,T,91,93)+1,x=r.charCodeAt(O)),39===x||34===x||47===x||60===x||44===x){parser_error("Unexpected char",r,O,x,E);break t}if(A!==h&&(46===x||35===x))break;if(33>x||61===x||62===x||59===x||40===x||123===x||125===x)break;O++}if(o=r.substring(w,O),l=w,""===o){parser_warn("String expected",r,O,x,E);break}if(z===!0){if(E===d){parser_warn("Invalid interpolation (in tag name)",r,O,o,E);break}if(E===v)if("id"===g||A===h)o=parser_ensureTemplateFunction(o);else if("class"!==g){parser_warn("Invalid interpolation (in attr name)",r,O,o,E);break}}}x!==x&&parser_warn("IndexOverflow",r,O,x,E);var U=S.parent;null!=U&&U!==j&&U.__single!==!0&&null!=S.nodes&&"imports"!==U.tagName&&parser_warn("Tag was not closed: "+S.tagName,r);var B=j.nodes;return null!=B&&1===B.length?B[0]:j}}(),function(){parser_parseAttr=function(t,e,n){for(var r,i,o={},l=e;n>l&&(l=w(t,l,n),l!==n);){for(e=l;n>l&&(i=t.charCodeAt(l),!(61===i||33>i));l++);if(r=t.substring(e,l),l=w(t,l,n),l===n){o[r]=r;break}61===t.charCodeAt(l)?(l=e=w(t,l+1,n),i=t.charCodeAt(l),34!==i&&39!==i?(l=k(t,l,n),o[r]=t.substring(e,l)):(l=y(t,l+1,n,39===i?"'":'"'),o[r]=t.substring(e+1,l),l++)):o[r]=r}return o},parser_parseAttrObject=function(t,e,n,r){var i,o,l,u,s=1,a=2,c=3,f=s;t:for(;n>e&&(e=w(t,e,n),e!==n);){switch(o=e,u=t.charCodeAt(e)){case 61:e++,f=a;continue t;case 123:case 59:case 62:case 47:f=c;break;case 40:e=_(t,++o,n,40,41),null!=l&&(r[l]=l),l="expression",i=t.substring(o,e),e++,f=a;break;case 39:case 34:e=y(t,++o,n,39===u?"'":'"'),i=t.substring(o,e),e++;break;default:for(e++;n>e&&(u=t.charCodeAt(e),!(33>u||61===u||123===u||59===u||62===u||47===u));e++);i=t.substring(o,e)}if(""!==i)if(f!==a){if(null!=l&&(r[l]=l,l=null),f===c)break;l=i}else r[l]=i,f=s,l=null;else parser_warn("Token not readable",t,e),e++}return e}}(),function(){parser_parseLiteral=function(t,e,n){var r=w(t,e,n),i=t.charCodeAt(r);if(34!==i&&39!==i)return parser_error("A quote is expected",t,r),null;var o=!1,l=!1,u=39===i?"'":'"';for(e=++r;(r=t.indexOf(u,r))>-1&&92===t.charCodeAt(r-1);)o=!0,r++;if(-1===r&&(parser_warn("Literal has no ending",t,e-1),r=n),r===e){var s=t.charCodeAt(r+1);s===i&&(l=!0,e=r+2,r=t.indexOf(u+u+u,e),-1===r&&(r=n))}var a=t.substring(e,r);return o===!0&&(a=a.replace(__rgxEscapedChar[u],u)),r+=l?3:1,[a,r]}}(),function(){function t(t,e){for(var n="";t--;)n+=e;return n}function e(t){return null==t.nodes||is_ArrayLike(t.nodes)&&0===t.nodes.length}function n(t){var e=t.nodes;if(null==e)return!0;var n="number"==typeof e.length;if(n&&e.length>1)return!1;var r=n?e[0]:e;return null==r.stringify&&r.type!==Dom.FRAGMENT}function r(t,e,n){if(null==e&&null==n)return!1;var r=t.tagName;return"div"===r}function i(t){return is_ArrayLike(t.nodes)?t.nodes[0]:t.nodes}function o(t){return-1===t.indexOf("'")?"'"+t+"'":-1===t.indexOf('"')?'"'+t+'"':'"'+t.replace(/"/g,'\\"')+'"'}function l(t){return null==t?null:is_Function(t)?t():t}var u={minify:!0,indent:4,indentChar:" "};mask_stringify=function(t,e){if(null==t)return"";if("string"==typeof t&&(t=parser_parse(t)),null==e)e=obj_create(u);else if("number"==typeof e){var n=e;e=obj_create(u),e.indent=n,e.minify=0===n}else e=obj_extendDefaults(e,u),e.indent>0&&(e.minify=!1),e.minify===!0&&(e.indent=0);return new a(t,e).toString()},mask_stringifyAttr=function(t){var e,n,r="";for(e in t)n=l(t[e]),0!==r.length&&(r+=" "),r+=e,n!==e&&(r+="="+o(n));return r};var s,a=class_create({string:"",indent:0,indentStr:"",minify:!1,opts:null,ast:null,constructor:function(e,n){this.opts=n,this.ast=e,this.minify=n.minify,this.indentStr=t(n.indent,n.indentChar)},toString:function(){return this.process(this.ast,this),this.string},process:function(t){if(t.type===Dom.FRAGMENT&&(t=t.nodes),is_ArrayLike(t))for(var e=t.length,n=-1;++n<e;)0!==n&&this.newline(),this.processNode(t[n]);else this.processNode(t)},processNode:function(t){var r=this;if(is_Function(t.stringify)){var l=t.stringify(r);return void(null!=l&&r.write(l))}return is_String(t.content)?void r.write(o(t.content)):is_Function(t.content)?void r.write(o(t.content())):t.type===Dom.FRAGMENT?void this.process(t):(this.processHead(t),e(t)?void r.print(";"):n(t)?(r.openBlock(">"),r.processNode(i(t)),void r.closeBlock(null)):(r.openBlock("{"),r.process(t.nodes),void r.closeBlock("}")))},processHead:function(e){var n,i,u,a=this,c="",f=e.attr;if(null!=f){n=l(f.id),i=l(f["class"]),null!=n&&-1!==n.indexOf(" ")&&(n=null),null!=n&&(c+="#"+n),null!=i&&(c+=s(i));for(var h in f)if(!("id"===h&&null!=n||"class"===h&&null!=i)){var p=f[h];null!=p&&(c+=" "+h,p!==h&&(is_Function(p)&&(p=p()),is_String(p)&&(a.minify===!1||/[^\w_$\-\.]/.test(p))&&(p=o(p)),c+="="+p))}}r(e,n,i)===!1&&(c=e.tagName+c);var u=e.expression;null!=u&&("function"==typeof u&&(u=u()),a.minify===!1&&(c+=" "),c+="("+u+")"),this.minify===!1&&(c=t(this.indent,this.indentStr)+c),a.print(c)},newline:function(){this.minify===!1&&(this.string+="\n")},openBlock:function(t){return this.indent++,this.minify===!1?void(this.string+=" "+t+"\n"):void(this.string+=t)},closeBlock:function(t){this.indent--,null!=t&&(this.newline(),this.write(t))},write:function(e){if(this.minify===!0)return void(this.string+=e);var n=t(this.indent,this.indentStr);this.string+=e.replace(/^/gm,n)},print:function(t){this.string+=t}});!function(){function t(t){return"."+t.trim().replace(/\s+/g,".")}var e="[";s=function(n){var r=n.indexOf(e);if(-1===r)return t(n);var i=0,o=n.length,l="";do r--,r-1>i&&(l+=t(n.substring(i,r))),i=r,r=_(n,r+2,o,91,93)+1,l+="."+n.substring(i,r),i=r+1,r=n.indexOf(e,i);while(o>r&&-1!==r);return o-1>i&&(l+=t(n.substring(i))),l}}()}()}(Dom.Node,Dom.TextNode,Dom.Fragment,Dom.Component);var HtmlDom;!function(){function t(t,n){if("object"==typeof t)return t;var i,o,l,u,s,a,c,f,h,m=0,g=t.length;for(i="up"===n?p:d;g>m;)s=t.charCodeAt(m),33>s||(a=r(t,m+1,g),46===s?(o="class",l=v,u=e(t.substring(m+1,a))):35===s?(o="id",l=v,u=t.substring(m+1,a)):91===s?(f=t.indexOf("=",m),-1===f&&console.error('Attribute Selector: should contain "="'),l=v,o=t.substring(m+1,f),s=t.charCodeAt(f+1),h=34===s||39===s?2:1,u=t.substring(f+h,a-h+1),a++):(l=null,o="tagName",u=t.substring(m,a).toUpperCase()),m=a,null!=c?(null==c.filters&&(c.filters=[]),c.filters.push({key:o,selector:u,prop:l})):c={key:o,prop:l,selector:u,nextKey:i,filters:null});return c}function e(t){return function(e){return-1!==n(e,t)}}function n(t,e,r){if(null==t)return-1;if(null==r&&(r=0),r=t.indexOf(e,r),-1===r)return-1;if(r>0&&t.charCodeAt(r-1)>32)return n(t,e,r+1);var i=t.length,o=e.length;return i-o>r&&t.charCodeAt(r+o)>32?n(t,e,r+1):r}function r(t,e,n){for(var r,i=!1,o=!1;n>e&&(r=t.charCodeAt(e),34!==r&&39!==r||(i=!i),92===r&&(o=!o),!(46===r||35===r||91===r||93===r||33>r)||i===!0||o===!0);)e++;return e}function i(e,n){"string"==typeof n&&(n=t(n));var r=n.prop?e[n.prop]:e,o=!1;if(null==r)return!1;if("function"==typeof n.selector?o=n.selector(r[n.key]):null!=n.selector.test?n.selector.test(r[n.key])&&(o=!0):r[n.key]===n.selector&&(o=!0),o===!0&&null!=n.filters)for(var l,u=0,s=n.filters.length;s>u;u++)if(l=n.filters[u],i(e,l)===!1)return!1;return o}HtmlDom={},obj_extend(Dom,{DOCTYPE:11,UTILNODE:12});var o,l={area:1,base:1,br:1,col:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,menuitem:1,meta:1,param:1,source:1,track:1,wbr:1};!function(){o=function(t){var e,n,r=t.attributes,i="";for(e in r)n=r[e],is_String(n)&&(n=n.replace(/"/g,"&quot;")),i+=" "+e+'="'+n+'"';return i}}();var u,s;!function(){u=function(t,e){return e.parentNode.insertBefore(t,e)},s=function(t){for(;null!=t.firstChild;)t.removeChild(t.firstChild)}}();var a,c;!function(){a=function(t,e){if(null!=t&&t.nodeType===Dom.FRAGMENT&&(t=t.firstChild),null==t)return null;if(t instanceof HtmlDom.Component==!1)return null;if(":document"===t.compoName)return t;if(null==e&&(e=0),4===e)return null;var n;return n=a(t.nextSibling,e),n?n:a(t.firstChild,++e)},c=function(t,e){for(var n=t.firstChild;n&&n.tagName!==e;)n=n.nextSibling;return n}}();var f,h;!function(){function t(t,e){for(var n="";t--;)n+=e;return n}f=class_create({string:"",indent:0,indentStr:"",minify:!1,opts:null,ast:null,constructor:function(e){this.opts=e,this.minify="prettyHtml"in e?e.prettyHtml!==!0:!0,this.indent=0,this.indentStr=t(e.indent||4,e.indentChar||" ")},toString:function(){return this.string},process:function(t){return null==t?this:t.write?(t.write(this),this):(this.write(t.toString()),this)},newline:function(){return this.minify===!1&&(this.string+="\n"),this},openBlock:function(t){return null!=t&&(this.write(t),this.newline()),this.indent++,this},closeBlock:function(t){return this.indent--,null!=t&&(this.newline(),this.write(t)),this},write:function(e){if(null==e)return this;if(this.minify===!0)return this.string+=e,this;var n=t(this.indent,this.indentStr);return this.string+=e.replace(/^/gm,n),this},print:function(t){this.string+=t}}),function(){function t(t){return function(){var e=this.innerStream,n=this.stream;return t.apply(e,arguments),t.apply(n,arguments),this}}h=class_create({constructor:function(t){this.innerStream=t,this.stream=new f(t)},toString:function(){return this.stream.toString()}});var e=f.prototype;for(var n in e)if("toString"!==n){var r=e[n];"function"==typeof r&&(h.prototype[n]=t(r))}}()}(),function(){function t(t){var e=t;if(u(e)===!1)return e;var n=c(e,"HTML");if(null==n){n=document.createElement("html");var r=c(e,"!DOCTYPE");e.removeChild(r);var i=document.createDocumentFragment();i.appendChild(r),i.appendChild(n);for(var o=e.firstChild;null!=o;){var l=o.nextSibling;o!==r&&o!==n&&(e.removeChild(o),n.appendChild(o)),o=l}e=i}var s=c(n,"HEAD"),a=c(n,"BODY");if(null==a){a=document.createElement("body");for(var o=n.firstChild;null!=o;){var l=o.nextSibling;o!==s&&(n.removeChild(o),a.appendChild(o)),o=l}n.appendChild(a)}return e}function e(t,e,n){if(null==e&&null==n)return t;var r=c(t,"HTML"),i=c(r,"BODY");return null!=e&&l(i,e),null!=n&&(l(i,n.header),o(i,n.footer)),t}function n(t,e,n,r){var i=c(e,"HTML");if(null!=i){var u=c(i,"BODY");null!=u?(l(u,n),null!=r&&(l(u,r.header),o(u,r.footer))):log_error("Body not found")}return t}function r(t){var e=t._models.stringify(),n=ctx_stringify(t),r=t._id;if(null==e&&null==n)return null;var i={model:e||"{}",ctx:n,ID:r},o={type:"m"};return{header:new HtmlDom.Comment(Meta.stringify(i,o)),footer:new HtmlDom.Comment(Meta.close(i,o))}}function i(t,e){if(null==t._modules)return null;var n=t._modules.stringify({indent:e?0:4});if(null==n||""===n)return null;var r=Meta.stringify({mask:n},{type:"r",single:!0});return new HtmlDom.Comment(r)}function o(t,e){null!=e&&t.appendChild(e)}function l(t,e){null!=e&&t.insertBefore(e,t.firstChild)}function u(t){if(t.nodeType!==Dom.FRAGMENT)return!1;for(var e=t.firstChild;null!=e;){if(e.nodeType===Dom.DOCTYPE)return!0;e=e.nextSibling}return!1}HtmlDom.stringify=function(o,l,s,c){var h,p,d=t(o),v=u(d),m=new f(s.config||{}),g=null!=c&&null!=c.components&&0!==c.components.length;if(g&&(h=r(s),p=i(s,m.minify)),v&&(d=e(d,p,h)),v||g===!1)return m.process(d),m.toString();var _=a(d);return null!=_?(d=n(d,_,p,h),m.process(d),m.toString()):null==h&&null==p?(m.process(d),m.toString()):(m.process(h&&h.header).newline().process(p).newline().process(d).newline().process(h&&h.footer),m.toString())}}();var p="parentNode",d="firstChild",v="attributes";!function(){HtmlDom.Node=class_create({parentNode:null,firstChild:null,lastChild:null,nextSibling:null,nodeType:null,get length(){for(var t=0,e=this.firstChild;null!=e;)t++,e=e.nextSibling;return t},get childNodes(){for(var t=[],e=this.firstChild;null!=e;)t.push(e),e=e.nextSibling;return t},get ownerDocument(){return new e(this)},querySelector:function(e){for(var n,r="string"==typeof e?t(e):e,o=this.firstChild;null!=o;o=o.nextSibling)if(i(o,r))return o;if(null!=o)return o;for(o=this.firstChild;null!=o;o=o.nextSibling)if("function"==typeof o.querySelector&&(n=o.querySelector(r),null!=n))return n;return null},appendChild:function(t){if(null==t)return t;if(t.nodeType===Dom.FRAGMENT){var e=t;if(null==e.firstChild)return e;for(var n=e.firstChild;;){if(n.parentNode=this,null==n.nextSibling)break;n=n.nextSibling}return null==this.firstChild?this.firstChild=e.firstChild:e.lastChild.nextSibling=e.firstChild,e.lastChild=e.lastChild,e}return null==this.firstChild?this.firstChild=this.lastChild=t:(this.lastChild.nextSibling=t,this.lastChild=t),t.parentNode=this,t},insertBefore:function(t,e){var n=this.firstChild;if(n!==e)for(;null!=n&&n.nextSibling!==e;)n=n.nextSibling;if(null==n)return this.appendChild(t);if(t.nodeType===Dom.FRAGMENT){var r=t,i=r.firstChild;if(null==i)return r;for(;null!=i;)i.parentNode=this,i=i.nextSibling;return n===e&&n===this.firstChild?(this.firstChild=r.firstChild,r.lastChild.nextSibling=n,r):(n.nextSibling=r.firstChild,r.lastChild.nextSibling=e,r)}return t.parentNode=this,n===e&&n===this.firstChild?(this.firstChild=t,t.nextSibling=n,t):(n.nextSibling=t,t.nextSibling=e,t)},removeChild:function(t){if(null!=t){for(var e=this.firstChild,n=null;null!=e&&e!==t;)n=e,e=e.nextSibling;null!=e&&(null==n?this.firstChild=e.nextSibling:n.nextSibling=e.nextSibling,this.lastChild===e&&(this.lastChild=n),t.nextSibling=null,t.parentNode=null)}}});var e=class_create({_el:null,_document:null,_body:null,constructor:function(t){this._el=t},get body(){if(null!=this._body)return this._body;for(var t,e=this._el;null!=e;){if(e.nodeType===Dom.NODE&&(t=e),"BODY"===e.tagName||null==e.parentNode)return this._body=t;e=e.parentNode}return null}})}(),HtmlDom.DocumentFragment=class_createEx(HtmlDom.Node,{nodeType:Dom.FRAGMENT,toString:function(){for(var t=this.firstChild,e="";null!=t;)e+=t.toString(),t=t.nextSibling;return e},write:function(t){for(var e=this.firstChild;null!=e;)is_Function(e.write)?e.write(t):t.write(e.toString()),e=e.nextSibling,null!=e&&t.newline();return t}}),function(){function t(t){null==t.attributes,this.attr=t.attributes,this.className=this.attr["class"]||""}t.prototype={get length(){return this.className.split(/\s+/).length},contains:function(t){return-1!==n(this.className,t)},remove:function(t){var e=n(this.className,t);if(-1!==e){var r=this.className;this.className=this.attr["class"]=r.substring(0,e)+r.substring(e+t.length)}},add:function(t){-1===n(this.className,t)&&(this.className=this.attr["class"]=this.className+(""===this.className?"":" ")+t)}},HtmlDom.Element=class_createEx(HtmlDom.Node,{nodeType:Dom.NODE,constructor:function(t){this.tagName=t.toUpperCase(),this.attributes={}},setAttribute:function(t,e){this.attributes[t]=e},getAttribute:function(t){return this.attributes[t]},get classList(){return new t(this)},toString:function(){var t,e=this.tagName.toLowerCase(),n="<"+e,r=o(this);""!==r&&(n+=r);var i=1===l[e],t=this.firstChild;if(null==t)return n+(i?"/>":"></"+e+">");for(n+=i?"/>":">",i&&(n+="<!--~-->");null!=t;)n+=t.toString(),t=t.nextSibling;return i?n+"<!--/~-->":n+"</"+e+">"},write:function(t){var e,n=this.tagName.toLowerCase(),r=t.minify;r===!1&&"pre"===n&&(t.minify=!0);var i="<"+n,u=o(this);""!==u&&(i+=u),t.write(i);var s=1===l[n],e=this.firstChild;if(null==e)return t.print(s?"/>":"></"+n+">"),t.minify=r,t;for(t.print(s?"/>":">"),s&&(t.newline(),t.write("<!--~-->"));null!=e;)t.openBlock(null),t.newline(),t.process(e),t.closeBlock(null),e=e.nextSibling;return s&&(t.newline(),t.write("<!--/~-->")),t.newline(),t.write("</"+n+">"),t.minify=r,t},get value(){return this.attributes.value},set value(t){this.attributes.value=t},get selected(){return this.attributes.selected},set selected(t){return t?void(this.attributes.selected="selected"):void delete this.attributes.selected},get checked(){return this.attributes.checked},set checked(t){return t?void(this.attributes.checked="checked"):void delete this.attributes.checked},get textContent(){for(var t=this.firstChild,e="";null!=t;)t.nodeType!==Node.TEXTNODE?(e+=t.textContent||"",t=t.nextSibling):e+=t.textContent;return e},set textContent(t){s(this),this.appendChild(document.createTextNode(t))}})}(),function(){function t(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}HtmlDom.TextNode=class_create({nodeType:Dom.TEXTNODE,nextSibling:null,textContent:"",constructor:function(t){this.textContent=String(null==t?"":t)},toString:function(){return t(this.textContent)}})}(),function(){function t(t){for(var e=t.firstChild,n="";null!=e;)n+=e.toString(),e=e.nextSibling;return n}function e(t,e){for(var n=t.firstChild;null!=n;)e.process(n),n=n.nextSibling,null!=n&&e.newline()}function n(t,e){var n=t.serializeNodes;if(null==n||n===!1)return null;var r=null;return is_Function(n)&&(r=n),null==r&&is_Function(e.compo.serializeNodes)&&(r=e.compo.serializeNodes),null==r&&(r=mask_stringify),r.call(e.compo,e.node)}function r(t,e){if(null==t.serializeScope)return null;var n=e.scope;if(null==n)return null;for(var r=e.parent,i=e.model;null==i&&null!=r;)i=r.model,r=r.parent;return e.serializeScope(n,i)}var i,o,l;!function(){function t(t,e,n,r,i,o){null!=t.tagName&&t.tagName!==t.compoName&&(t.nodes={tagName:t.tagName,attr:t.attr,nodes:t.nodes,type:1}),null!=t.model&&(e=t.model);var l=t.nodes,u=[];if(null!=l){for(var s=l instanceof Array,a=s===!0?l.length:1,c=0,f=null,h=document.createDocumentFragment();a>c;c++)f=s===!0?l[c]:l,builder_build(f,e,n,h,t,u);r.parentNode.insertBefore(h,r)}if(null==t.tagName){var p,d,v=t.handlers&&t.handlers.attr;for(d in t.attr)p=null,v&&is_Function(v[d])&&(p=v[d]),null==p&&is_Function(custom_Attributes[d])&&(p=custom_Attributes[d]),null!=p&&p(r,t.attr[d],e,n,u[0],t)}if(is_Function(o)&&o.call(t,u,e,n,r.parentNode),null!=i&&i!==u)for(var m=i.length,g=u.length,_=-1;++_<g;)i[m+_]=u[_]}i=function(e,n,r,i,o,l){var u=document.createComment("");return i.appendChild(u),function(){return t(e,n,r,u,o,l)}},o=function(t,e){var n=t.components;return null==n?void(t.components=[e]):void n.push(e)},l=function(t,e,n,r,i){var o=e.attr;if(null==o)o={};else{o=obj_create(o);for(var l in o){var u=o[l];"function"==typeof u&&(o[l]=u("compo-attr",n,r,i,t,l))}}var s=t.meta&&t.meta.readAttributes;null!=s&&s.call(t,t,o,n,i);var a=t.attr;for(var l in a){var c=o[l],f=null;if(null==c||"class"===l){var h=a[l];f=is_Function(h)?h("compo-attr",n,r,i,t,l):h}"class"!==l?null==c&&(o[l]=f):o[l]=null==c?f:c+" "+f}return t.attr=o}}(),HtmlDom.Component=class_createEx(HtmlDom.Node,{nodeType:Dom.COMPONENT,compoName:null,compo:null,node:null,instance:null,components:null,ID:null,modelID:null,constructor:function(t,e,n,r,i){this.node=t,this.compoName=t.compoName||t.tagName},setComponent:function(t,e,n){this.ID=t.ID,this.compo=t,this.setModelId_(t,e,n)},setModelId_:function(t,e,n){if(!meta_getModelMode(t).isServer()){if(t.modelRef){var r=n._models.tryAppend(t);return void(-1!==r&&(this.modelID=r))}if(null!=t.model&&t.model!==e){var r=n._models.tryAppend(t);-1!==r&&(this.modelID=r)}}},initModelID:function(t,e){var n=this.compo;if(!meta_getModelMode(n).isServer()){if(n.modelRef){var r=t._models.tryAppend(n);return void(-1!==r&&(this.modelID=r))}if(null!=n.model&&n.model!==e){var r=t._models.tryAppend(n);-1!==r&&(this.modelID=r)}}},toString:function(){var e=this.compo;if(null!=e.__cached)return e.__cached;var i=meta_get(e);if(i.mode===mode_CLIENT){var o={mask:mask_stringify(this.node,0)},l={type:"r",single:!0},u=Meta.stringify(o,l);return i.cache&&(e.__cached=u),u}var o={ID:this.ID,modelID:this.modelID,compoName:e.compoName,attr:e.attr,expression:e.expression,nodes:n(i,this),scope:r(i,e)},l={single:null==this.firstChild,type:"t",mode:i.mode},u=Meta.stringify(o,l);return u+=null!=e.toHtml?e.toHtml():t(this),i.mode!==mode_CLIENT&&(u+=Meta.close(o,l)),i.cache&&(e.__cached=u),u},write:function(t){var i=this.compo,o=i.__cached;if("string"==typeof o)return void t.write(o);var l=null,u=meta_get(i);if(u.cache&&(l=new h(t),t=l),u.mode===mode_CLIENT){var s={mask:mask_stringify(this.node,t.minify?0:4)},a={type:"r",single:!0};return t.write(Meta.stringify(s,a)),void(null!=l&&(i.__cached=l.toString()))}var s={ID:this.ID,modelID:this.modelID,compoName:i.compoName,attr:i.attr,expression:i.expression,nodes:n(u,this),scope:r(u,i)},a={single:null==this.firstChild&&null==i.toHtml,type:"t",mode:u.mode},c=Meta.stringify(s,a);c&&t.openBlock(c),null!=i.toHtml?t.write(i.toHtml()):e(this,t);var f=Meta.close(s,a);f&&t.closeBlock(f),null!=l&&(i.__cached=l.toString())}})}(),function(){HtmlDom.DOCTYPE=class_createEx(HtmlDom.Element,{nodeType:Dom.DOCTYPE,toString:function(e){return t},write:function(e){e.write(t)}});var t="<!DOCTYPE html>"}(),function(){HtmlDom.UtilNode=class_create({nodeType:Dom.UTILNODE,nextSibling:null,firstChild:null,constructor:function(t,e,n,r){this.meta={utilType:t,utilName:e,value:n,attrName:r,current:null}},appendChild:function(t){this.firstChild=t},toString:function(){var t=this.meta,e={type:"u",single:null==this.firstChild},n=Meta.stringify(t,e);return null==this.firstChild?n:n+this.firstChild.toString()+Meta.close(t,e)}})}(),function(){function t(t){if(60!==t.charCodeAt(0)&&33!==t.charCodeAt(1)&&45!==t.charCodeAt(1)&&45!==t.charCodeAt(2))return!1;var e=t.length;return 62===t.charCodeAt(--e)||45===t.charCodeAt(--e)||45===t.charCodeAt(--e)}function e(t){return t.slice(4,-3)}HtmlDom.Comment=class_create({nextSibling:null,parentNode:null,textContent:"",constructor:function(n){var r=n;null!=r&&(t(r)&&(r=e(r)),this.textContent=r.replace(/\-\->/g,"--&gt;"))},toString:function(){return""===this.textContent?"":"<!--"+this.textContent+"-->"}})}(),function(){HtmlDom.ScriptElement=class_createEx(HtmlDom.Element,{textContent:"",toString:function(){var t="<script",e=o(this);""!==e&&(t+=" "+e),t+=">";var n=is_Function(this.textContent)?this.textContent():this.textContent;return n&&(t+=n),t+="</script>"},write:function(t){var e="<script",n="</script>",r=o(this);""!==r&&(e+=" "+r),e+=">";var i=is_Function(this.textContent)?this.textContent():this.textContent;return i?void t.openBlock(e).write(i).closeBlock(n):void t.write(e+n)}})}(),function(){document={createDocumentFragment:function(){
return new HtmlDom.DocumentFragment},createElement:function(e){var n=t[e.toLowerCase()]||HtmlDom.Element;return new n(e)},createTextNode:function(t){return new HtmlDom.TextNode(t)},createComment:function(t){return new HtmlDom.Comment(t)},createComponent:function(t,e,n,r,i){return new HtmlDom.Component(t,e,n,r,i)}};var t={a:null,abbr:null,article:null,aside:null,audio:null,b:null,big:null,blockquote:null,br:null,button:null,canvas:null,datalist:null,details:null,div:null,em:null,fieldset:null,footer:null,form:null,h1:null,h2:null,h3:null,h4:null,h5:null,h6:null,header:null,i:null,img:null,input:null,label:null,legend:null,li:null,menu:null,nav:null,ol:null,option:null,p:null,pre:null,section:null,select:null,small:null,span:null,strong:null,script:HtmlDom.ScriptElement,svg:null,table:null,tbody:null,td:null,textarea:null,tfoot:null,th:null,thead:null,tr:null,tt:null,ul:null,video:null,"!doctype":HtmlDom.DOCTYPE}}()}();var builder_componentID=0,builder_build,builder_buildSVG,builder_Ctx,builder_CtxModels,builder_CtxModules;!function(){function t(t,e){return e.createElement(t)}!function(){function t(t,e){if(null==e)return-1;null==t._models&&(t._models={});var n="m"+ ++t._id;return t._models[n]=e,n}builder_CtxModels=class_create({constructor:function(t,e){this._models=null,this._id=e||0,this.append(t)},append:function(e){return t(this,e)},tryAppend:function(e){if(meta_getModelMode(e).isServer())return-1;if(null==e.modelRef)return t(this,e.model);for(var n=e.parent;null!=n;){if(meta_getModelMode(n).isServer())return-1;n=n.parent}var r="$ref:"+e.modelRef;return t(this,r)},stringify:function(){return e(this._models)}});var e;!function(){var t="undefined"!=typeof Class&&is_Function(Class.stringify)?Class.stringify:JSON.stringify;e=function(e){return null==e?null:t(e)}}()}(),function(){function t(t){var e=new mask.Dom.Node("module"),n=path_toRelative(t.path,path_resolveCurrent());return path_isRelative(n)&&(n="/"+n),e.attr={path:n},e.nodes=t.source,e}builder_CtxModules=class_create({constructor:function(){this._modules=[]},add:function(t,e){if(null!=t&&null==t.error){this.push(t,e);var n=t.imports;if(null!=n)for(var r=n.length,i=-1;++i<r;)this.add(n[i].module,t)}},push:function(t,e){var n=this._modules,r=n.indexOf(t);if(-1===r)n.unshift(t);else if(null!=e){var i=n.indexOf(e);r>i&&(n.splice(r,1),n.splice(i,0,t))}},stringify:function(e){for(var n,r=this._modules,i=[],o=r.length,l=-1;++l<o;)n=r[l],"mask"===n.type&&i.push(t(n));return mask_stringify(i,e)}})}();var e;!function(){function t(t,e,n,r,i,o){return is_Function(t)?new t(e,n,r,i,o):is_Function(t.__Ctor)?new t.__Ctor(e,n,r,i,o):t}e=function(e,o,l,u,s,a){var c=e.compoName||e.tagName,f=e.controller||custom_Tags[c]||obj_create(e),h=meta_get(f).cache||!1;if(h){var p=Cache.getCompo(o,l,c,f);if(null!=p)return p.__cached&&(p.render=fn_doNothing),r(s,p),p}var p=t(f,e,o,l,u,s),h=meta_get(p).cache;h&&Cache.cacheCompo(o,l,c,p,h),null==p.compoName&&(p.compoName=c),null==p.model&&(p.model=o),null==p.nodes&&(p.nodes=e.nodes),null==p.expression&&(p.expression=e.expression),p.attr=obj_extend(p.attr,e.attr),p.parent=s;var d,v,m=p.attr;for(d in m)v=m[d],is_Function(v)&&(m[d]=v("attr",o,l,u,s,d));var g=meta_getRenderMode(p);meta_getModelMode(p);if(g.isServer()===!1&&(p.ID=++l._id),g.isClient()===!0)return p.render=fn_doNothing,p;if(i(p,e,o,l,u),is_Function(p.renderStart)&&p.renderStart(o,l,u),r(s,p),p.async===!0){var _=n(p,o,l,a,null,p.onRenderEndServer);return p.await(_),p}return compo_wrapOnTagName(p,e),is_Function(p.render)&&p.render(o,l,a,p),p}}(),function(){builder_Ctx=class_create(class_Dfr,{constructor:function(t){obj_extend(this,t)},async:!1,defers:null,_id:null,_models:null,_modules:null,_redirect:null,_rewrite:null})}();var n,r,i;!function(){function t(t,e,n,r,i,o){null!=t.tagName&&t.tagName!==t.compoName&&(t.nodes={tagName:t.tagName,attr:t.attr,nodes:t.nodes,type:1}),null!=t.model&&(e=t.model);var l=t.nodes,u=[];if(null!=l){for(var s=l instanceof Array,a=s===!0?l.length:1,c=0,f=null,h=document.createDocumentFragment();a>c;c++)f=s===!0?l[c]:l,builder_build(f,e,n,h,t,u);r.parentNode.insertBefore(h,r)}if(null==t.tagName){var p,d,v=t.handlers&&t.handlers.attr;for(d in t.attr)p=null,v&&is_Function(v[d])&&(p=v[d]),null==p&&is_Function(custom_Attributes[d])&&(p=custom_Attributes[d]),null!=p&&p(r,t.attr[d],e,n,u[0],t)}if(is_Function(o)&&o.call(t,u,e,n,r.parentNode),null!=i&&i!==u)for(var m=i.length,g=u.length,_=-1;++_<g;)i[m+_]=u[_]}n=function(e,n,r,i,o,l){var u=document.createComment("");return i.appendChild(u),function(){return t(e,n,r,u,o,l)}},r=function(t,e){var n=t.components;return null==n?void(t.components=[e]):void n.push(e)},i=function(t,e,n,r,i){var o=e.attr;if(null==o)o={};else{o=obj_create(o);for(var l in o){var u=o[l];"function"==typeof u&&(o[l]=u("compo-attr",n,r,i,t,l))}}var s=t.meta&&t.meta.readAttributes;null!=s&&s.call(t,t,o,n,i);var a=t.attr;for(var l in a){var c=o[l],f=null;if(null==c||"class"===l){var h=a[l];f=is_Function(h)?h("compo-attr",n,r,i,t,l):h}"class"!==l?null==c&&(o[l]=f):o[l]=null==c?f:c+" "+f}return t.attr=o}}();var o;!function(){o=function(t,r,i,o,l,u){var s=n(t.tagName);if(null!=s){if(null!=u){u.push(s);var a=l.ID;null!=a&&s.setAttribute("x-compo-id",a)}null!=o&&o.appendChild(s);var c=t.attr;return null!=c&&e(s,t,c,r,i,o,l),s}};var e;!function(){function t(t,e,n,r,i,o){var l=t("attr",n,r,i,o,e);return null==l?null:"string"==typeof l?l:is_ArrayLike(l)?0===l.length?null:l.join(""):l}e=function(e,n,r,i,o,l,u){for(var s in r){var a=r[s],c=is_Function(a)?t(a,s,i,o,e,u):a;if(null!=c&&""!==c){var f=custom_Attributes[s];null!=f?f(n,c,i,o,e,u,l):e.setAttribute(s,c)}}}}();var n;!function(t,e){n=function(n){try{return e(n,t)}catch(r){return log_error(n,"element cannot be created. If this should be a custom handler tag, then controller is not defined"),null}}}(document,t)}();var l;!function(){l=function(e,n,r,i,o){var l=e.content;if(is_Function(l)){var u=l("node",n,r,i,o);if("string"==typeof u)return void t(i,u);for(var s,a="",c=u.length,f=0;c>f;f++)if(s=u[f],"object"!=typeof s)a+=s;else{if(""!==a&&(t(i,a),a=""),null==s.nodeType){a+=s.toString();continue}i.appendChild(s)}return void(""!==a&&t(i,a))}t(i,l)};var t;!function(e){t=function(t,n){t.appendChild(e.createTextNode(n))}}(document)}(),function(){function t(r,i,u,s,a,c){if(null==r)return s;if(null!=u._redirect||null!=u._rewrite)return s;var f,h,p=node_getType(r);if(10===p){var d,v=r.length;for(d=0;v>d;d++)t(r[d],i,u,s,a);return s}var m=r.tagName;if("else"===m)return s;if(15===p){var g=custom_Statements[m];if(null==g){if(null==custom_Tags[m])return log_error("<mask: statement is undefined",m),s;p=4}if(15===p)return g.render(r,i,u,s,a,c),s}if(1===p&&(58===m.charCodeAt(0)?(p=4,r.mode=mode_CLIENT,r.controller=mock_TagHandler.create(m,null,mode_CLIENT)):(s=o(r,i,u,s,a,c),c=null)),2===p)return l(r,i,u,s,a),s;if(4===p){f=document.createComponent(r,i,u,s,a),s.appendChild(f);var _=e(r,i,u,s,a,f);if(null!=_){if(f.setComponent(_,i,u),_.async)return s;if(_.render)return s;_.model&&_.model!==i&&(i=_.model),a=_,r=_,h=[]}s=f}if(n(r,i,u,s,a,h),s.nodeType===Dom.COMPONENT){var y=a.onRenderEndServer;null!=y&&a.async!==!0&&y.call(a,h,i,u,s,a)}return arr_pushMany(c,h),s}function n(e,n,r,i,o,l){var u=e.nodes;if(null!=u){if(is_ArrayLike(u)===!1)return void t(u,n,r,i,o,l);var s,a=u.length;for(s=0;a>s;s++)t(u[s],n,r,i,o,l)}}builder_build=function(e,n,r,i,o,l){return null==i&&(i=document.createDocumentFragment()),null==o&&(o=new Dom.Component),null==r&&(r=new builder_Ctx),null==r._models&&(r._models=new builder_CtxModels(n,Cache.modelID)),null==r._modules&&(r._modules=new builder_CtxModules),null==r._id&&(r._id=Cache.controllerID),t(e,n,r,i,o,l)}}(),builder_buildSVG=builder_build}();var mask_run;!function(){function t(t,i,l,u){function s(){0===--d&&p&&a()}function a(){is_Function(u.renderEnd)&&u.renderEnd(l,t),Compo.signal.emitIn(u,"domInsert")}u.ID=++builder_componentID;for(var c=_Array_slice.call(document.getElementsByTagName("script")),f=null,h=!1,p=!1,d=0,v=c.length,m=-1;++m<v;){f=c[m];var g=f.getAttribute("type");if("text/mask"===g||"text/x-mask"===g){var _=f.getAttribute("data-run");if(null!=_&&!("auto"===_&&e(n)===!1||"true"===_&&e(r)===!1)){h=!0;var y=new builder_Ctx(i),b=builder_build(parser_parse(f.textContent),t,y,null,u);y.async===!0&&(d++,y.done(s)),f.parentNode.insertBefore(b,f)}}}if(h===!1){if(o===n)return null;log_warn("No blocks found: <script type='text/mask' data-run='true'>...</script>")}return p=!0,0===d&&a(),u}function e(t){return(o&t)===t}mask_run=function(){0===o&&(o=i);for(var e,n,r,l,u,s=_Array_slice.call(arguments),a=s.length,c=-1;++c<a;)if(u=s[c],u instanceof Node)r=u;else if(is_Function(u))l=u;else if(is_Object(u)){if(null==e){e=u;continue}n=u}null==r&&(r=document.body),null==l&&(l=Compo),null==e&&(e={});var f=new l(null,e,n,r);return t(e,n,r,f)},null!=document&&document.addEventListener&&document.addEventListener("DOMContentLoaded",function(t){if(0===o){var e;if(o=n,e=mask_run(),o=r,null!=e){if(null==global.app)return void(global.app=e);var i=e.components;if(null!=i&&0!==i.length){var l=global.app.components;return null==l||0===l.length?void(global.app.components=i):void l.push.apply(l,i)}}}});var n=2,r=4,i=n|r,o=0}();var mask_merge;!function(){function t(t,o,l,u){if(null==t)return null;var a;if(is_Array(t))a=e;else switch(t.type){case S:a=s;break;case k:case j:a=i;break;case N:a=n;break;case E:a=r}return void 0!==a?a(t,o,l,u):(log_warn("Uknown type",t.type),null)}function e(e,n,r,i){if(null==e)return null;for(var o,l,u=[],s=e.length,a=-1;++a<s;){if(l=e[a],l.tagName===b){if(null!=o)continue;if(l.expression&&!g(l.expression,n,r))continue;o=t(e[a].nodes,n,r,i)}else o=t(l,n,r,i);p(u,o)}return u}function n(t,n,r,i){var o=new Dom.Fragment;return o.parent=i,o.nodes=e(t.nodes,n,r,o),o}function r(e,n,r,i){if(null==e.nodes)return e;var o=new Dom.Component;return obj_extend(o,e),o.nodes=t(o.nodes,n,r,i),o}function i(e,n,r,i){var u=e.tagName;if(64!==u.charCodeAt(0))return l(e,n,r,i);var s=e.attr.id;if(u===C&&null==s){if(null!=r){var a=r.tagName;if(null!=a&&64===r.tagName.charCodeAt(0))return r.nodes}s="$root",n.$extra=null}if(w===u){var c,f=n.$getNode(e.expression);if(null==f)return null==e.attr.optional&&error_withNode("No template node: @"+e.expression,e),null;if(is_Array(f)===!1)return c=f,t(e.nodes,d(c.nodes,c.nodes,new _(n)),c,i);for(var h=new Dom.Fragment,v=f.length,y=-1;++y<v;)c=f[y],p(h,t(e.nodes,d(c.nodes,c.nodes,new _(n)),c,i));return h}if(x===u){var b=g(e.expression,n,r);return b?t(e.nodes,n,r,i):null}null==s&&(s=u.substring(1));var S=n.$getNode(s,e.expression);if(null==S)return n.opts.extending===!0?e:null;S.parent&&m(i,S.parent);var N,j=S.nodes;if(void 0!==e.attr.as){var a=e.attr.as;N={type:k,tagName:a,attr:o(e.attr,S.attr,n,r),parent:i,nodes:j},N.attr.as=null}if(null==e.nodes)return t(N||j,n,r,i);var E=t(e.nodes,d(j,j,new _(n)),S,N||i);return null!=N?(N.nodes=E,N):E}function o(t,e,n,r){if(null==t||null==e)return t||e;var i=a(t,n,r);for(var o in e)i[o]=c(e[o],n,r);return i}function l(e,n,r,i){var o=e.tagName||e.compoName;switch(o){case":template":var l=c(e.attr.id,n,r);return Mask.templates.register(l,e.nodes),null;case":import":var l=c(e.attr.id,n,r),s=Mask.templates.resolve(e,l);return t(s,n,r,i);case"define":case"function":case"var":case"import":case"script":case"style":case"slot":case"event":return e;case"include":var o=e.attr.id;null==o&&(o=attr_first(e.attr)),o=c(o,n,r);var a=customTag_get(o,r);if(null!=a){var f=a.prototype,h=f.template||f.nodes;return n=d(e.nodes,e.nodes,new _(n,e.nodes)),t(h,n,r,i)}break;default:var a=customTag_get(o,r);if(null!=a){var f=a.prototype;if(f&&null!=f.meta&&"merge"===f.meta.template)return u(e,i,n,r)}}var p=u(e,i,n,r);return p.nodes&&(p.nodes=t(e.nodes,n,r,p)),p}function u(t,e,n,r){return{type:t.type,tagName:t.tagName,attr:a(t.attr,n,r),expression:c(t.expression,n,r),controller:t.controller,parent:e,nodes:t.nodes}}function s(t,e,n,r){return{type:t.type,content:c(t.content,e,n),parent:r}}function a(t,e,n){var r,i=_Object_create(t);for(var o in i)r=i[o],null!=r&&(i[o]=c(r,e,n));return i}function c(t,e,n){var r=-1,i=!1,o=t;if("function"==typeof t&&(i=!0,o=t()),"string"!=typeof o||-1===(r=o.indexOf("@")))return t;for(var l,u=o.substring(0,r),s=o.length,a=91===o.charCodeAt(r+1),c=-1;s>r;){if(c=r,a===!0)r=o.indexOf("]",c),-1===r&&(r=s),c+=2;else for(;s>r&&(l=o.charCodeAt(++r),36===l||95===l||46===l||l>=48&&57>=l||l>=65&&90>=l||l>=97&&122>=l););var h=o.substring(c,r),p=a?g:f,d=p(h,e,n);null!=d?u+=d:e.opts.extending===!0&&(u+=a?"@["+h+"]":h),c=a?r+1:r,r=o.indexOf("@",r),-1===r&&(r=s),u+=o.substring(c,r)}return i?parser_ensureTemplateFunction(u):u}function f(t,e,n){var r=t.indexOf(".");if(-1===r)return log_warn("Merge templates. Accessing node",t),null;var i=t.substring(0,r),o=i.substring(1),l=t.substring(r+1),u=null;if(null!=n){if("@attr"===i)return h(n,e,l);if("@counter"===i)return y(l);i===n.tagName&&(u=n)}return null==u&&(u=e.$getNode(o)),null==u?null:obj_getProperty(u,l)}function h(t,e,n){for(var r=t.attr&&t.attr[n],i=e;null==r&&null!=i;)r=i.attr&&i.attr[n],i=i.parent;return r}function p(t,e){if(null!=e)if("function"!=typeof e.concat){if(e.type===N)return void p(t,e.nodes);if("function"==typeof t.appendChild)return void t.appendChild(e);var n=t.length;if(n>0){var r=t[n-1];r.nextSibling=e}t.push(e)}else for(var i=e.length,o=0;i>o;o++)p(t,e[o])}function d(t,e,n){if(null==e)return n;if(is_Array(e)){for(var r=e.length,i=-1;++i<r;)d(e===t?e[i]:t,e[i],n);return n}var o=e.type;if(o===S)return n;if(o===k){var l=e.tagName;if(null!=l&&64===l.charCodeAt(0)){n.$count++;var u=l.substring(1);-1!==A.indexOf(" "+u+" ")&&log_error("MaskMerge. Reserved Name",u);var s={tagName:e.tagName,parent:v(t,e),nodes:e.nodes,attr:e.attr,expression:e.expression};if(null==n[u])n[u]=s;else{var a=n[u];is_Array(a)?a.push(s):n[u]=[a,s]}return n}}var c=n.$count,f=d(t,e.nodes,n);return t===e&&c===n.$count&&n.$extra.push(t),f}function v(t,e){if(e===t)return null;for(var n,r,i=e.parent;;){if(null==i)break;if(i===t&&t.type!==k)break;var o={type:i.type,tagName:i.tagName,attr:i.attr,controller:i.controller,expression:i.expression,nodes:null,parent:null};null==r?n=r=o:(n.parent=o,n=o),i=i.parent}return r}function m(t,e){for(var n=t,r=e;null!=n&&null!=r;){r.tagName&&(n.tagName=r.tagName),r.expression&&(n.expression=r.expression);for(var i in r.attr)n.attr[i]=r.attr[i];n=n.parent,r=r.parent}}function g(t,e,n){return null!=n&&(e.attr=n.attr),expression_eval(t,e,null,e)}function _(t,e,n){var r=null;null!=e&&(r=new Dom.Node(C),r.nodes=e),this.scope=this,this.parent=t,this.$root=r||t&&t.$root,this.$extra=[],null!=n?this.opts=n:null!=t&&(this.opts=t.opts)}mask_merge=function(e,n,r,i){if("string"==typeof e&&(e=parser_parse(e)),"string"==typeof n&&(n=parser_parse(n)),null==e||is_ArrayLike(e)&&0===e.length)return n;var o=d(n,n,new _(null,n,i)),l=t(e,o,r),u=o.$extra;return null!=u&&0!==u.length?is_Array(l)?l.concat(u):[l].concat(u):l};var y,b="@else",x="@if",w="@each",C="@placeholder",k=Dom.NODE,S=Dom.TEXTNODE,N=Dom.FRAGMENT,j=Dom.STATEMENT,E=Dom.COMPONENT;!function(){var t={};y=function(e){var n=t[e]||0;return t[e]=++n}}();var A=" else placeholder each attr if parent scope";_.prototype={opts:{extending:!1},parent:null,attr:null,scope:null,$root:null,$extra:null,$count:0,$getNode:function(t,e){for(var n,r=this;null!=r&&(n=r[t],null==n);)r=r.parent;return null!=e&&null!=n&&(n={nodes:jmask(n.nodes).filter(e)}),n}}}();var mask_optimize,mask_registerOptimizer;!function(){function t(t){return t.type!==Dom.NODE?null:custom_Optimizers[t.tagName]}mask_optimize=function(e,n){mask_TreeWalker.walkAsync(e,function(e,n){var r=t(e);return null!=r?void r(e,n):void n()},n)},mask_registerOptimizer=function(t,e){custom_Optimizers[t]=e}}();var Module;!function(){function t(t,e){this.path=t,this.contentType=e}Module={};var e,n,r,i,o,l={},u=" css sass scss less ",s=" json ",a={base:null,version:null};!function(){function t(t,n,i,o){var l=t;return path_isRelative(l)?l=path_combine(e(n,i,o),l):47===l.charCodeAt(0)&&(l=path_combine(r(),l)),path_normalize(l)}e=function(t,e,n){if(null!=n)return n.location;for(;null!=e;){if(null!=e.location)return e.location;if(null!=e.resource&&e.resource.location)return e.resource.location;e=e.parent}var i=null;null!=t&&(null!=t.filename&&(i=path_getDir(path_normalize(t.filename))),null!=t.dirname&&(i=path_normalize(t.dirname+"/")));var o=r();return null!=i?path_isRelative(i)===!1?47===i.charCodeAt(0)?path_normalize(path_combine(o,i)):i:path_combine(o,i):o},r=function(){return null==a.base?a.base=path_resolveCurrent():path_isRelative(a.base)===!0&&(a.base=path_combine(path_resolveCurrent(),a.base)),a.base},n=function(e,n,r,i){return""===path_getExtension(e)&&(e+=".mask"),t(e,n,r,i)},i=function(e,n,r,i){var o=e.path;if(""===path_getExtension(o)){var l=e.contentType;null!=l&&"mask"!==l||(o+=".mask")}return t(o,n,r,i)},o=function(t,e,n){return function(r){return r===t?e:null!=n?n(r):null}}}();var c,f,h,p;!function(){function t(t){return function(e){var n=t(),r=e,i=a.version;return null!=i&&(r=path_appendQuery(r,"v",i)),n(r)}}c=t(function(){return __cfg.getFile||file_get}),f=t(function(){return __cfg.getScript||file_getScript}),h=t(function(){return __cfg.getStyle||file_getStyle}),p=t(function(){return __cfg.getData||file_getJson}),listeners_on("config",function(t){var n=t.modules;if(null!=n){var r=e[n];return is_Function(r)===!1?void log_warn("Module system is not supported: "+n):void r()}});var e={"default":function(){__cfg.getScript=__cfg.getFile=null},include:function(){function t(t){return function(n){return class_Dfr.run(function(r,i){e.instance("/")[t](n+"::Module").done(function(e){return"css"===t?r():"js"===t?r(e.Module):void r(e[t].Module)})})}}__cfg.getScript=t("js"),__cfg.getStyle=t("css"),__cfg.getFile=t("load");var e=include}};"undefined"!=typeof include&&is_Function(include&&include.js)&&mask_config("modules","include")}();var d=class_create({type:null,contentType:null,constructor:function(e,n,r,i,o){this.path=e,this.alias=r,this.exports=i,this.async=n;var l=new t(e,this.contentType);this.module=Module.createModule(l,o),this.parent=o},eachExport:function(t){var e=this.alias;if(null!=e)return void t.call(this,e,"*",e);var n=this.exports;if(null!=n)for(var r=n.length,i=-1;++i<r;){var o=n[i];t.call(this,null==o.alias?o.name:o.alias,o.name,o.alias)}},hasExport:function(t){if(this.alias===t)return!0;var e=this.exports;if(null!=e)for(var n=e.length,r=-1;++r<n;){var i=e[r],o=null==i.alias?i.name:i.alias;if(o===t)return!0}return!1},getOriginal:function(t){if(this.alias===t)return"*";var e=this.exports;if(null!=e)for(var n,r=e.length,i=-1;++i<r;)if(n=e[i],(n.alias||n.name)===t)return n.name;return null},loadImport:function(t){var e=this;this.module.loadModule().fail(t).done(function(n){t(null,e)})},registerScope:null,logError_:function(t){var e="\n(Module) "+(this.parent||{path:"root"}).path;e+="\n  (Import) "+this.path,e+="\n    "+t,log_error(e)}});!function(){function t(t){var e=t.contentType,n=e||path_getExtension(t.path);if("mask"===n)return v;if("html"===n)return y;var r=" "+n+" ";return-1!==u.indexOf(r)?g:-1!==s.indexOf(r)?_:m}d.create=function(e,n,r,i,o){return new(t(e))(e.path,n,r,i,o)}}();var v=class_create(d,{type:"mask",contentType:"mask",constructor:function(){this.eachExport(function(t){"*"!==t&&customTag_registerResolver(t)})},getHandler:function(t){var e=this.module;if(null!=e){if(null!=e.error)return this.hasExport(t)?(this.logError_("Resource for the import `"+t+"` not loaded"),this.empty):null;var n=this.getOriginal(t);return null==n?null:e.exports[n]||e.queryHandler(n)}},empty:function(){}}),m=class_create(d,{type:"script",contentType:"script",registerScope:function(t){this.eachExport(function(e,n,r){var i=this.module.register(t,n,r);null==i&&this.logError_("Exported property is undefined: "+n)})}}),g=class_create(d,{type:"style",contentType:"css"}),_=class_create(m,{type:"data",contentType:"json"}),y=class_create(v,{type:"mask",contentType:"html"}),b=class_create(class_Dfr,{type:null,path:null,location:null,exports:null,state:0,constructor:function(t,e){this.path=t,this.parent=e,this.exports={},this.location=path_getDir(t),this.complete_=this.complete_.bind(this)},loadModule:function(){if(0!==this.state)return this;this.state=1;var t=this;return this.load_(this.path).fail(function(e){t.onLoadError_(e)}).done(function(e){t.onLoadSuccess_(e)}),this},complete_:function(t,e){return this.exports=e,this.error=t,this.state=4,t?void this.reject(t):void this.resolve(this)},onLoadSuccess_:function(t){return null==this.preprocess_?void this.complete_(null,t):void this.preprocess_(t,this.complete_)},onLoadError_:function(t){return null==this.preprocessError_?void this.complete_(t):void this.preprocessError_(t,this.complete_)},load_:null,preprocess_:null,preprocessError_:null,register:fn_doNothing});!function(){function t(t){var e=t.contentType,n=e||path_getExtension(t.path);if("mask"===n)return x;var r=" "+n+" ";return-1!==u.indexOf(r)?k:-1!==s.indexOf(r)?S:"html"===n?w:C}b.create=function(e,n,r){return new(t(e))(e.path,n)}}();var x;!function(){function t(t){var e=t.type;if(e===Dom.NODE&&"imports"===t.tagName)return t.nodes;if(e!==Dom.FRAGMENT&&null!=e)return[t];var n=t;if(e===Dom.FRAGMENT&&(n=t.nodes,null==n))return[];for(var r,i=n.length,o=-1;++o<i;)r=n[o],"imports"===r.tagName&&(n.splice.apply(n,[o,1].concat(r.nodes)),o--);return n}function e(t,e){for(var n,r=[],i=t.length,o=-1;++o<i;)n=t[o],n.tagName===e&&r.push(n);return r}function r(t,e,n){for(var r=n.exports,i=n.imports,o=n.scope,u=l(n),a=-1,c=i.length;++a<c;){var f=i[a];f.registerScope&&f.registerScope(n)}for(var a=-1,c=t.length;++a<c;){var h=t[a],p=h.tagName;if("define"===p||"let"===p){var d={getHandler:s(customTag_Compo_getHandler,u),location:n.location},v=Define.create(h,e,n,d),m=v.prototype;m.scope=obj_extend(m.scope,o);var g=h.name;"define"===p&&(r[g]=v,customTag_register(g,v)),"let"===p&&customTag_registerResolver(g),r.__handlers__[g]=v}}return r["*"]=class_create(customTag_Base,{getHandler:u,location:n.location,nodes:r.__nodes__,scope:o}),r}function i(t,e){return class_create({scope:e.scope,location:e.location,nodes:t,getHandler:l(e)})}function o(t,e,n){function r(){--i>0||e.call(n)}var i=t.length;if(0===i)return e.call(n);for(var o=i,l=-1;++l<o;)t[l].loadImport(r)}function l(t){return function(e){return u.call(this,t,e)}}function u(t,e){var n,r=t.exports;if(null!=r&&null!=(n=r[e]))return n;var i=r.__handlers__;if(null!=i&&null!=(n=i[e]))return n;for(var o,l,u=t.imports,s=u.length;--s>-1;)if(o=u[s],l=o.type,"mask"===l&&null!=(n=o.getHandler(e)))return n;return null}function s(t,e){return null==t?e:function(){var n=t.apply(this,arguments);return null!=n?n:e.apply(this,arguments)}}x=class_create(b,{type:"mask",scope:null,source:null,modules:null,exports:null,imports:null,load_:c,preprocessError_:function(t,e){var n="Load error: "+this.path;t&&t.status&&(n+="; Status: "+t.status),this.source=reporter_createErrorNode(n),e.call(this,t)},preprocess_:function(e,i){var l="string"==typeof e?parser_parse(e):e;this.scope={},this.source=l,this.imports=[],this.exports={__nodes__:[],__handlers__:{}};for(var u,s=t(l),a=s.length,c=-1;++c<a;)switch(u=s[c],u.tagName){case"import":this.imports.push(Module.createImport(u,null,null,this));break;case"module":var f=n(u.attr.path,null,null,this),h=u.attr.contentType,p=new Module.Endpoint(f,h);Module.registerModule(u.nodes,p);break;case"define":case"let":continue;default:this.exports.__nodes__.push(u)}o(this.imports,function(){i.call(this,null,r(s,null,this))},this)},getHandler:function(t){return u.call(this,this,t)},queryHandler:function(t){if(this.error)return i(this.source,this);var n=this.exports.__nodes__;return"*"!==t&&(n=e(n,t)),null!=n&&0!==n.length?i(n,this):null}})}();var w,C=class_create(b,{type:"script",load_:f,getExport_:function(t){var e=this.exports;return"*"!==t?obj_getProperty(e,t):e},register:function(t,e,n){var r=n||e,i=this.getExport_(e);return null==i?null:(null==t.scope&&(t.scope={}),obj_setProperty(t.scope,r,i),i)},preprocessError_:function(t,e){log_error("Resource "+this.path+" thrown an Exception: "+t),e(t)}}),k=class_create(b,{type:"style",load_:h}),S=class_create(C,{type:"data",load_:p});!function(){w=class_create(x,{type:"mask",preprocess_:function(t,e){var n="string"==typeof t?parser_parseHtml(t):t;return x.prototype.preprocess_.call(this,n,e)}})}(),function(){var t="import",n="imports";custom_Tags.module=class_create({constructor:function(t,n,r,i,o){var l=path_resolveUrl(t.attr.path,e(r,o)),u=t.attr.type,s=new Module.Endpoint(l,u);Module.registerModule(t.nodes,s,r,o)},render:fn_doNothing}),custom_Tags["import:base"]=function(t,e,n,r,i){var o=path_normalize(expression_eval(t.expression,e,n,i));null!=o&&"/"!==o[o.length-1]&&(o+="/"),Module.cfg("base",o)},custom_Tags[t]=class_create({meta:{serializeNodes:!0},constructor:function(t,e,n,r,i){null==t.alias&&null==t.exports&&Module.isMask(t)&&(this.module=Module.createModule(t,n,i))},renderStart:function(t,e){if(null!=this.module){var n=Compo.pause(this,e),r=this;this.module.loadModule().done(function(){r.nodes=r.module.exports.__nodes__,r.scope=r.module.scope,r.location=r.module.location,r.getHandler=r.module.getHandler.bind(r.module)}).fail(function(){r.nodes=r.module.source}).always(n)}}}),custom_Tags[n]=class_create({imports_:null,load_:function(t,e){function n(e,n){null==e&&(n.registerScope&&n.registerScope(o),null!=t._modules&&t._modules.add(n.module)),0===--u&&null!=s&&s()}for(var r,i=this.imports_,o=this,l=i.length,u=l,s=e,a=-1;++a<l;)r=i[a],r.async&&0===--u&&(s(),s=null),r.loadImport(n)},start_:function(e,n){for(var r,i=Compo.pause(this,n),o=this.nodes,l=o.length,u=-1,s=this.imports_=[];++u<l;)if(r=o[u],r.tagName===t){if(-1!==r.path.indexOf("~")){var a=parser_ensureTemplateFunction(r.path);is_Function(a)&&(r.path=a("attr",e,n,null,this))}s.push(Module.createImport(r,n,this))}this.load_(n,i)},meta:{serializeNodes:!0},serializeNodes:function(){for(var e,n=[],r=this.nodes.length;--r>-1;)e=this.nodes[r],e.tagName===t&&n.push(e);return mask_stringify(n)},renderStart:function(t,e){this.start_(t,e)},renderStartClient:function(t,e){this.start_(t,e)},getHandler:function(t){for(var e,n,r=this.imports_,i=r.length,o=-1;++o<i;)if(e=r[o],"mask"===e.type&&(n=e.getHandler(t),null!=n))return n;return null},getHandlers:function(){for(var t,e,n={},r=this.imports_,i=r.length,o=-1;++o<i;)t=r[o],"mask"===t&&(e=t.getHandlers(),obj_extend(n,e));return n}}),custom_Tags.await=class_create({progressNodes:null,completeNodes:null,errorNodes:null,namesViaExpr:null,namesViaAttr:null,splitNodes_:function(){var t={"@progress":"progressNodes","@fail":"errorNodes","@done":"completeNodes"};coll_each(this.nodes,function(e){var n=e.tagName,r=e.nodes,i=t[n];null==i&&(i="completeNodes",r=[e]);var o=this[i];return null==o?void(this[i]=r):void(this[i]=Array.prototype.concat.call(o,r))},this),this.nodes=null},getAwaitableNamesViaExpr:function(){if(null!=this.namesViaExpr)return this.namesViaExpr;var t=this.expression;return this.namesViaExpr=null==t?[]:t.split(",").map(function(t){return t.trim()})},getAwaitableNamesViaAttr:function(){if(null!=this.namesViaAttr)return this.namesViaAttr;var t=[];for(var e in this.attr)t.push(e);return this.namesViaAttr=t},getAwaitableImports:function(){var t=this.getAwaitableNamesViaAttr(),e=this.getAwaitableNamesViaExpr(),n=t.concat(e),r=Compo.prototype.closest.call(this,"imports");return null==r?(this.error_(Error('"imports" not found. "await" should be used within "import" statements.')),null):r.imports_.filter(function(t){return 4===t.module.state?!1:n.some(function(e){return t.hasExport(e)})})},getExports_:function(){var t=this.expression;if(null!=t)return t.split(",").map(function(t){return t.trim()});var e=[];for(var n in this.attr)e.push(n);return e},await_:function(t,e){var n=this.getAwaitableImports();if(null!=n){if(0===n.length)return void this.complete_();this.progress_(t,e);var r=Compo.pause(this,t),i=n.length,o=this;coll_each(n,function(t){t.module.always(function(){0===--i&&(o.complete_(),r())})})}},renderStart:function(t,e,n){this.splitNodes_(),this.await_(e,n)},error_:function(t){this.nodes=this.errorNodes||reporter_createErrorNode(t.message),this.model=t},progress_:function(t,e){var n=this.progressNodes;if(null!=n){var r=n.some(function(t){return t.type===Dom.TEXTNODE});r&&(n=jmask("div").append(n));var i={type:Dom.COMPONENT,nodes:n,controller:new Compo,attr:{}};builder_build(i,null,t,e,this)}},complete_:function(){var t=this.components&&this.components[0];t&&t.remove();var e=this.completeNodes,n=this.namesViaAttr;1===n.length&&(e=jmask(n[0]).append(e)),this.nodes=e}})}();var N;!function(){function t(t,n,r,o){return e(t,n,r,function(t,e){return t?o.reject(t):(r.flattern===!0&&r.deep===!0&&(e=i(e)),void o.resolve(e))}),o}function e(t,e,i,o){function l(t,e){if("import"!==t.tagName)return e();var l=r(t,s),u=Module.getType(t);return i.deep===!1?(a[u].push(l),e()):"mask"===u?void n(l,i,function(t,n){return t?o(t):(a.mask.push(n),void e())}):(a[u].push(l),void e())}function u(){o(null,a)}var s=path_getDir(e),a={mask:[],data:[],style:[],script:[]};mask_TreeWalker.walkAsync(t,l,u)}function n(t,n,r){var i={path:t,dependencies:null};c(t).done(function(o){e(parser_parse(o),t,n,function(t,e){return t?void r(t):(i.dependencies=e,void r(null,i))})}).fail(r)}function r(t,e){var n=t.path,r=t.contentType;return null!=r&&"mask"!==r||""!==path_getExtension(n)||(n+=".mask"),path_isRelative(n)&&(n=path_combine(e,n)),path_normalize(n)}N=function(e,n,r){var i=obj_extendDefaults(r,o),l=new class_Dfr,u="string"==typeof e?parser_parse(e):e;return t(u,n,i,l)};var i,o={deep:!0,flattern:!1};!function(){function t(t,r){return n(e(t,r,[]))}function e(t,n,r){if(null==t)return r;for(var i,o=t[n],l=o.length,u=-1;++u<l;)i=o[u],"string"!=typeof i?(r.unshift(i.path),e(i.dependencies,n,r)):r.unshift(i);return"mask"!==n&&t.mask.forEach(function(t){e(t.dependencies,n,r)}),r}function n(t){for(var e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++)t[e]===t[n]&&(t.splice(n,1),n--);return t}i=function(e){return{mask:t(e,"mask"),data:t(e,"data"),style:t(e,"style"),script:t(e,"script")}}}()}();var j;!function(){function t(t,n,r,i){function o(){if(0===l.length)return u.data&&(u.script=u.data+"\n"+u.script),r(u);var s=l.shift();e(t,s,n,function(t,e){return t?i(t):(u[s]=e,void o())})}var l=["mask","script","style","data"],u={mask:"",data:"",style:"",script:""};o()}function e(t,e,n,r){function i(){return++s===u?void r(null,a.join("\n")):void l[e](o[s],n).fail(r).done(function(t){a.push("/* source "+o[s]+" */"),a.push(t),i()})}var o=t[e],u=o.length,s=-1,a=[];i()}function n(t,e,n){return class_Dfr.run(function(e,n){c(t).fail(n).done(function(n){var r="var module = { exports: null }\n";r+=n+";\n",r+='mask.Module.registerModule(module.exports, new mask.Module.Endpoint("'+t+'", "script"))',e(r)})})}function r(t,e,n){return c(t,n)}function i(t,e,n){return class_Dfr.run(function(n,r){c(t).fail(r).done(function(i){var o;try{o="string"==typeof i?JSON.parse(i):i}catch(l){return void r(l)}var u=JSON.stringify(o,null,e.minify?4:void 0),s="module = { exports: "+u+' }\nmask.Module.registerModule(module.exports, new mask.Module.Endpoint("'+t+'", "json"))';n(s)})})}j=function(e,n,r){var i=obj_extendDefaults(r,o);return class_Dfr.run(function(r,o){function l(t){t.mask+="\n"+e,r(t)}N(e,n,{flattern:!0}).fail(o).done(function(e){t(e,i,l,o)})})};var o={minify:!1},l={mask:function(t,e,n){return class_Dfr.run(function(n,r){c(t).fail(r).done(function(r){var i=mask_TreeWalker.walk(r,function(t){return"link"===t.tagName&&t.attr.href?{remove:!0}:void 0});i=jmask("module").attr("path",t).append(i);var r=mask_stringify(i[0],{indent:e.minify?0:4});n(r)})})},script:function(t,e){return(__cfg.buildScript||n)(t,e)},style:function(t,e){return(__cfg.buildStyle||r)(t,e)},data:function(t,e){return(__cfg.buildData||i)(t,e)}}}(),obj_extend(Module,{ModuleMask:x,Endpoint:t,createModule:function(e,n,r,o){var u=i(e,n,r,o),s=l[u];if(null==s){var a=new t(u,e.contentType);s=l[u]=b.create(a,o);
}return s},registerModule:function(t,e,r,i,o){e.path=n(e.path,r,i,o);var l=Module.createModule(e,r,i,o);return l.state=1,Module.isMask(e)?(l.preprocess_(t,function(){l.state=4,l.resolve(l)}),l):(l.state=4,l.exports=t,l.resolve(l),l)},createImport:function(e,n,r,o){var l=i(e,n,r,o),u=e.alias,s=e.exports,a=e.async,c=new t(l,e.contentType);return d.create(c,a,u,s,o)},isMask:function(t){var e=t.contentType,n=e||path_getExtension(t.path);return""===n||"mask"===n||"html"===n},getType:function(t){var e=t.contentType,n=t.path;if(null!=e)return e;var r=path_getExtension(n);if(""===r||"mask"===r)return"mask";var i=" "+r+" ";return-1!==u.indexOf(i)?"style":-1!==s.indexOf(i)?"data":"script"},cfg:function(t,e){return t in a==!1?void log_error("Invalid module option: ",t):void(a[t]=e)},resolveLocation:e,getDependencies:N,build:j,clearCache:function(t){return null==t?void(l={}):void delete l[t]},getCache:function(){return l}})}();var Define;!function(){function t(t,e,n,r,o,l,u,s){for(var a,c,f=[],h=obj_extend({tagName:e,compoName:t,template:f,attr:n,location:i(l),meta:{template:"merge"},renderStart:function(t,e){Compo.prototype.renderStart.apply(this,arguments),this.nodes===this.template&&(this.nodes=mask_merge(this.nodes,[],this)),null!=r&&(this.model=r(this.expression,t,e,this))},getHandler:null},s),p=null==o?0:o.length,d=0;p>d;d++)if(a=o[d],null!=a)if(c=a.tagName,"function"!==c)if("slot"!==c&&"event"!==c)if("pipe"!==c)if("define"!==c&&"let"!==c)if("var"!==c)f.push(a);else{var v,m,g=a.getObject(u,null,l);for(v in g)if(m=g[v],"meta"!==v&&"model"!==v&&"attr"!==v&&"compos"!==v)if("scope"===v&&is_Object(m))h.scope=obj_extend(h.scope,m);else{var _=h.scope;null==_&&(h.scope=_={}),_[v]=m}else h[v]=obj_extend(h[v],m)}else{var y="define"===c?Define.registerGlobal:Define.registerScoped;y(a,u,h)}else custom_Tags.pipe.attach(a,h);else{if("event"===c&&null!=h.tagName){f.push(a);continue}var b=c+"s",x=h[b];null==x&&(x=h[b]={}),x[a.name]=a.fn}else h[a.name]=a.fn;return h}function e(t,e,n){var r=[];if(null==t)return r;for(var i,o=t.length,l=-1;++l<o;)if(i=t[l],i.compo){var u=customTag_get(i.compo,n);if(null!=u){r.unshift(u);continue}var s=expression_eval(i.compo,e,null,n);if(null!=s){r.unshift(s);continue}log_error("Nor component, nor scoped data is resolved:",i.compo)}else;return r}function n(n,i,o,l){var u,s,a,c=n["extends"],f=n.arguments,h=n.as;if(null!=h){var p=parser_parse(h);u=p.tagName,s=obj_extend(n.attr,p.attr)}null!=f&&(a=r(f));var d=n.name,v=t(d,u,s,a,n.nodes,o,i,l),m=e(c,i,o);return m.push(v),Compo.apply(null,m)}function r(t){return function(e,n,r,i){var o=null;o=null==e?t.map(function(t){expression_eval(t.prop,n,r,i)}):expression_evalStatements(e,n,r,i);for(var l={},u=o.length,s=t.length,a=-1;++a<u&&s>a;)l[t[a].prop]=o[a];return l}}function i(t){for(;null!=t;){if(t.location)return t.location;if(t.resource&&t.resource.location)return t.resource.location;t=t.parent}return null}Define={create:function(t,e,r,i){return n(t,e,r,i)},registerGlobal:function(t,e,n,r){var i=Define.create(t,e,n,r);customTag_register(t.name,i)},registerScoped:function(t,e,n,r){var i=Define.create(t,e,n,r);customTag_registerScoped(n,t.name,i)}}}();var mask_TreeWalker;!function(){function t(t){return Dom.FRAGMENT===n(t)}function e(t){var e=t.nodes;return null==e?null:is_Array(e)?e:t.nodes=[e]}function n(t){var e=t.type;return null!=e?e:is_Array(t)?Dom.FRAGMENT:null!=t.tagName?Dom.NODE:null!=t.content?Dom.TEXTNODE:Dom.NODE}function r(e){if("string"==typeof e&&(e=parser_parse(e)),t(e)===!1){var n=new Dom.Fragment;n.appendChild(e),e=n}return e}mask_TreeWalker={walk:function(t,e){return"object"==typeof t&&t.type===Dom.CONTROLLER?(new o(t,e),t):(t=r(t),new i(t,e),t)},walkAsync:function(t,e,n){t=r(t),new l(t,e,n)}};var i,o;!function(){function n(r,i,o,l){if(null==r)return null;var a,c=!0,f=!1;t(r)!==!0&&(a=i(r)),void 0!==a&&(a=new u(a),a.process(new s(r,o,l)),c=a.deep,f=a["break"]);var h=e(r);if(null==h||c===!1||f===!0)return a;for(var p,d=h.length,v=0;d>v;v++)if(p=h[v],a=n(p,i,r,v),null!=a&&a["break"]===!0)return a}function r(t,e,n,i){if(null!=t){var o=e(t,i);if(void 0!==o&&(o.deep===!1||o["break"]===!0))return o;var l=t.components;if(null==l)return null;for(var u,s=l.length,a=0;s>a;a++)if(u=l[a],o=r(u,e,t,a),null!=o&&o["break"]===!0)return o}}i=function(t,e){n(t,e)},o=function(t,e){r(t,e,t)}}();var l;!function(){l=function(t,e,n){this.stack=[],this.done=n,this.root=t,this.fn=e,this.process=this.process.bind(this),this.visit(this.push(t))},l.prototype={current:function(){return this.stack[this.stack.length-1]},push:function(t,e,n){var r=new s(t,e,n);return this.stack.push(r),r},pop:function(){return this.stack.pop()},getNext:function(t){var n=this.current(),r=n.node,i=e(r);if(null==r)throw Error("Node is null");if(null!=i&&t!==!1&&0!==i.length){if(null==i[0])throw Error("Node is null");return this.push(i[0],r,0)}for(var o,l;0!==this.stack.length;)if(n=this.pop(),o=n.parent,l=n.index,null!=o){if(++l<o.nodes.length)return this.push(o.nodes[l],o,l)}else this.pop();return null},process:function(t){var e=!0,n=!1;void 0!==t&&(t=new u(t),t.process(this.current()),e=t.deep,n=t["break"]);var r=n===!0?null:this.getNext(e);return null==r?void this.done(this.root):void this.visit(r)},visit:function(e){var n=e.node;return t(n)===!1?void this.fn(n,this.process):void this.process()},fn:null,done:null,stack:null}}();var u;!function(){u=function(t,e){for(var n in t)this[n]=t[n]},u.prototype={"break":!1,deep:!0,remove:!1,replace:null,process:function(t){if(null!=this.replace)return this.deep=!1,void(t.parent.nodes[t.index]=this.replace);if(this.remove===!0){this.deep=!1;var e=t.parent.nodes,n=t.index;return void _Array_splice.call(e,n,1)}}}}();var s=function(t,e,n){this.node=t,this.index=n,this.parent=e}}();var Mask;!function(){Mask={render:function(t,e,n,r,i){null!=r&&"function"!=typeof r.appendChild&&log_error(".render(template[, model, ctx, container, controller]","Container should implement .appendChild method");var o=t;return"string"==typeof t&&(o=_Object_hasOwnProp.call(__templates,t)?__templates[t]:__templates[t]=parser_parse(t)),null!=n&&n.constructor===builder_Ctx||(n=new builder_Ctx(n)),builder_build(o,e,n,r,i)},renderAsync:function(t,e,n,r,i){null!=n&&n.constructor===builder_Ctx||(n=new builder_Ctx(n)),null==i&&(i=new Compo);var o=this.render(t,e,n,r,i),l=new class_Dfr;return n.async===!0?n.done(function(){l.resolve(o,i)}):l.resolve(o,i),l},parse:parser_parse,parseHtml:parser_parseHtml,stringify:mask_stringify,build:builder_build,buildSVG:builder_buildSVG,run:mask_run,merge:mask_merge,optimize:mask_optimize,registerOptimizer:mask_registerOptimizer,TreeWalker:mask_TreeWalker,Module:Module,File:{get:file_get,getScript:file_getScript,getStyle:file_getStyle,getJson:file_getJson},registerHandler:customTag_register,registerFromTemplate:customTag_registerFromTemplate,define:customTag_define,getHandler:customTag_get,getHandlers:customTag_getAll,registerStatement:customStatement_register,getStatement:customStatement_get,registerAttrHandler:customAttr_register,getAttrHandler:customAttr_get,registerUtil:customUtil_register,getUtil:customUtil_get,$utils:customUtil_$utils,_:customUtil_$utils,Dom:Dom,plugin:function(source){eval(source)},clearCache:function(t){return 0===arguments.length?void(__templates={}):void delete __templates[t]},Utils:{Expression:ExpressionUtil,ensureTmplFn:parser_ensureTemplateFunction},obj:{get:obj_getProperty,set:obj_setProperty,extend:obj_extend},str:{dedent:str_dedent},is:{Function:is_Function,String:is_String,ArrayLike:is_ArrayLike,Array:is_ArrayLike,Object:is_Object,Date:is_Date,NODE:is_NODE,DOM:is_DOM},"class":{create:class_create,createError:error_createClass,Deferred:class_Dfr,EventEmitter:class_EventEmitter},parser:{ObjectLexer:parser_ObjectLexer,getStackTrace:reporter_getNodeStack,defineContentTag:parser_defineContentTag},on:listeners_on,off:listeners_off,delegateReload:function(){},setInterpolationQuotes:parser_setInterpolationQuotes,setCompoIndex:function(t){builder_componentID=t},cfg:mask_config,config:mask_config,toHtml:function(t){return $(t).outerHtml()},factory:function(t){var e=_Array_slice.call(arguments,1),n=e.pop(),r="both";if(0!==e.length){var i=e[0];"client"!==i&&"server"!==i||(r=i)}return"client"===r&&is_NODE||"server"===r&&is_DOM?void customTag_register(t,{meta:{mode:r}}):void n(global,Compo.config.getDOMLibrary(),function(e){customTag_register(t,e)})}};var __templates={}}();var mock_TagHandler;!function(){function t(t,e){function n(t){this.tagName=t.tagName,this.compoName=t.tagName,this.attr=t.attr,this.expression=t.expression,this.nodes=t.nodes,this.nextSibling=t.nextSibling,this.parent=e,this.components=null}return n.prototype=t,n}var e=function(){function t(t,e,n){this.meta={ID:n,name:t,value:e}}return t.prototype={toString:function(){var t=this.meta,e={type:"a",single:!0};return Meta.stringify(t,e)}},{create:function(e,n,r){return function(i,o,l,u,s,a,c){return"server"!==r&&c.insertBefore(new t(e,o,++u._id),s),"client"!==r?n(i,o,l,u,s,a):""}}}}();mock_TagHandler=function(){function t(t,e){}return t.prototype={render:function(){},meta:{mode:mode_CLIENT}},{create:function(e,n,r){if(r===mode_CLIENT)return t;var i=n.prototype;if(i.mode===mode_CLIENT)return t;var o=n.prototype.meta;return null==o&&(o=n.prototype.meta={}),o.mode===mode_CLIENT?t:(o.mode=r,n)}}}();var n;!function(){function t(t,n,r){return"server"===r?n:function(i,o,l,u,s,a,c){var f=new HtmlDom.UtilNode(c,t,i,a);if("attr"===c&&u.parentNode.insertBefore(f,u),"partial"===r){var h,p=e[c];return is_Function(n[p])===!1?(log_error("Utils partial function is not defined",p),""):(h=n[p](i,o,l,u,s),"node"===c?(f.appendChild(n.element),f):f.meta.current=h)}return"node"===c?f:""}}n={create:t};var e={node:"nodeRenderStart",attr:"attrRenderStart"}}();var r=Mask.registerUtil;Mask.registerAttrHandler=function(t,n,r){if(null==r)return void(custom_Attributes[t]=n);if("string"==typeof r){var i=n;n=r,r=i}custom_Attributes[t]=e.create(t,r,n)},Mask.registerUtil=function(t,e,i){null==i&&is_Object(e)&&(i=e.mode),r(t,null==i?e:n.create(t,e,i))},Mask.registerUtility=Mask.registerUtil,Mask.registerHandler=function(e,n){null!=n&&"object"==typeof n&&(n.__Ctor=t(n)),custom_Tags_defs.hasOwnProperty(e)&&obj_extend(n.prototype,custom_Tags_defs[e]);var r="function"==typeof n?n.prototype:n;return null==r.meta&&(r.meta=r.$meta||{}),r.cache&&(r.meta.cache=r.cache),r.mode&&(r.meta.mode=r.mode),meta_getVal(n,"mode")===mode_CLIENT?void(custom_Tags[e]=mock_TagHandler.create(e,n,"client")):void(custom_Tags[e]=n)},Mask.compoDefinitions=function(t,e,n){var r=custom_Tags,i=custom_Tags_defs;for(var o in t)i[o]=t[o],void 0===r[o]?r[o]=mock_TagHandler.create(o,null,"client"):obj_extend(r[o].prototype,t[o]);var l=function(){};for(var u in e)"client"===e[u].mode&&Mask.registerUtil(u,l,"client");for(var u in n)"client"===n[u].mode&&Mask.registerAttrHandler(u,l,"client")}}();var Cache;!function(){function t(t,n){null==n&&(n=t.cache),null!=n&&(this.__cacheInfo=new e(n))}function e(t){if("object"==typeof t&&t.byProperty){var e=t.byProperty,n=e.indexOf("."),r=e.substring(0,n);switch(e=e.substring(n+1),r){case"model":case"ctx":break;default:return console.error('[CompoCache] - property accessor not valid - should be "[model/ctx].[accessor]"'),null}this.propObjName=r,this.propAccessor=e}return this.expire=t.expire,this}var n=0,r=0,i={};t.prototype={__null:null,__value:null},e.prototype={prop:void 0,propObjName:null,propAccessor:null,expire:null,getKey:function(t,e){if(null==this.propAccessor)return"__value";var n,r,i=this.propObjName,o=this.propAccessor;return"model"===i&&(n=t),"ctx"===i&&(n=e),r=obj_getProperty(n,o),"undefined"==typeof r?"__value":null==r?"__null":r}},Cache={get controllerID(){return n},get modelID(){return r},cacheCompo:function(e,o,l,u,s){if(__cfg.allowCache!==!1){var a=i[l];null==a&&(a=i[l]=new t(u,s));var c=a.__cacheInfo;null!=c&&(a[c.getKey(e,o)]=u,n=o._id,r=o._models._id)}},getCompo:function(t,e,n,r){if(__cfg.allowCache===!1)return null;var o=i[n];if(null==o)return null;var l=o.__cacheInfo,u=o[l.getKey(t,e)];return null==u||null==u.__cached?null:u},getCache:function(){return i}}}(),function(){function t(t){return null==t?new Dom.Component:t}function e(t){return null==t||t.constructor!==builder_Ctx?new builder_Ctx(t):t}var n=Mask.render;obj_extend(Mask,{toHtml:function(t,e,n,r){return HtmlDom.stringify(t,e,n,r)},render:function(r,i,o,l,u){var s=t(u),a=e(o),c=n(r,i,a,l,s);return HtmlDom.stringify(c,i,a,s)},renderAsync:function(r,i,o,l,u){function s(){var t=null==c._rewrite&&null==c._redirect?HtmlDom.stringify(h,i,c,a):null;f.resolve(t)}var a=t(u),c=e(o),f=new class_Dfr,h=n(r,i,c,l,a);return c.async===!0?c.done(s):s(),f},build:function(r,i,o,l,u){var s=t(u),a=e(o),c=n(r,i,a,l,s);return{ctx:a,model:i,component:a,element:c}},buildAsync:function(r,i,o,l,u){function s(){f.resolve({ctx:c,model:i,component:c,element:h})}var a=t(u),c=e(o),f=new class_Dfr,h=n(r,i,c,l,a);return c.async===!0?c.done(s):s(),f}})}();var Compo=exports.Compo=Mask.Compo=function(mask){function domLib_initialize(){null!=domLib&&null!=domLib.fn&&(domLib.fn.compo=function(t){if(0===this.length)return null;var e=Anchor.resolveCompo(this[0],!0);return null==t?e:find_findSingle(e,selector_parse(t,Dom.CONTROLLER,"up"))},domLib.fn.model=function(t){var e=this.compo(t);if(null==e)return null;for(var n=e.model;null==n&&e.parent;)e=e.parent,n=e.model;return n},function(){var t=["append","prepend","before","after"];["appendMask","prependMask","beforeMask","afterMask"].forEach(function(e,n){domLib.fn[e]=function(r,i,o,l){if(0===this.length)return log_warn("<jcompo> $.",e,"- no element was selected(found)"),this;this.length>1&&log_warn("<jcompo> $.",e," can insert only to one element. Fix is comming ..."),null==o&&(o=2>n?this.compo():this.parent().compo());var u=!1;null==o&&(o={},u=!0),null==o.components&&(o.components=[]);for(var s=o.components,a=s.length,c=mask.render(r,i,l,null,o),f=this[t[n]](c),h=s.length;h>a;a++)Compo.signal.emitIn(s[a],"domInsert");return u&&0!==h&&(log_warn("$.",e,"- parent controller was not found in Elements DOM.","This can lead to memory leaks."),log_warn("Specify the controller directly, via $.",e,"(template[, model, controller, ctx])")),f}})}(),function(){function t(t,e){node_tryDispose(e)}function e(t,e){node_tryDisposeChildren(e)}var n=domLib.fn.remove,r=domLib.fn.empty;domLib.fn.removeAndDispose=function(){return this.each(t),n.call(this)},domLib.fn.emptyAndDispose=function(){return this.each(e),r.call(this)}}())}function SlotHandler(){}var Dom=mask.Dom,_mask_ensureTmplFnOrig=mask.Utils.ensureTmplFn,_mask_ensureTmplFn,_resolve_External,domLib,Class;!function(){function t(){for(var t,e=arguments.length;--e>-1;)if(t=_resolve_External(arguments[e]),null!=t)return t;return null}_mask_ensureTmplFn=function(t){return"string"!=typeof t?t:_mask_ensureTmplFnOrig(t)},_resolve_External=function(t){return e[t]||r[t]||n[t]};var e=global,n=global.atma||{},r=exports||{};domLib=t("jQuery","Zepto","$"),Class=t("Class")}(),null!=global.document&&null==domLib&&log_warn("DomLite is used. You can set jQuery-Zepto-Kimbo via `Compo.config.setDOMLibrary($)`");var selector_parse,selector_match;!function(){function t(t){return function(n){return e(n,t)}}function e(t,n,r){if("string"!=typeof t)return!1;if(null==r&&(r=0),r=t.indexOf(n,r),-1===r)return!1;if(r>0&&t.charCodeAt(r-1)>32)return e(t,n,r+1);var i=t.length,o=n.length;return i-o>r&&t.charCodeAt(r+o)>32?e(t,n,r+1):!0}selector_parse=function(e,n,r){if(null==e&&log_error("<compo>selector is undefined",n),"object"==typeof e)return e;var i,o,l;if(null==i)switch(e[0]){case"#":i="id",e=e.substring(1),o="attr";break;case".":i="class",e=t(e.substring(1)),o="attr";break;case"[":var u=/(\w+)\s*=([^\]]+)/.exec(e);if(null==u)throw Error("Invalid attributes selector: "+e);i=u[1],e=u[2].trim(),o="attr";break;default:i=n===Dom.SET?"tagName":"compoName"}return l="up"===r?"parent":n===Dom.SET?"nodes":"components",{key:i,prop:o,selector:e,nextKey:l}},selector_match=function(t,e,n){if(null==t)return!1;is_String(e)&&(null==n&&(n=Dom[t.compoName?"CONTROLLER":"SET"]),e=selector_parse(e,n));var r=e.prop?t[e.prop]:t;return null==r?!1:is_Function(e.selector)?e.selector(r[e.key]):null!=e.selector.test?e.selector.test(r[e.key]):r[e.key]==e.selector}}();var find_findSingle,find_findAll,find_findChildren;!function(){find_findSingle=function(t,e){if(null==t)return null;if(is_Array(t)){for(var n=t,r=n.length,i=-1;++i<r;){var o=find_findSingle(t[i],e);if(null!=o)return o}return null}return selector_match(t,e)?t:(t=t[e.nextKey],null==t?null:find_findSingle(t,e))},find_findChildren=function(t,e){if(null==t)return null;var n=t[e.nextKey];if(null==n)return null;if(is_Array(n)){for(var r=n.length,i=-1;++i<r;){var o=find_findSingle(t[i],e);if(null!=o)return o}return null}},find_findAll=function(t,e,n){if(null==n&&(n=[]),is_Array(t)){for(var r=t.length,i=0;r>i;i++)find_findAll(t[i],e,n);return n}return selector_match(t,e)&&n.push(t),t=t[e.nextKey],null==t?n:find_findAll(t,e,n)}}();var dom_addEventListener,node_tryDispose,node_tryDisposeChildren;!function(){dom_addEventListener=function(t,e,n,r,i){return TouchHandler.supports(e)?void TouchHandler.on(t,e,n):KeyboardHandler.supports(e,r)?void KeyboardHandler.attach(t,e,r,n,i):null!=domLib?domLib(t).on(e,n):null!=t.addEventListener?t.addEventListener(e,n,!1):void(t.attachEvent&&t.attachEvent("on"+e,n))},node_tryDispose=function(t){if(t.hasAttribute("x-compo-id")){var e=t.getAttribute("x-compo-id"),n=Anchor.getByID(e);if(null!=n){if(null==n.$||1===n.$.length)return compo_dispose(n),void compo_detachChild(n);var r=_Array_indexOf.call(n.$,t);-1!==r&&_Array_splice.call(n.$,r,1)}}node_tryDisposeChildren(t)},node_tryDisposeChildren=function(t){for(var e=t.firstChild;null!=e;)1===e.nodeType&&node_tryDispose(e),e=e.nextSibling}}();var domLib_find,domLib_on;!function(){domLib_find=function(t,e){return t.filter(e).add(t.find(e))},domLib_on=function(t,e,n,r){return null==n?t.on(e,r):(t.on(e,n,r).filter(n).on(e,r),t)}}();var compo_dispose,compo_detachChild,compo_ensureTemplate,compo_ensureAttributes,compo_attachDisposer,compo_removeElements,compo_prepairAsync,compo_errored,compo_meta_toAttributeKey,compo_meta_prepairAttributesHandler;!function(){function t(t){var e=t.template;if(null==e){var n=t.attr;if(null==n)return null;if(e=n.template,null==e)return null;delete t.attr.template}if("object"==typeof e)return e;if(is_String(e)){if(35===e.charCodeAt(0)&&/^#[\w\d_-]+$/.test(e)){var r=document.getElementById(e.substring(1));if(null==r)return log_warn("Template not found by id:",e),null;e=r.innerHTML}return mask.parse(e)}return log_warn("Invalid template",typeof e),null}compo_dispose=function(t){null!=t.dispose&&t.dispose(),Anchor.removeCompo(t);var e=t.components;if(null!=e)for(var n=e.length;--n>-1;)compo_dispose(e[n])},compo_detachChild=function(t){var e=t.parent;if(null!=e){var n,r=t.$,i=e.$||e.elements;if(i&&r){var o,l,u=r.length;for(n=i.length;--n>-1;)for(o=i[n],l=u;--l>-1;)if(o===r[l]){i.splice(n,1);break}}var s=e.components;if(null!=s){for(n=s.length;--n>-1;)if(s[n]===t){s.splice(n,1);break}-1===n&&log_warn("<compo:remove> - i`m not in parents collection",t)}}},compo_ensureTemplate=function(e){if(null==e.nodes)return void(e.nodes=t(e));var n=e.meta.template;if(null!=n&&"replace"!==n){var r=t(e);if(null!=r)return"merge"===n?void(e.nodes=mask_merge(r,e.nodes,e)):"join"===n?void(e.nodes=[r,e.nodes]):void log_error("Invalid meta.nodes behaviour",n)}},compo_attachDisposer=function(t,e){if(null==t.dispose)return void(t.dispose=e);var n=t.dispose;t.dispose=function(){e.call(this),n.call(this)}},compo_removeElements=function(t){if(t.$)return void t.$.remove();var e=t.elements;if(e)for(var n=-1,r=e.length;++n<r;)e[n].parentNode&&e[n].parentNode.removeChild(e[n]);else{var i=t.components;if(i)for(var n=-1,r=i.length;++n<r;)compo_removeElements(i[n])}},compo_prepairAsync=function(t,e,n){var r=Compo.pause(e,n);t.then(r,function(t){compo_errored(e,t),r()})},compo_errored=function(t,e){var n="[%] Failed.".replace("%",t.compoName||t.tagName);if(e){var r=e.message||e.statusText||String(e);r&&(n+=" "+r)}t.nodes=reporter_createErrorNode(n),t.renderEnd=t.render=t.renderStart=null},function(){function t(t){return function(e,n,r,o){var l,u,s,a;for(l in t)if(u=t[l],s=n[l],a=u(e,l,s,r,o,n),null!=a)return i(e,a,l,s),!1;return!0}}function e(t,e,n,i){var u=63===e.charCodeAt(0),s=null,a=u?e.substring(1):e,c=r(a),f=null,h=typeof n;if("string"===h?"string"===n||"number"===n||"boolean"===n?f=o[n]:(u=!0,s=n,f=l.any()):"boolean"===h||"number"===h?(u=!0,f=o[h],s=n):"function"===h?f=n:null==n?f=l.any():n instanceof RegExp?f=l.regexp(n):"object"==typeof n&&(f=l.options(n),s=n["default"],void 0!==s&&(u=!0)),null==f)return void log_error("Function expected for the attr. handler",e);var p=is_Function(s)?s:null;t[c]=null,t=null,i[a]=function(t,e,n,r,i,o){if(null==n)return u===!1?Error("Expected"):null!=p?(t[c]=p.call(t,r,i,o),null):(null!=s&&(t[c]=s),null);var l=f.call(t,n,r,i,e);return l instanceof Error?l:(t[c]=l,null)}}function n(t,e){return e.toUpperCase()}function r(t){var e=t;return 120!==e.charCodeAt(0)&&(e="x-"+e),e.replace(/-(\w)/g,n)}function i(t,e,n,r){e.message=t.compoName+" - attribute `"+n+"`: "+e.message,compo_errored(t,e),log_error(e.message,". Current: ",r)}compo_meta_prepairAttributesHandler=function(n){var r=n.meta;null==r&&(r=n.meta={attributes:null,cache:null,mode:null,readAttributes:null});var i=r.attributes;if(null==i)return void(r.readAttributes=null);var o,l,u={};for(o in i)l=i[o],e(n,o,l,u);r.readAttributes=t(u)},compo_meta_toAttributeKey=r;var o={string:function(t){return"string"==typeof t?t:Error("String")},number:function(t){var e=Number(t);return e===e?e:Error("Number")},"boolean":function(t,e,n,r){return"boolean"==typeof t?t:t===r?!0:"true"===t||"1"===t?!0:"false"===t||"0"===t?!1:Error("Boolean")}},l={regexp:function(t){return function(e){return t.test(e)?e:Error("RegExp")}},any:function(){return function(t){return t}},options:function(t){var e=t.type,n=t["default"]||u[e],r=t.validate,i=t.transform;return function(t,l,u,s){if(!t)return n;if(null!=e){var a=o[e];if(null!=a&&(t=a.apply(this,arguments),t instanceof Error))return t}if(null!=r){var c=r.call(this,t,l,u);if(c)return Error(c)}return null!=i&&(t=i.call(this,t,l,u)),t}}},u={string:"","boolean":!1,number:0}}()}();var compo_create,compo_createConstructor;!function(){compo_create=function(t){var e,n,r,i=t.length,o=t[i-1];i>1&&(r=compo_inherit(o,_Array_slice.call(t,0,i-1))),null==o&&(o={});var l=_resolve_External("include");null!=l&&(o.__resource=l.url);o.attr;for(n in o.attr)o.attr[n]=_mask_ensureTmplFn(o.attr[n]);var u=o.slots;for(n in u)"string"==typeof u[n]&&(is_Function(o[u[n]])===!1&&log_error("Not a Function @Slot.",u[n]),u[n]=o[u[n]]);compo_meta_prepairAttributesHandler(o),e=o.hasOwnProperty("constructor")?o.constructor:function(){},e=compo_createConstructor(e,o,r);for(n in CompoProto)null==o[n]&&(o[n]=CompoProto[n]);return e.prototype=o,o=null,e},compo_createConstructor=function(t,e,n){var r=e.compos,i=e.pipes,o=e.scope,l=e.attr;return null==r&&null==i&&null==l&&null==o?t:function(e,u,s,a,c){if(null!=t){var f=t.call(this,e,u,s,a,c);if(null!=f)return f}n!==!0&&(null!=r&&(this.compos=obj_create(this.compos)),null!=i&&Pipes.addController(this),null!=l&&(this.attr=obj_create(this.attr)),null!=o&&(this.scope=obj_create(this.scope)))}}}();var compo_inherit;!function(){function t(r,i,o){if(null!=r&&null!=i){if("node"===o){var l=r.template||r.nodes,u=i.template||i.nodes;r.template=null==l||null==u?l||u:mask_merge(u,l,r,{extending:!0}),null!=r.nodes&&(r.nodes=r.template)}var s,a,c,f=!1;for(var h in i)if(s=i[h],null!=s&&"constructor"!==h&&("node"!==o||"template"!==h&&"nodes"!==h))if(a=typeof s,null!=r[h]){if("node"===o){var p="renderStart"===h||"renderEnd"===h||"emitIn"===h||"emitOut"===h||"components"===h||"nodes"===h||"template"===h||"find"===h||"closest"===h||"on"===h||"remove"===h||"slotState"===h||"signalState"===h||"append"===h||"appendTo"===h;if(p===!0)continue}if("pipes"!==o)if("function"!==a){if("object"===a){switch(h){case"slots":case"pipes":case"events":case"attr":t(r[h],s,h);continue}e(r[h],s)}}else c=!1,"slots"===o||"events"===o||"pipe"===o?c=!0:"node"!==o||"onRenderStart"!==h&&"onRenderEnd"!==h||(c=!0),r[h]=n(r[h],s,c),f=!0;else t(r[h],s,"pipe")}else r[h]=s;f===!0&&(null!=r["super"]&&log_error("`super` property is reserved. Dismissed. Current prototype",r),r["super"]=null)}}function e(t,n){var r,i,o;for(var o in n)r=t[o],i=n[o],null!=r?is_rawObject(r)&&is_rawObject(i)&&e(r,i):t[o]=i}function n(t,e,n){function o(){var t=u._fn||(u._fn=l(u._fn_chain));return t.apply(this,arguments)}if("compoInheritanceWrapper"===t.name)return t._fn_chain.push(e),t;var l=n===!0?i:r,u=o;return u._fn_chain=[t,e],u._fn=null,u}function r(t){for(var e=t.length,n=t[--e];--e>-1;)n=o(t[e],n);return n}function i(t){var e=t.length;return function(){for(var n,r,i,o=e;--o>-1;)r=t[o],null!=r&&(i=fn_apply(r,this,arguments),void 0!==i&&(n=i));return n}}function o(t,e){return function(){this["super"]=e;var n=fn_apply(t,this,arguments);return this["super"]=null,n}}function l(t){var e=t.length;return 1===e?t[0]:function(){for(var n,r=e;--r>-1;){var i=t[r].apply(this,arguments);null!=i&&(n=i)}return n}}var u="CompoBase";compo_inherit=function(e,n){for(var r,i,o=n.length,s=o,a=[];--s>-1;)r=n[s],"string"==typeof r&&(r=mask.getHandler(r),null!=r&&"Resolver"===r.name&&(log_error("Inheritance error: private component"),r=null)),null!=r?("function"==typeof r&&(i=i||r.name===u,a.push(r),r=r.prototype),t(e,r,"node")):log_error("Base component not defined",n[s]);s=-1,o=a.length,o>0&&(e.hasOwnProperty("constructor")&&a.unshift(e.constructor),e.constructor=l(a));var c=e.meta;return null==c&&(c=e.meta={}),null==c.template&&(c.template="merge"),i}}();var dfr_isBusy;!function(){dfr_isBusy=function(t){return null==t||"function"!=typeof t.then?!1:is_Function(t.isBusy)?t.isBusy():is_Function(t.state)?"pending"===t.state():(log_warn("Class or jQuery deferred interface expected"),!1)}}();var ani_requestFrame,ani_clearFrame,ani_updateAttr;!function(){function t(t){null!=t.onEnterFrame&&(null!=t.__frame&&ani_clearFrame(t.__frame),t.__frame=ani_requestFrame(t.onEnterFrame))}ani_requestFrame=global.requestAnimationFrame,ani_clearFrame=global.cancelAnimationFrame,ani_updateAttr=function(e,n,r,i,o){var l=e.attr[n+"-transition"];if(null==l&&is_Object(o)&&(l=o.transition),null==l)return e.attr[n]=i,null!=r&&(e[r]=i),void t(e);var u=e.__tweens;null==u&&(u=e.__tweens=new TweenManager(e));var s=e[r],a=i;u.start(n,r,s,a,l)}}();var Children_={select:function(t,e){for(var n in e){var r=e[n],i=null,o=null;if(r instanceof Array&&(o=r[0],i=r.splice(1)),"string"==typeof r&&(o=r),null==r||null==o)return log_error("Unknown component child",n,e[n]),void log_warn("Is this object shared within multiple compo classes? Define it in constructor!");var l=o.indexOf(":"),u=o.substring(0,l);u=Compo.config.selectors[u],null==u?t.compos[n]=t.$[0].querySelector(o):(o=o.substring(++l).trim(),t.compos[n]=u(t,o));var s=t.compos[n];null!=i&&(null!=s.$&&(s=s.$),Events_.on(t,i,s))}}},Events_={on:function(t,e,n){null==n&&(n=t.$);for(var r,i=e instanceof Array,o=i?e.length:1,l=0;i?o>l:1>l;l++)if(r=i?e[l]:e,r instanceof Array)null!=EventDecorator&&(r[0]=EventDecorator(r[0])),n.on.apply(n,r);else for(var u in r){var s,a,c="string"==typeof r[u]?t[r[u]]:r[u],f=u.indexOf(":");-1!==f?(s=u.substring(0,f),a=u.substring(f+1).trim()):s=u,null!=EventDecorator&&(s=EventDecorator(s)),domLib_on(n,s,a,fn_proxy(c,t))}}},EventDecorator=null,EventDecos=function(){var t=function(){if(null==document)return!1;if("createTouch"in document)return!0;try{return!!document.createEvent("TouchEvent").initTouchEvent}catch(t){return!1}}();return{touch:function(e){return t===!1?e:"click"===e?"touchend":"mousedown"===e?"touchstart":"mouseup"===e?"touchend":"mousemove"===e?"touchmove":e}}}(),Pipes=function(){function t(t,e){return function(n){new u(t).emit(e,n)}}function e(t,e){return null==e.pipes[t]?void log_error("Controller has no pipes to be added to collection",t,e):(null==l[t]&&(l[t]=[]),void l[t].push(e))}function n(t,e){for(var n=l[t],r=n.length;--r>-1;)n[r]===e&&n.splice(r,1)}function r(t){var e=t.pipes;for(var r in e)n(r,t)}function i(t){return function(){r(t),t=null}}function o(t){var n=t.pipes;if(null==n)return void log_error("Controller has no pipes",t);for(var r in n)e(r,t);Compo.attachDisposer(t,i(t))}var l={};mask.registerAttrHandler("x-pipe-signal","client",function(e,n,r,i,o,l){for(var u,s=n.split(";"),a=s.length,c=-1;++c<a;)if(u=s[c].trim(),""!==u){var f,h,p=u.indexOf(":"),d=u.substring(0,p),v=u.substring(p+1).trim(),m=v.indexOf(".");if(-1===m)return void log_error('Pipe-slot is invalid: {0} Usage e.g. "click: pipeName.pipeSignal"',u);f=v.substring(0,m),h=v.substring(++m),!d&&log_error("Pipe-slot is invalid. Event type is not set",n),dom_addEventListener(o,d,t(f,h))}});var u=class_create({name:null,constructor:function s(t){return this instanceof s==!1?new s(t):(this.name=t,this)},emit:function(t){var e=l[this.name],n=this.name,r=_Array_slice.call(arguments,1);if(null==e)return void log_warn("Pipe.emit: No signals were bound to:",n);for(var i=e.length,o=!1;-1!==--i;){var u=e[i],s=u.pipes[n];if(null!=s){var a=s[t];null!=a&&(a.apply(u,r),o=!0)}}o===!1&&log_warn("Pipe `%s` has not slots for `%s`",n,t)}});return u.addController=o,u.removeController=r,{addController:o,removeController:r,pipe:u}}(),Tween;!function(){function t(t,e){if(null==t)return log_error("Easing: Invalid duration in "+e),0;var n=parseFloat(t);if(t.indexOf("ms")>-1)return n;if(t.indexOf("s")>-1)return 1e3*n;throw Error("Unsupported duration:"+t)}function e(t){if(null==t)return n.linear;var e=n[t];return is_Function(e)===!1?(log_error("Unsupported timing:"+t+". Available:"+Object.keys(n).join(",")),n.linear):e}Tween=class_create({timing:null,duration:null,startedAt:null,start:null,diff:null,end:null,animating:null,constructor:function(n,r,i,o,l){var u=/(\d+m?s)\s*([\w\-]+)?/.exec(l);this.duration=t(u[1],l),this.timing=e(u[2]),this.start=+i,this.end=+o,this.diff=this.end-this.start,this.key=n,this.prop=r,this.animating=!0},tick:function(t,e){null==this.startedAt&&(this.startedAt=t);var n=t-this.startedAt,r=this.timing(n,this.start,this.diff,this.duration);n>=this.duration&&(this.animating=!1,r=this.end),e.attr[this.key]=r,this.prop&&(e[this.prop]=r)}});var n={linear:function(t,e,n,r){return n*t/r+e},linearEase:function(t,e,n,r){return n*t/r+e},easeInQuad:function(t,e,n,r){return n*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){return n*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){return n*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){return-n*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,r){return n*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){return 0==t?e:n*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){return t==r?e+n:n*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){return 0==t?e:t==r?e+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){
var i=1.70158,o=0,l=n;return 0==t?e:1==(t/=r)?e+n:(o||(o=.3*r),l<Math.abs(n)?(l=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/l),-(l*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=1.70158,o=0,l=n;return 0==t?e:1==(t/=r)?e+n:(o||(o=.3*r),l<Math.abs(n)?(l=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/l),l*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/o)+n+e)},easeInOutElastic:function(t,e,n,r){var i=1.70158,o=0,l=n;return 0==t?e:2==(t/=r/2)?e+n:(o||(o=r*(.3*1.5)),l<Math.abs(n)?(l=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/l),1>t?-.5*(l*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o))+e:l*Math.pow(2,-10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*.5+n+e)},easeInBack:function(t,e,n,r,i){return void 0==i&&(i=1.70158),n*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){return void 0==i&&(i=1.70158),n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){return void 0==i&&(i=1.70158),(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,r,i){return r-n.easeOutBounce(i-t,0,r,i)+e},easeOutBounce:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,r,i){return i/2>t?.5*n.easeInBounce(2*t,0,r,i)+e:.5*n.easeOutBounce(2*t-i,0,r,i)+.5*r+e}}}();var TweenManager=class_create({animating:!1,frame:null,constructor:function(t){this.parent=t,this.tweens={},this.tick=this.tick.bind(this),compo_attachDisposer(t,this.dispose.bind(this))},start:function(t,e,n,r,i){this.tweens[t]=new Tween(t,e,n,r,i),this.process()},process:function(){this.animating||(this.animation=!0,this.frame=ani_requestFrame(this.tick))},dispose:function(){ani_clearFrame(this.frame)},tick:function(t){var e=!1;for(var n in this.tweens){var r=this.tweens[n];null!=r&&(r.tick(t,this.parent),r.animating!==!1?e=!0:this.tweens[n]=null)}return this.parent.onEnterFrame&&this.parent.onEnterFrame(),e?void(this.frame=ani_requestFrame(this.tick)):void(this.animating=!1)}}),KeyboardHandler;!function(){var t,e,n;!function(){t=function(t,e,n){t.addEventListener(e,n,!1)},e=function(t,e,n){t.removeEventListener(e,n,!1)},n=function(t){var e=t.keyCode||t.which;return e>=96&&105>=e?e-48:e}}();var r,i,o;r={backspace:8,tab:9,"return":13,enter:13,shift:16,ctrl:17,control:17,alt:18,option:18,fn:255,pause:19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,start:36,left:37,up:38,right:39,down:40,insert:45,ins:45,del:46,numlock:144,scroll:145,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,";":186,"=":187,"*":106,"+":107,"-":189,".":190,"/":191,",":188,"`":192,"[":219,"\\":220,"]":221,"'":222},i={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},o={16:"shiftKey",17:"ctrlKey",18:"altKey"};var l,u,s,a;!function(){u=function(t,e){return t.ctrlKey||t.altKey?!1:l(t.target)},s=function(t){return null==t.$||0===t.$.length?!1:a(t.$.get(0))},a=function(t){if(document.contains(t)===!1)return!1;if("none"===t.style.display)return!1;var e=t.disabled;return e!==!0},l=function(e){var n=e.tagName;return"TEXTAREA"===n?!0:"INPUT"!==n?!1:-1===t.indexOf(" "+e.type+" ")};var t=" button submit checkbox file hidden image radio range reset "}();var c;!function(){function e(){r=new _,t(window,"keydown",c),t(window,"keyup",c),t(window,"focus",c.reset)}c={on:function(t,n,i){null==r&&e();var o=f.create(t,"keydown",n,i);r.attach(o)},off:function(t){r.off(t)},handleEvent:function(t){r.handle(t.type,n(t),t)},reset:function(){r.reset()}};var r}();var f;!function(){function t(t){for(var e,n,i=t.split("+"),o=i.length,l=0,u=[];o>l;l++){if(e=i[l].trim(),n=r[e],void 0===n){if(1!==e.length)throw Error("Unexpected sequence. Neither a predefined key, nor a char: "+e);n=e.toUpperCase().charCodeAt(0)}u[l]=n}return{last:u[o-1],keys:u.sort()}}f=function(t){this.set=t},f.parse=function(e){for(var n=e.split(","),r=[],i=n.length,o=0;i>o;o++)r[o]=t(n[o]);return r},f.create=function(t,e,n,r){var i=f.parse(t),o=h.create(i);return null==o&&(o=new p(i)),o.init(e,n,r),o},f.prototype={type:null,ctx:null,set:null,fn:null,init:function(t,e,n){this.type=t,this.ctx=n,this.fn=e},tryCall:null}}();var h;!function(){h=class_create(f,{constructor:function(t,e,n){this.key=e,this.mods=n},tryCall:function(t,e,n){if(t.type!==this.type||n!==this.key)return v;for(var r in this.mods)if(t[r]!==this.mods[r])return v;return this.fn.call(this.ctx,t),d}}),h.create=function(t){if(1!==t.length)return null;for(var e,n,r=t[0].keys,i=r.length,l={shiftKey:!1,ctrlKey:!1,altKey:!1};--i>-1;)if(o.hasOwnProperty(r[i])!==!1)l[o[r[i]]]=!0,n=!0;else{if(null!=e)return null;e=r[i]}return new h(t,e,l)}}();var p,d=1,v=2,m=3,g=4;!function(){p=class_create(f,{index:0,tryCall:function(t,e,n){var r=this.check_(e,n);return r===d&&(this.index=0,this.fn.call(this.ctx,t)),r},fail_:function(){return this.index=0,v},check_:function(t,e){var n=this.set[this.index],r=n.keys,i=n.last,o=t.length;if(o<r.length)return m;if(o>r.length)return this.fail_();if(i!==e)return this.fail_();for(;--o>-1;)if(r[o]!==t[o])return this.fail_();return this.index<this.set.length-1?(this.index++,g):(this.index=0,d)}})}();var _;!function(){_=function(){this.keys=[],this.combs=[]},_.prototype={keys:null,combs:null,attach:function(t){this.combs.push(t)},off:function(t){for(var e=this.combs.length,n=0;e>n;n++)if(this.combs[n].fn===t)return this.combs.splice(n,1),!0;return!1},handle:function(t,e,n){return 0===this.combs.length||this.filter_(n,e)?void 0:"keydown"===t?void(this.add_(e)&&this.emit_(t,n,e)):void("keyup"===t&&(this.emit_(t,n,e),this.remove_(e)))},handleEvent:function(t){var e=n(t),r=t.type;this.handle(r,e,t)},reset:function(){this.keys.length=0},add_:function(t){for(var e,n=this.keys.length,r=0;n>r;r++){if(e=this.keys[r],e===t)return!1;if(e>t)return this.keys.splice(r,0,t),!0}return this.keys.push(t),!0},remove_:function(t){for(var e=this.keys.length;--e>-1;)if(this.keys[e]===t)return void this.keys.splice(e,1)},emit_:function(t,e,n){for(var r,i,o=!1,l=this.combs,u=l.length,s=0;u>s;s++)r=l[s],r.type===t&&(i=r.tryCall(e,this.keys,n),d!==i&&i!==g||e.preventDefault(),i!==m&&i!==g||(o=!0))},filter_:function(t,e){return u(t,e)}}}(),KeyboardHandler={supports:function(t,e){if(null==e)return!1;switch(t){case"press":case"keypress":case"keydown":case"keyup":case"hotkey":case"shortcut":return!0}return!1},on:function(e,r,i,o){"keypress"!==r&&"press"!==r||(r="keydown");var l=f.create(i,r,o);if(l instanceof h)return void t(e,r,function(t){var e=n(t),r=l.tryCall(t,null,e);r===d&&t.preventDefault()});var u=new _;t(e,"keydown",u),t(e,"keyup",u),u.attach(l)},hotkeys:function(t,e){var n,r;for(r in e)n=e[r],c.on(r,n,t);compo_attachDisposer(t,function(){var t;for(t in e)c.off(e[t])})},attach:function(t,e,n,r,i){if(l(t))return void this.on(t,e,n,r);for(var o=i;o&&null==o.slots;)o=o.parent;if(null==o)return void log_error("Slot-component not found:",n);var u=o.hotkeys;null==u&&(u=o.hotkeys={}),u[n]=r}}}();var TouchHandler;!function(){var t,e,n,r;!function(){r="ontouchstart"in global,t=function(t,e,n){t.addEventListener(e,n,!1)},e=function(t,e,n){t.removeEventListener(e,n,!1)},n=function(t,e){var n=new CustomEvent(e,{cancelable:!0,bubbles:!0});t.dispatchEvent(n)}}();var i;!function(){function e(t){var e=null,r=t.changedTouches;return r&&r.length&&(e=r[0]),null==e&&t.touches&&(e=t.touches[0]),null==e?t:n(t,e)}function n(t,e){var n=Object.create(MouseEvent.prototype);for(var r in t)n[r]=t[r];for(var r in l)n[r]=e[r];return new MouseEvent(o[t.type],n)}i=function(e,n,i){this.el=e,this.fn=i,this.dismiss=0,t(e,n,this),t(e,r[n],this)};var r={mousemove:"touchmove",mousedown:"touchstart",mouseup:"touchend"},o={touchmove:"mousemove",touchstart:"mousedown",touchup:"mouseup"};i.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"touchmove":case"touchend":this.dismiss++,t=e(t),this.fn(t);break;case"mousedown":case"mousemove":case"mouseup":--this.dismiss<0&&(this.dismiss=0,this.fn(t))}}};var l={clientX:1,clientY:1,pageX:1,pageY:1,screenX:1,screenY:1}}();var o;!function(){o=function(e,n){this.state=0,this.el=e,this.fn=n,this.startX=0,this.startY=0,this.tStart=0,this.tEnd=0,this.dismiss=0,t(e,"touchstart",this),t(e,"touchend",this),t(e,"click",this)};var r=300,i=10,l=null;o.prototype={handleEvent:function(t){var e=t.type;switch(e){case"touchmove":case"touchstart":case"touchend":l=t.timeStamp,this[e](t);break;case"touchcancel":this.reset();break;case"click":this.click(t)}},touchstart:function(e){t(document.body,"touchmove",this);var n=e.touches[0];this.state=1,this.tStart=e.timeStamp,this.startX=n.clientX,this.startY=n.clientY},touchend:function(t){return this.tEnd=t.timeStamp,1===this.state?(this.dismiss++,this.tEnd-this.tStart<=r?void this.call(t):void n(this.el,"taphold")):void this.reset()},click:function(t){if(null!=l){var e=l-t.timeStamp;if(500>e)return}if(!(--this.dismiss>-1)){var e=t.timeStamp-this.tEnd;400>e||(this.dismiss=0,this.call(t))}},touchmove:function(t){var e=t.touches[0],n=e.clientX-this.startX;if(0>n&&(n*=-1),n>i)return void this.reset();var r=e.clientY-this.startY;return 0>r&&(r*=-1),r>i?void this.reset():void 0},reset:function(){this.state=0,e(document.body,"touchmove",this)},call:function(t){this.reset(),this.fn(t)}}}(),TouchHandler={supports:function(t){if(r===!1)return!1;switch(t){case"click":case"mousedown":case"mouseup":case"mousemove":return!0}return!1},on:function(t,e,n){return"click"===e?new o(t,n):new i(t,e,n)}}}();var Anchor;!function(){Anchor={create:function(e){var n=e.ID;return null==n?void log_warn("Component should have an ID"):void(t[n]=e)},resolveCompo:function(e,n){if(null==e)return null;var r,i,o;do{if(i=e.getAttribute("x-compo-id"),null!=i&&(null==r&&(r=i),o=t[i],null!=o&&(o=Compo.find(o,{key:"ID",selector:r,nextKey:"components"}),null!=o)))return o;e=e.parentNode}while(null!=e&&1===e.nodeType);return r&&n!==!0&&log_warn("No controller for ID",r),null},removeCompo:function(e){var n=e.ID;null!=n&&(t[n]=void 0)},getByID:function(e){return t[e]}};var t={}}();var Compo,CompoProto;!function(){Compo=function(){return this instanceof Compo?void 0:compo_create(arguments)},obj_extend(Compo,{create:function(){return compo_create(arguments)},createClass:function(){var t=compo_create(arguments),e=t.prototype;return e.Construct=t,Class(e)},initialize:function(t,e,n,r,i){function o(t){l={controller:t,type:Dom.COMPONENT}}if(null==t)throw Error("Undefined is not a component");null==r&&(n&&null!=n.nodeType?(r=n,n=null):e&&null!=e.nodeType&&(r=e,e=null));var l;if("string"==typeof t)if(/^[^\s]+$/.test(t)){var u=mask.getHandler(t);if(null==u)throw Error("Component not found: "+t);o(u)}else o(Compo({template:t}));else"function"==typeof t&&o(t);null==i&&null!=r&&(i=Anchor.resolveCompo(r)),null==i&&(i=new Compo);var s=mask.render(l,e,n,null,i),a=i.components[i.components.length-1];return null!=r&&(r.appendChild(s),Compo.signal.emitIn(a,"domInsert")),a},find:function(t,e){return find_findSingle(t,selector_parse(e,Dom.CONTROLLER,"down"))},findAll:function(t,e){return find_findAll(t,selector_parse(e,Dom.CONTROLLER,"down"))},closest:function(t,e){return find_findSingle(t,selector_parse(e,Dom.CONTROLLER,"up"))},children:function(t,e){return find_findChildren(t,selector_parse(e,Dom.CONTROLLER))},dispose:compo_dispose,ensureTemplate:compo_ensureTemplate,attachDisposer:compo_attachDisposer,element:{getCompo:function(t){return Anchor.resolveCompo(t,!0)},getModel:function(t){var e=Anchor.resolveCompo(t,!0);if(null==e)return null;for(var n=e.model;null==n&&null!=e.parent;)e=e.parent,n=e.model;return n}},config:{selectors:{$:function(t,e){var n=domLib_find(t.$,e);return 0===n.length&&log_warn("<compo-selector> - element not found -",e,t),n},compo:function(t,e){var n=Compo.find(t,e);return null==n&&log_warn("<compo-selector> - component not found -",e,t),n}},setDOMLibrary:function(t){domLib!==t&&(domLib=t,domLib_initialize())},getDOMLibrary:function(){return domLib},eventDecorator:function(t){return"function"==typeof t?void(EventDecorator=t):"string"==typeof t?(console.error("EventDecorators are not used. Touch&Mouse support is already integrated"),void(EventDecorator=EventDecos[t])):"boolean"==typeof t&&t===!1?void(EventDecorator=null):void 0}},pipe:Pipes.pipe,resource:function(t){for(var e=t;null!=e;){if(e.resource)return e.resource;e=e.parent}return include.instance()},plugin:function(source){eval(source)},Dom:{addEventListener:dom_addEventListener}}),function(){Compo.pause=function(t,n){return null!=n&&(null==n.defers&&(n.defers=[]),null==n.resolve&&obj_extend(n,class_Dfr.prototype),n.async=!0,n.defers.push(t),n.defer()),obj_extend(t,e),function(){Compo.resume(t,n)}},Compo.resume=function(t,e){if(t.async=!1,t.resume&&t.resume(),null!=e){for(var n,r=!1,i=e.defers,o=i.length,l=-1;++l<o;)n=i[l],n!==t?r=r||null!=n:i[l]=null;r===!1&&e.resolve()}},Compo.await=function(e){return(new t).await(e)};var t,e={async:!0,resume:null,await:function(t,e){if(e===!0)return void Compo.await(this).then(t);if(this.async===!1)return void t();if(null==this.resume)return void(this.resume=t);var n=this.resume;this.resume=function(){n.call(this),t.call(this)}}};!function(){function e(t,n){if(t.async===!0)return n.enqueue(),void t.await(n.dequeue);var r=t.components;if(null!=r)for(var i=r.length,o=-1;++o<i;)e(r[o],n)}t=class_create(class_Dfr,{isReady:!1,count:0,constructor:function(){this.dequeue=this.dequeue.bind(this)},enqueue:function(){this.count++},dequeue:function(){0===--this.count&&this.isReady===!0&&this.resolve()},await:function(t){return e(t,this),0===this.count?(this.resolve(),this):(this.isReady=!0,this)}})}()}(),CompoProto={type:Dom.CONTROLLER,__resource:null,__frame:null,__tweens:null,ID:null,tagName:null,compoName:null,nodes:null,components:null,expression:null,attr:null,model:null,scope:null,slots:null,pipes:null,compos:null,events:null,hotkeys:null,async:!1,await:null,resume:null,meta:{mode:null,modelMode:null,attributes:null,serializeNodes:null,readAttributes:null},getAttribute:function(t){var e=this.meta.attributes;if(null==e||void 0===e[t])return this.attr[t];var n=compo_meta_toAttributeKey(t);return this[n]},setAttribute:function(t,e){var n=this.meta.attributes,r=null==n?void 0:n[t],i=null;void 0!==r&&(i=compo_meta_toAttributeKey(t)),ani_updateAttr(this,t,i,e,r),this.onAttributeSet&&this.onAttributeSet(t,e)},onAttributeSet:null,onRenderStart:null,onRenderStartClient:null,onRenderEnd:null,onRenderEndServer:null,onEnterFrame:null,render:null,renderStart:function(t,e,n){if(compo_ensureTemplate(this),is_Function(this.onRenderStart)){var r=this.onRenderStart(t,e,n);void 0!==r&&dfr_isBusy(r)&&compo_prepairAsync(r,this,e)}},renderStartClient:function(t,e,n){if(is_Function(this.onRenderStartClient)){var r=this.onRenderStartClient(t,e,n);void 0!==r&&dfr_isBusy(r)&&compo_prepairAsync(r,this,e)}},renderEnd:function(t,e,n,r){Anchor.create(this,t),this.$=domLib(t),null!=this.events&&Events_.on(this,this.events),null!=this.compos&&Children_.select(this,this.compos),null!=this.hotkeys&&KeyboardHandler.hotkeys(this,this.hotkeys),is_Function(this.onRenderEnd)&&this.onRenderEnd(t,e,n,r),is_Function(this.onEnterFrame)&&(this.onEnterFrame=this.onEnterFrame.bind(this),this.onEnterFrame())},appendTo:function(t){return this.$.appendTo(t),this.emitIn("domInsert"),this},append:function(t,e,n){var r;if(null==this.$){var i=is_String(t)?mask.parse(t):t,r=this;return n&&(r=find_findSingle(this,selector_parse(n,Dom.CONTROLLER,"down")),null==r)?(log_error("Compo::append: Container not found"),this):(r.nodes=[r.nodes,i],this)}var o=mask.render(t,e,null,null,this);return r=n?this.$.find(n):this.$,r.append(o),this.emitIn("domInsert"),this},find:function(t){return Compo.find(this,t)},findAll:function(t){return Compo.find(this,t)},closest:function(t){return Compo.closest(this,t)},on:function(){var t=_Array_slice.call(arguments);return arguments.length<3?(log_error("Invalid Arguments Exception @use .on(type,selector,fn)"),this):(null!=this.$&&Events_.on(this,[t]),null==this.events?this.events=[t]:is_Array(this.events)?this.events.push(t):this.events=[t,this.events],this)},remove:function(){return compo_removeElements(this),compo_detachChild(this),compo_dispose(this),this.$=null,this},slotState:function(t,e){return Compo.slot.toggle(this,t,e),this},signalState:function(t,e){return Compo.signal.toggle(this,t,e),this},emitOut:function(t){return Compo.signal.emitOut(this,t,this,arguments.length>1?_Array_slice.call(arguments,1):null),this},emitIn:function(t){return Compo.signal.emitIn(this,t,this,arguments.length>1?_Array_slice.call(arguments,1):null),this},$scope:function(t){var e="$scope."+t;return mask.Utils.Expression.eval(e,null,null,this)},$eval:function(t,e,n){return mask.Utils.Expression.eval(t,e||this.model,n,this)}},Compo.prototype=CompoProto}(),function(){var t,e;!function(){e=function(t,n,r,i,o){if(null==t)return!1;var l=!1,u=i,s=null!=t.slots&&t.slots[n];if("string"==typeof s&&(s=t[s]),"function"==typeof s){l=!0;var a=null!=t.slots.__disabled&&t.slots.__disabled[n];if(a!==!0){var c=null==u?s.call(t,r):s.apply(t,[r].concat(u));if(c===!1)return!0;is_ArrayLike(c)&&(u=c)}}if(-1===o&&null!=t.parent)return e(t.parent,n,r,u,o)||l;if(1===o&&null!=t.components)for(var f=t.components,h=f.length,p=0;h>p;p++)l=e(f[p],n,r,u,o)||l;return l},t=function(e,n,r,i){if(null==e)return!1;var o=e.slots;if(null!=o&&null!=o[n]&&("string"==typeof o[n]&&(o[n]=e[o[n]]),"function"==typeof o[n])){if(i!==!0)return!0;if(null==o.__disabled||o.__disabled[n]!==!0)return!0}if(-1===r&&null!=e.parent)return t(e.parent,n,r);if(1===r&&null!=e.components)for(var l=0,u=e.components.length;u>l;l++)if(t(e.components[l],n,r))return!0;return!1}}();var n,r;!function(){function e(t,e,n){var r=t.slots;if(null!=r&&r.hasOwnProperty(e)!==!1){var i=r.__disabled;null==i&&(i=r.__disabled={}),i[e]=n===!1}}function i(t,n,r){e(t,n,r);var o=t.components;if(null!=o)for(var l=o.length,u=0;l>u;u++)i(o[u],n,r)}function o(t,e,n){return null==t.$?void log_warn("Controller has no elements to toggle state"):void domLib().add(t.$.filter("[data-signals]")).add(t.$.find("[data-signals]")).each(function(t,r){var i=r.getAttribute("data-signals");null!=i&&-1!==i.indexOf(e)&&r[n===!0?"removeAttribute":"setAttribute"]("disabled","disabled")})}n=function(t,n,r){for(var l=t,u=t;null!=(l=l.parent);)e(l,n,r),null!=l.$&&0!==l.$.length&&(u=l);i(t,n,r),o(u,n,r)},r=function(n,r,i){e(n,r,i),(i||!t(n,r,-1,!0)&&!t(n,r,1,!0))&&o(n,r,i)}}(),function(){function n(t,e){r(t,e||t)}function r(t,e){mask.registerAttrHandler("x-"+t,"client",function(t,n,r,o,l,u){i(l,u,n,e)})}function i(t,e,n,r){for(var i,l,u,s,a,c,f,h,p=n.split(";"),d="",v=p.length,m=-1;++m<v;)i=p[m].trim(),""!==i&&(a=c=f=null,l=i.indexOf(":"),-1!==l&&(a=i.substring(0,l),u=a.indexOf("("),-1!==u&&(c=a.substring(u+1,a.lastIndexOf(")")),a=a.substring(0,u),""===c&&log_error("Not valid signal parameter")),i=i.substring(l+1).trim()),f=i,h=o(e,f),null==r?s=a:(s=r,c=a),s||log_error("Signal: Eventname is not set",p[m]),h?(d+=","+f+",",dom_addEventListener(t,s,h,c,e)):log_warn("Slot not found:",f));if(""!==d){var g=t.getAttribute("data-signals");null!=g&&(d=g+d),t.setAttribute("data-signals",d)}}function o(n,r){return t(n,r,-1)===!1?null:function(t){var i=arguments.length>1?_Array_slice.call(arguments,1):null;e(n,r,t,i,-1)}}r("signal"),n("change"),n("click"),n("tap","click"),n("keypress"),n("keydown"),n("keyup"),n("mousedown"),n("mouseup"),n("press","keydown"),n("shortcut","keydown")}(),obj_extend(Compo,{signal:{toggle:n,emitOut:function(t,n,r,i){var o=e(t,n,r,i,-1);!o&&log_warn("Signal %c%s","font-weight:bold;",n,"was not captured")},emitIn:function(t,n,r,i){e(t,n,r,i,1)},enable:function(t,e){n(t,e,!0)},disable:function(t,e){n(t,e,!1)}},slot:{toggle:r,enable:function(t,e){r(t,e,!0)},disable:function(t,e){r(t,e,!1)},invoke:function(t,e,n,r){var i=t.slots;return null==i||"function"!=typeof i[e]?(log_error("Slot not found",e,t),null):null==r?i[e].call(t,n):i[e].apply(t,[n].concat(r))}}})}();var DomLite;return function(t){function e(t,e,n){if(null==t)return n||t;for(var r=t.length,i=-1;++i<r;)e.call(n||t,t[i],i);return n||t}function n(t,n,r,i){return e(n,function(e,o){t=r.call(i||n,t,n[o],o)}),t}function r(t,e,n){if(null==t)return-1;for(var r=t.length,i=-1;++i<r;)if(e.call(n||t,t[i],i)===!0)return i;return-1}if(null!=t){Compo.DomLite=DomLite=function(t){return this instanceof DomLite==!1?new DomLite(t):this.add(t)},null==domLib&&(domLib=DomLite);var i=DomLite.fn={constructor:DomLite,length:0,add:function(t){if(null==t)return this;if(is_Array(t)===!0)return e(t,this.add,this);var n=t.nodeType;return 11===n?e(t.childNodes,this.add,this):null==n?"number"==typeof t.length?e(t,this.add,this):(log_warn("Uknown domlite object"),this):(this[this.length++]=t,this)},on:function(){return o.call(this,l,s,arguments)},off:function(){return o.call(this,u,a,arguments)},find:function(t){return e(this,function(e){this.add(f.call(e,t))},new DomLite)},filter:function(t){return e(this,function(e,n){h(e,t)===!0&&this.add(e)},new DomLite)},parent:function(){var t=this[0];return new DomLite(t&&t.parentNode)},children:function(t){var n=e(this,function(t){this.add(t.childNodes)},new DomLite);return null==t?n:n.filter(t)},closest:function(t){for(var e=this[0],n=new DomLite;null!=e&&null!=e.parentNode;)if(e=e.parentNode,h(e,t))return n.add(e);return n},next:function(t){for(var e=this[0],n=new DomLite;null!=e&&null!=e.nextElementSibling;){if(e=e.nextElementSibling,null==t)return n.add(e);if(h(e,t))return n.add(e)}return n},remove:function(){return e(this,function(t){t.parentNode.removeChild(t)})},text:function(t){return 0===arguments.length?n("",this,function(t,e){return t+e.textContent}):e(this,function(e){e.textContent=t})},html:function(t){return 0===arguments.length?n("",this,function(t,e){return t+e.innerHTML}):e(this,function(e){e.innerHTML=t})},val:function(t){return 0===arguments.length?0===this.length?null:this[0].value:(0!==this.length&&(this[0].value=t),this)},focus:function(){return e(this,function(t){t.focus&&t.focus()})}};!function(){e(["show","hide"],function(t){i[t]=function(){return e(this,function(e){e.style.display="hide"===t?"none":""})}})}(),function(){function t(t,e,n){null!=t&&null!=n&&t.insertBefore(n,e)}function n(e,n,r){var i=null!=n?n.nextSibling:null;t(e,i,r)}var r={append:function(t,e){n(t,t.lastChild,e)},prepend:function(e,n){t(e,e.firstChild,n)},after:function(t,e){n(t.parentNode,t,e)},before:function(e,n){t(e.parentNode,e,n)}};e(["append","prepend","before","after"],function(t){var n=r[t];i[t]=function(t){var r=is_Array(t);return e(this,function(i){return r?void e(t,function(t){n(i,t)}):void n(i,t)})}})}();var o,l,u,s,a,c=t.documentElement,f=c.querySelectorAll,h=function(){var t=c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector||c.matchesSelector;return function(e,n){return null==e||1!==e.nodeType?!1:t.call(e,n)}}();!function(){function t(t,n,r,i){return e(t,function(t){n.call(t,r,i,!1)})}o=function(t,n,r){var i,o=r.length;return 2===o&&(i=t),3===o&&(i=n),null!=i?e(this,function(t){i.apply(DomLite(t),r)}):(log_error("`DomLite.on|off` - invalid arguments count"),this)},l=function(e,r){return t(this,n,e,r)},u=function(e,n){return t(this,r,e,n)},s=function(t,e,n){function r(t){var r=t.target,i=t.currentTarget;if(i!==r)for(;null!=r&&r!==i;){if(h(r,e))return void n(t);r=r.parentNode}}return(n._guards||(n._guards=[])).push(r),l.call(this,t,r)},a=function(t,n,r){return e(r._quards,function(e){u.call(this,t,e)},this)};var n=c.addEventListener,r=c.removeEventListener}(),function(){var t=null!=c.classList,n=t===!0?function(t,e){return t.classList.contains(e)}:function(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")};i.hasClass=function(t){return-1!==r(this,function(e){return n(e,t)})};var o;!function(){function t(t,e){t.className+=" "+e}function e(t,e){t.className=(" "+t.className+" ").replace(" "+e+" "," ")}o={add:function(e,r){n(e,r)===!1&&t(e,r)},remove:function(t,r){n(t,r)===!0&&e(t,r)},toggle:function(r,i){var o=n(r,i)===!0?e:t;o(r,i)}}}(),e(["add","remove","toggle"],function(n){var r=t===!1?o[n]:function(t,e){var r=t.classList;r[n].call(r,e)};i[n+"Class"]=function(t){return e(this,function(e){r(e,t)})}})}(),function(){var n=function(e){var n=t.createEvent("Event");return n.initEvent(e,!0,!0),n},r=function(e,r){if(null==r)return n(e);var i=t.createEvent("CustomEvent");return i.initCustomEvent(e,!0,!0,r),i},o=function(t,e){t.dispatchEvent(e)};i.trigger=function(t,n){var i=r(t,n);return e(this,function(t){o(t,i)})}}(),function(){i.attr=function(t,n){return void 0===n?this[0]&&this[0].getAttribute(t):e(this,function(e){e.setAttribute(t,n)})},i.removeAttr=function(t){return e(this,function(e){e.removeAttribute(t)})}}(),Object.setPrototypeOf?Object.setPrototypeOf(i,Array.prototype):i.__proto__&&(i.__proto__=Array.prototype),DomLite.prototype=i,domLib_initialize()}}(global.document),domLib_initialize(),mask.registerHandler(":slot",SlotHandler),SlotHandler.prototype={constructor:SlotHandler,renderEnd:function(t,e,n,r){this.slots={},this.expression=this.attr.on,this.slots[this.attr.signal]=this.handle},handle:function(){var t=this.expression;mask.Utils.Expression.eval(t,this.model,global,this)}},Compo}(Mask),jmask=exports.jmask=Mask.jmask=function(t){function e(t){return"string"!=typeof t?t:s(t)}function n(t){return this instanceof n==!1?new n(t):null==t?this:t.type===o.SET?t:this.add(t)}var r,i,o=t.Dom,l=t.render,u=t.parse,s=t.Utils.ensureTmplFn,a=(t.Compo||Compo).signal.emitIn;!function(){r=function(t,e){if(is_ArrayLike(t)===!1)return void e(t);for(var n=t.length,r=-1;++r<n;)e(t[r],r)},function(){function t(t,n){return t===n?(e=!0,0):1}i=function(n){if(e=!1,n.sort(t),e===!1)return n;for(var r=[],i=0,o=0,l=n.length-1;l>i;)n[i++]===n[i]&&(r[o++]=i);for(;o--;)n.splice(r[o],1);return n};var e=!1}()}();var c,f,h;!function(){function t(t){return function(n){return e(n,t)}}function e(t,n,r){if("string"!=typeof t)return!1;if(null==r&&(r=0),r=t.indexOf(n,r),-1===r)return!1;if(r>0&&t.charCodeAt(r-1)>32)return e(t,n,r+1);var i=t.length,o=n.length;return i-o>r&&t.charCodeAt(r+o)>32?e(t,n,r+1):!0}function n(t,e,n){for(var r,i=!1,o=!1;n>e&&(r=t.charCodeAt(e),34!==r&&39!==r||(i=!i),92===r&&(o=!o),!(46===r||35===r||91===r||93===r||62===r||33>r)||i===!0||o===!0);)e++;return e}c=function(e,a,c){null==e&&log_error("selector is null for the type",a);var f=typeof e;if("object"===f||"function"===f)return e;var h,p,d,v,m,g,_,y,b,x,w,C=0,k=e.length;for(h="up"===c?i:a===o.SET?l:u;k>C;)if(m=e.charCodeAt(C),33>m)C++;else if(62!==m){if(g=n(e,C+1,k),46===m)p="class",d=s,v=t(e.substring(C+1,g));else if(35===m)p="id",d=s,v=e.substring(C+1,g);else if(91===m)x=e.indexOf("=",C),-1===x&&console.error('Attribute Selector: should contain "="'),d=s,p=e.substring(C+1,x),m=e.charCodeAt(x+1),w=34===m||39===m?2:1,v=e.substring(x+w,g-w+1),g++;else{if(58===m&&58===e.charCodeAt(C+1)){C+=2;var S,N,j=C;do m=e.charCodeAt(C);while(m>=97&&122>=m&&++C<k);if(S=e.substring(j,C),40===m){j=++C;do m=e.charCodeAt(C);while(41!==m&&++C<k);N=e.substring(j,C),C++}var E=r(S,N);null==_&&(_={selector:"*",nextKey:h}),null==y&&(y=_),null==_.filters&&(_.filters=[]),_.filters.push(E);continue}null!=_&&(_.next={type:"any",matcher:null},b=_,_=null),d=null,p=a===o.SET?"tagName":"compoName",v=e.substring(C,g)}C=g,null!=_?(null==_.filters&&(_.filters=[]),_.filters.push({key:p,selector:v,prop:d})):(_={key:p,prop:d,selector:v,nextKey:h,filters:null},null==y&&(y=_),null!=b&&(b.next.matcher=_))}else null==_?y=_={selector:"__scope__",nextKey:h,filters:null,next:{type:"children",matcher:null}}:_.next={type:"children",matcher:null},b=_,_=null,C++;return b&&b.next&&(b.next.matcher=_),y},f=function(t,e,n){if("string"==typeof e&&(null==n&&(n=o[t.compoName?"CONTROLLER":"SET"]),e=c(e,n)),"function"==typeof e)return e(t);var r=e.prop?t[e.prop]:t,i=!1;if(null==r)return!1;if("*"===e.selector?i=!0:"function"==typeof e.selector?i=e.selector(r[e.key]):null!=e.selector.test?e.selector.test(r[e.key])&&(i=!0):r[e.key]===e.selector&&(i=!0),i===!0&&null!=e.filters)for(var l,u=0,s=e.filters.length;s>u;u++)if(l=e.filters[u],"function"!=typeof l){if(f(t,l,n)===!1)return!1}else if(i=l(t,n),i===!1)return!1;return i},h=function(t){return t.type===o.SET?l:u};var r,i="parent",l="nodes",u="components",s="attr";!function(){r=function(n,r){var i=t[n];if(void 0!==i)return i;var o=e[n];if(void 0!==o)return o(r);throw new Error("Uknown pseudo selector:"+n)};var t={text:function(t){return t.type===o.TEXTNODE},node:function(t){return t.type===o.NODE}},e={not:function(t){return function(e,n){return!f(e,t,n)}}}}()}();var p,d,v,m,g;!function(){p=function(t,e){if(null==e)return t;var n=[];return r(t,function(t,r){f(t,e)&&n.push(t)}),n},d=function(t,e,n,i){return null==t?n:(null==n&&(n=[]),null==i&&("__scope__"===e.selector?(i=!1,e=e.next.matcher):i=!0),r(t,function(t){if(f(t,e)===!1)return void(null==e.next&&i!==!1&&d(t[e.nextKey],e,n,i));if(null==e.next)return n.push(t),void(i===!0&&d(t[e.nextKey],e,n,i));var r=e.next;i="children"!==r.type,d(t[e.nextKey],r.matcher,n,i)}),n)},v=function(t,e){var n=obj_create(t),r=t.attr;null!=r&&(n.attr=obj_create(r));var i=t.nodes;if(null!=i)if(is_ArrayLike(i)===!1)n.nodes=[v(i,n)];else{n.nodes=[];for(var o=i.length,l=0;o>l;l++)n.nodes[l]=v(i[l],n)}return n},m=function(t){for(var e,n=t;null!=n;)e=n,n=n.nodes&&n.nodes[0];return e},g=function(t,e,n,r){if(o.TEXTNODE===t.type)return is_Function(t.content)?t.content("node",e,n,null,r):t.content;var i="";if(null!=t.nodes)for(var l,u=0,s=t.nodes.length;s>u;u++)l=t.nodes[u],i+=g(l,e,n,r);return i}}();var _=n.prototype={constructor:n,type:o.SET,length:0,components:null,add:function(t){var e,n;if("string"==typeof t&&(t=u(t)),is_ArrayLike(t)){for(e=0,n=t.length;n>e;e++)this.add(t[e]);return this}"function"==typeof t&&null!=t.prototype.type&&(t={controller:t,type:o.COMPONENT});var r=t.type;if(r===o.FRAGMENT){var i=t.nodes;for(e=0,n=i.length;n>e;)this[this.length++]=i[e++];return this}if(r===o.CONTROLLER){if(null!=t.nodes&&t.nodes.length)for(e=t.nodes.length;0!==e;)t.nodes[--e].parent=t;null!=t.$&&(this.type=o.CONTROLLER)}return this[this.length++]=t,this},toArray:function(){return _Array_slice.call(this)},render:function(t,e,n,r){if(this.components=[],1===this.length)return l(this[0],t,e,n,r||this);null==n&&(n=document.createDocumentFragment());for(var i=0,o=this.length;o>i;i++)l(this[i],t,e,n,r||this);return n},prevObject:null,end:function(){return this.prevObject||this},pushStack:function(t){var e;return e=n(t),e.prevObject=this,e},controllers:function(){return null==this.components&&console.warn("Set was not rendered"),this.pushStack(this.components||[])},mask:function(e){return 0!==arguments.length?this.empty().append(e):t.stringify(this)},text:function(t,e,n){if("string"==typeof t&&1===arguments.length){for(var r=[new o.TextNode(t)],i=0,l=this.length;l>i;i++)this[i].nodes=r;return this}for(var u="",i=0,l=this.length;l>i;i++)u+=g(this[i],t,e,n);return u}};return arr_each(["append","prepend"],function(t){_[t]=function(e){for(var r,i,o=n(e),l=0,u=this.length;u>l;l++){i=this[l],r=o.toArray();for(var s=0,a=r.length;a>s;s++)r[s].parent=i;null!=i.nodes?i.nodes="append"===t?i.nodes.concat(r):r.concat(i.nodes):i.nodes=r}return this}}),arr_each(["appendTo"],function(t){_[t]=function(t,e,r,i){return null==i&&(i=this),null!=t.nodeType&&"function"==typeof t.appendChild?(t.appendChild(this.render(e,r,null,i)),a(i,"domInsert"),this):(n(t).append(this),this)}}),function(){function t(t,e,n){t[e]=n}function n(t){var e={};return t.split(";").forEach(function(t){if(""!==t){var n=t.indexOf(":"),r=t.substring(0,n).trim(),i=t.substring(n+1).trim();e[r]=i}}),e}function r(t){var e,n="";for(e in t)n+=e+":"+t[e]+";";return n}function i(t,e){return t+":"+e+";"}_.removeAttr=function(t){return coll_each(this,function(e){e.attr[t]=null})},_.attr=function(t,n){function r(t,n,r){t.attr[n]=e(r);
}function i(t,e){for(var n in e)r(t,n,e[n])}if(1===arguments.length&&is_String(t))return 0!==this.length?this[0].attr[t]:null;var o=is_String(t)?r:i;return coll_each(this,function(e){o(e,t,n)})},_.prop=function(t,e){return 1===arguments.length?0!==this.length?this[0][t]:this[0].attr[t]:coll_each(this,function(n){n[t]=e})},_.removeProp=function(t){return coll_each(this,function(e){e.attr[t]=null,e[t]=null})},_.tag=function(t){return 0===arguments.length?this[0]&&this[0].tagName:coll_each(this,function(e){e.tagName=t})},_.css=function(e,o){if(arguments.length<=1&&"string"==typeof e){if(null==this.length)return null;var l=this[0].attr.style;if(null==l)return null;var u=n(l);return null==e?u:u[e]}if(null==e)return this;var s="object"==typeof e?r:i,a="object"==typeof e?obj_extend:t;return coll_each(this,function(t){var i=t.attr.style;if(null==i)return void(t.attr.style=s(e,o));var l=n(i);a(l,e,o),t.attr.style=r(l)})}}(),function(){function t(t){var e=t.attr["class"];return"string"==typeof e?e:""}function e(e,n){return-1!==(" "+t(e)+" ").indexOf(" "+n+" ")}function n(e,n){e.attr["class"]=(t(e)+" "+n).trim()}function r(e,n){e.attr["class"]=(" "+t(e)+" ").replace(" "+n+" ","").trim()}_.hasClass=function(t){return coll_find(this,function(n){return e(n,t)})};var i={add:function(t,r){e(t,r)===!1&&n(t,r)},remove:function(t,n){e(t,n)===!0&&r(t,n)},toggle:function(t,i){var o=e(t,i)===!0?r:n;o(t,i)}};arr_each(["add","remove","toggle"],function(t){var e=i[t];_[t+"Class"]=function(t){return coll_each(this,function(n){e(n,t)})}})}(),obj_extend(_,{clone:function(){return n(coll_map(this,v))},wrap:function(t){var e=n(t);if(0===e.length)return log_warn("Not valid wrapper",t),this;var r=coll_map(this,function(t){var n=e.clone()[0];if(m(n).nodes=[t],null!=t.parent){var r=coll_indexOf(t.parent.nodes,t);-1!==r&&t.parent.nodes.splice(r,1,n)}return n});return n(r)},wrapAll:function(t){var e=n(t);return 0===e.length?(log_error("Not valid wrapper",t),this):(this.parent().mask(e),m(e[0]).nodes=this.toArray(),this.pushStack(e))}}),arr_each(["empty","remove"],function(t){_[t]=function(){return coll_each(this,e[t])};var e={remove:function(t){null!=t.parent&&coll_remove(t.parent.nodes,t)},empty:function(t){t.nodes=null}}}),obj_extend(_,{each:function(t,e){for(var n=0;n<this.length;n++)t.call(e||this,this[n],n);return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++)n.push(t.call(e||this,this[r],r));return this.pushStack(n)},eq:function(t){return-1===t?this.slice(t):this.slice(t,t+1)},get:function(t){return 0>t?this[this.length-t]:this[t]},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))}}),arr_each(["filter","children","closest","parent","find","first","last"],function(t){_[t]=function(e){var r,l,u=[],s=null==e?null:c(e,this.type,"closest"===t?"up":"down");switch(t){case"filter":return n(p(this,s));case"children":var a=h(this);for(r=0;r<this.length;r++){l=this[r];var v=l[a];null!=v&&(u=u.concat(null==s?v:p(v,s)))}break;case"parent":for(r=0;r<this.length;r++)l=this[r].parent,!l||l.type===o.FRAGMENT||s&&f(l,s)||u.push(l);i(u);break;case"closest":case"find":if(null==s)break;for(r=0;r<this.length;r++)d(this[r][s.nextKey],s,u);break;case"first":case"last":var m;for(r=0;r<this.length;r++)if(m="first"===t?r:this.length-r-1,l=this[m],null==s||f(l,s)){u[0]=l;break}}return this.pushStack(u)}}),n.prototype.fn=n.prototype,n}(Mask);return function(t,e){function n(t){return t.parentNode.removeChild(t)}function r(t){if(null!=t)for(var e=t.length,r=-1;++r<e;)n(t[r])}function i(t,e){return e.parentNode.insertBefore(t,e.nextSibling)}function o(t,e){return e.parentNode.insertBefore(t,e)}function l(){}function u(){}function s(t,e){if(null==e&&(e=[]),null==t.components)return e;for(var n,r=t.components,i=0,o=r.length;o>i;i++)n=r[i],"validate"!==n.compoName?s(n):e.push(n);return e}function a(){}var c,f,h,p,d,v,m,g,_="undefined"!=typeof e?e:t.Compo||global.Compo,y=_.Dom.addEventListener,b=t.registerHandler,x=t.registerAttrHandler,w=t.registerUtil,C=_.config.getDOMLibrary();!function(){function t(t,e){for(var n,r=-1,i=e.length-1;++r<i;)n=e[r],null==t[n]&&(t[n]={}),t=t[n];return t}function e(t){return null==t||"object"!=typeof t?null:"number"==typeof t.length&&"function"==typeof t.slice?k.Array:"function"==typeof t.toUTCString?k.Date:null}function n(n,i,l,u){var s=u.length,c=s>1?t(n,u):n,f=u[s-1],h=c[f];if(s>1&&r(n,u),"length"===f){var p=e(c);if(null!=p)return a(c,p,function(){for(var t=l.length,e=-1;++e<t;)l[e].apply(null,arguments)}),h}return C(c,f,{get:function(){return h},set:function(t){if(t!==h){var r=h;h=t;var u=0,s=l.length,c=e(t);if(null!=c)for(;s>u;u++)a(t,c,l[u]);if(null!=n[y][w])return void(n[y][w][i]=1);for(u=0;s>u;u++)l[u](t);o(n,i,r)}},configurable:!0,enumerable:!0}),h}function r(t,e){for(var n,r=l(t),o="",u=e.length-1,s=0;u>s;s++)n=e[s],o+=n+".",i(o,t,n,r),t=t[n]}function i(t,e,n,r){var i,o=e[n];C(e,n,{get:function(){return o},set:function(e){e!==o&&(i=o,o=e,r(t,i))},configurable:!0,enumerable:!0})}function o(t,e,n){var r=t[y];if(null!=r)for(var i in r)if(0===i.indexOf(e+".")){var o,l,u=r[i].slice(0),s=u.length,a=0;if(0!==s){var f=obj_getProperty(t,i);for(a=0;s>a;a++)l=u[a],h(t,i,l),null!=n&&"object"==typeof n&&(o=i.substring(e.length+1),h(n,o,l));for(a=0;s>a;a++)u[a](f);for(a=0;s>a;a++)c(t,i,u[a])}}}function l(t){return function(e,n){u(t,e,n)}}function u(t,e,n){var r=t[y];if(null!=r)for(var i in r)if(0===i.indexOf(e)){var o=r[i].slice(0),l=o.length,u=0;if(0!==l){var s,a,f=obj_getProperty(t,i);for(u=0;l>u;u++)s=o[u],h(t,i,s),null!=n&&"object"==typeof n&&(a=i.substring(e.length),h(n,a,s));for(u=0;l>u;u++)o[u](f);for(u=0;l>u;u++)c(t,i,o[u])}}}function s(t,e,n){var r=v(t,e);return arr_contains(r,n)===!1&&r.push(n),r}c=function(t,r,i){if(null==t)return void log_error('Not possible to add the observer for "'+r+'" as current model is undefined.');for(var o=r.split("."),l=o.length,u=-1,c=t;++u<l&&(c=c[o[u]],null!=c);)if(null!=c[y]){var f=o.slice(u+1).join(".");if(null!=c[y][f]){s(c,f,i);var h=s(t,r,i);if(1===h.length){var p=o.splice(0,u);0!==p.length&&n(t,r,h,p,!0)}return}}var h=s(t,r,i);1===h.length&&n(t,r,h,o,!0);var d=obj_getProperty(t,r),v=e(d);null!=v&&a(d,v,i)},f=function(t,e,n){for(var r=e.split("."),i=r.length,o=-1,l=t;++o<i&&(l=l[r[o]],null!=l);)if(null!=l[y]){if(f(l,r.slice(o).join("."),n))return!0;break}var u=t[y];return null==u||null==u[e]?!1:arr_contains(u[e],n)},h=function(t,n,r){if(null==t)return void log_error('Not possible to remove the observer for "'+n+'" as current model is undefined.');for(var i=n.split("."),o=i.length,l=-1,u=t;++l<o&&(u=u[i[l]],null!=u);)if(null!=u[y]){h(u,i.slice(l).join("."),r);break}var s=v(t,n),a=obj_getProperty(t,n);void 0===r?s.length=0:arr_remove(s,r);var c=e(a);null!=c&&_(a,c,r)},p=function(t){var e=t[y];null!=e&&(e[w]={})},d=function(t){var e=t[y],n=null==e?null:e[w];if(null!=n){e[w]=null;var r,i,o,l,u;for(r in n)if(i=t[y][r],l=null==i?0:i.length,0!==l)for(u=-1,o=r===b?t:obj_getProperty(t,r);++u<l;)i[u](o)}},v=function(t,e){var n=t[y];if(null==n&&(n={__dirty:null,__dfrTimeout:null,__mutators:null},C(t,"__observers",{value:n,enumerable:!1})),null==e)return n;var r=n[e];return null==r?n[e]=[]:r},m=function(t,n){var r=e(t);null!=r&&a(t,r,n)},g=function(t,e){_(t,null,e)};var a,_,y="__observers",b="__mutators",x="__dfrTimeout",w="__dirty",C=Object.defineProperty,k={Array:{throttle:!1,methods:["push","unshift","splice","pop","shift","reverse","sort","remove"]},Date:{throttle:!0,methods:["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"]}};!function(){function t(t,r,i,o){var l=o===!0?n:e;return function(){return l(t,r,i,_Array_slice.call(arguments))}}function e(t,e,n,i){var o=v(t,b),l=e.apply(t,i);return r(t,o,n,i,l),l}function n(t,e,n,i){var o=v(t,b),l=e.apply(t,i),u=t[y];return null!=u[x]?l:(u[x]=setTimeout(function(){u[x]=null,r(t,o,n,i,l)}),l)}function r(t,e,n,r,i){if(0!==e.length){var o=t[y];if(null!=o[w])return void(o[w][b]=1);for(var l,u=e.length,s=-1;++s<u;)l=e[s],"function"==typeof l&&l(t,n,r,i)}}a=function(e,n,r){var i=n.methods,o=n.throttle,l=v(e,b);if(0===l.length)for(var u,s,a=i.length,c=-1;++c<a;)u=i[c],s=e[u],null!=s&&(e[u]=t(e,s,u,o));l[l.length++]=r},_=function(t,e,n){var r=v(t,b);return void 0===n?void(r.length=0):void arr_remove(r,n)}}()}();var k;!function(){k=function(e){if(null==e||""===e)return null;var n=e,r=typeof e;return"string"===r&&(n=new Date(e),t.test(n)&&-1===e.indexOf("Z")&&e.setMinutes(e.getTimezoneOffset())),"number"===r&&(n=new Date(e)),isNaN(n)===!1&&"function"==typeof n.getFullYear?n:null};var t=/^\d{4}\-\d{2}/}();var S,N,j,E,A,O,T;!function(){S=function(t,e,n,r){if(null==t.components)return i(n,r||t.placeholder);var l,u=t.components,s=null,a=!0,c=u.length,f=e-1;if(null==s)for(;++f<c;)if(l=u[f].elements,l&&l.length){s=l[0];break}if(null==s)for(a=!1,f=c>e?e:c;--f>-1;)if(l=u[f].elements,l&&l.length){s=l[l.length-1];break}return null==s&&(s=r||t.placeholder),a?o(n,s):i(n,s)},N=function(e,n,r,i,o){return t.render(n,r,i,o,e)},j=function(t,e){if(null==t)return!1;null!=t.elements&&(r(t.elements),t.elements=null),_.dispose(t);var n=e&&e.components||t.parent&&t.parent.components;return null==n?(log_error("Parent Components Collection is undefined"),!1):arr_remove(n,t)},E=function(t){_.signal.emitIn(t,"domInsert")},A=function(t,e){if("function"==typeof t.dispose){var n=t.dispose;return void(t.dispose=function(){e.call(this),n.call(this)})}t.dispose=e},O=function(t,e){for(var n=[],r=t.components||[],i=r.length,o=-1;++o<i;)r[o].compoName===e&&n.push(r[o]);return n},T=function(t,e){var n=e,r=e.indexOf(".");for(-1!==r&&(n=e.substring(0,r));null!=t;){if(null!=t.scope&&t.scope.hasOwnProperty(n))return t.scope;t=t.parent}return null}}();var D,M,R,P,L,I,F,$;!function(){function e(t,e,o,l,u){if(null!=l){if("object"==typeof l){var s=M(l.accessor,e,null,o);return null==s||"object"!=typeof s?void console.error("Binding failed to an object over accessor",l.ref):void t(s,l.ref,u)}var a=l,c=a.split("."),f=c.length;if(f>1){var h=c[0];if("$c"===h||"$"===h){if("attr"===c[1])return;var p=n(o,c.slice(1),f-1),d=h.length+1;return void t(p,a.substring(d),u)}if("$scope"===h){var v=r(o,c[1]),d=7;return void t(v,a.substring(d),u)}if("$a"===h||"$ctx"===h||"_"===h||"$u"===h)return}var s=null;i(e,c,f)&&(s=e),null==s&&(s=r(o,c[0],f)),null==s&&(s=e),t(s,a,u)}}function n(t,e,n){for(var r=t;null!=r;){if(i(r,e,n))return r;r=r.parent}return r}function r(t,e,n){for(var r,i=t;null!=i;){if(r=i.scope,null!=r&&void 0!==r[e])return r;i=i.parent}return null}function i(t,e,n){if(null==t)return!1;for(var r=0;n>r;r++)if(t=t[e[r]],null==t)return!1;return!0}var o=t.Utils.Expression;M=o.eval,F=o.parse,$=o.varRefs,D=function(t,e,n,r){if("."===t)return e;var i=M(t,e,n,r);return null==i?"":i},R=function(t,n,r,i,o){if("."===t)return void(null!=n&&m(n,o));var l=F(t),u=$(l,n,r,i);if(null!=u){if("string"==typeof u)return void e(c,n,i,u,o);for(var s,a=null!=u.length&&"function"==typeof u.splice,f=a===!0?u.length:1,h=0;f>h;h++)s=a===!0?u[h]:u,e(c,n,i,s,o)}},P=function(t,n,r,i){if("function"==typeof r&&log_warn("[mask.binding] - expression unbind(expr, model, controller, callback)"),"."===t)return void(null!=n&&g(n,i));var o,l=$(t,n,null,r);if(null!=l){if("string"==typeof l)return void e(h,n,r,l,i);for(var o,u=null!=l.length&&"function"==typeof l.splice,s=u===!0?l.length:1,a=0;s>a;a++)o=u===!0?l[a]:l,e(h,n,r,o,i)}},L=function(t,e,n,r,i){var o=0;return function(){if(++o>1)return o=0,void log_warn("<mask:bind:expression> Concurent binder detected",t);var l=D(t,e,n,r);if(arguments.length>1){var u=_Array_slice.call(arguments);u[0]=l,i.apply(this,u)}else i(l);o--}},I=function(t){var e=0;return function(){return++e>1?(e=0,void log_warn("<listener:expression> concurent binder")):(t(),void e--)}}}();var H,z;!function(){H=function(t,e,n){for(var r,i,o,l,u=t.split(";"),s=[],a=0,c=u.length;c>a;a++)r=u[a].split(":"),1===r.length||2===r.length?(o=2===r.length?r[0]:n,i=r[2===r.length?1:0],l=z(i.trim(),o,e),null!=l&&s.push(l)):log_error('Too much ":" in a signal def.',u[a]);return s},z=function(t,e,n){if(n!==!0)return{signal:t,type:e};var r=t.indexOf(".");return-1===r?(log_error("No pipe name in a signal",t),null):{signal:t.substring(r+1),pipe:t.substring(0,r),type:e}}}();var U;!function(){function t(t,e,n){return null==t||"function"!=typeof t[e]?(log_error("BindingProvider. Controllers accessor.",n,"should be a function. Property:",e),!1):!0}function e(t,e){var n=t.ctr.parent;if(null!=n[e])return n;var r=t.model;return null!=r[e]?r:(log_error("BindingProvider. Accessor `",e,"`should be a function"),null)}function n(t){var e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return e+"-"+(10>n?"0":"")+n+"-"+(10>r?"0":"")+r}function r(t){var e=t.getHours(),n=t.getMinutes();return e+":"+(10>n?"0":"")+n}var i={get:function(t,n){var r=t.objGetter;if(null==r)return D(n,t.model,t.ctx,t.ctr);var i=e(t,r);return null==i?null:i[r](n,t.model,t.ctr.parent)},set:function(t,n,r,i){var o=i.objSetter;if(null==o)return void obj_setProperty(t,n,r);var l=e(i,o);null!=l&&l[o](n,r,i.model,i.ctr.parent)}},o={get:function(e){var n=e.domGetter;if(null==n)return obj_getProperty(e,e.property);var r=e.ctr.parent;return t(r,n,"Getter")===!1?null:r[n](e.element)},set:function(e,n){var r=e.domSetter;if(null==r)return void obj_setProperty(e,e.property,n);var i=e.ctr.parent;t(i,r,"Setter")!==!1&&i[r](n,e.element)}},l={domSet:function(t){return function(e,n){var r=k(n);e.element.value=null==r?"":t(r)}},objSet:function(t){return function(e,n,r){var i=k(r);if(null!=i){var o=obj_getProperty(e,n);return null==o?void obj_setProperty(e,n,i):null==o.getFullYear||isNaN(o)?(o=k(o)||i,t(o,i),void obj_setProperty(e,n,o)):void t(o,i)}}}};U={objectWay:i,domWay:o,SELECT:{get:function(t){var e=t.element,n=e.selectedIndex;if(-1===n)return"";var r=e.options[n],i=r.getAttribute("value");return null==i?r.getAttribute("name"):i},set:function(t,e){var n,r,i,o=t.element,l=o.options,u=l.length;for(i=0;u>i;i++)if(n=l[i],r=n.getAttribute("value"),null==r&&(r=n.getAttribute("name")),r==e)return void(o.selectedIndex=i);log_warn("Value is not an option",e)}},SELECT_MULT:{get:function(t){return coll_map(t.element.selectedOptions,function(t){return t.value})},set:function(t,e){if(coll_each(t.element.options,function(t){t.selected=!1}),null!=e){var n=is_ArrayLike(e)?e:[e];coll_each(n,function(e){for(var n=t.element.options,r=n.length,i=-1;++i<r;)n[i].value==e&&(n[i].selected=!0);log_warn("Value is not an option",e)})}}},DATE:{domWay:{get:o.get,set:function(t,e){var r=k(e);t.element.value=null==r?"":n(r)}},objectWay:{get:i.get,set:l.objSet(function(t,e){t.setFullYear(e.getFullYear()),t.setMonth(e.getMonth()),t.setDate(e.getDate())})}},TIME:{domWay:{get:o.get,set:l.domSet(r)},objectWay:{get:i.get,set:l.objSet(function(t,e){t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds())})}},RADIO:{domWay:{get:function(t){var e=t.element;return e.checked?e.value:null},set:function(t,e){var n=t.element;n.checked=n.value===e}}}}}();var B,q;!function(){function t(t,e,n){if(null==t)return null;for(var r,i,o=t.length,l=-1;++l<o;)if(i=t[l],null!=i&&(r=i(e,n),null!=r))return is_String(r)?{message:r,actual:e}:(null==r.actual&&(r.actual=e),r)}function e(t,n){if(is_Object(t)===!1)return null;var r=t.Validate;if(null!=r){var i=null;if(is_Function(i=r))return i;if(is_Function(i=r[n]))return i}var o=n.indexOf(".");return-1!==o?e(t[n.substring(0,o)],n.substring(o+1)):null}function n(t,n){var r=e(t,n);return null==r?null:function(){var e=r.apply(t,arguments);return null==e?null:is_String(e)?{message:e,property:n,ctx:t}:(e.property=n,e.ctx=t,e)}}function r(t,e,n){var r=q[t];if(null==r)return log_error("Invalid validator",t,"Supports:",Object.keys(q)),null;var i=r(e);return function(e,r){var o=i(e,r);return null==o||o===!0?null:o===!1?n||"Check failed: `"+t+"`":is_String(o)&&0!==o.length?o:null}}function i(t,e,n){var r=e.message||e,i=C(t).next("."+l);return 0===i.length&&(i=C("<div>").addClass(l).html("<span></span><button>&otimes;</button>").insertAfter(t)),i.children("button").off().on("click",function(){i.hide(),n&&n()}).end().children("span").text(r).end().show()}function o(t){return C(t).next("."+l).hide()}var l="-validate__invalid";B={getFnFromModel:n,getFnByName:r,validate:t,validateUi:function(e,n,r,l,u){var s=t(e,n,r);return null!=s?(i(l,s,u),s):(o(l),null)}},q={match:function(t){return function(e){return new RegExp(t).test(e)}},unmatch:function(t){return function(e){return!new RegExp(t).test(e)}},minLength:function(t){return function(e){return e.length>=parseInt(t,10)}},maxLength:function(t){return function(e){return e.length<=parseInt(t,10)}},check:function(t,e){return function(n){return D("x"+t,e.model,{x:n},e)}}}}();var V,G;!function(){function t(t){var e=t.expression,n=t.model,r=t.objectChanged=t.objectChanged.bind(t);if(t.binder=L(e,n,t.ctx,t.ctr,r),R(e,n,t.ctx,t.ctr,t.binder),"dual"===t.bindingType){var i=t.ctr.attr;if(!i["change-slot"]&&!i["change-pipe-event"]){var o=t.element,l=i["change-event"]||i.changeEvent||"change",u=t.domChanged.bind(t);y(o,l,u)}if(!t.objectWay.get(t,t.expression))return setTimeout(function(){t.domWay.get(t)&&t.domChanged()}),t}return t.objectChanged(),t}function e(t,n,r){if(null!=t){var i=t.slots;null!=i&&"function"==typeof i[n]&&i[n].apply(t,r)===!1||e(t.parent,n,r)}}V={},G=class_create({validations:null,constructor:function(t,e,n,r){if(null==r){r="dual";var i=n.compoName;":bind"!==i&&"bind"!==i||(r="single")}var o,l=n.attr;if(this.node=n,this.ctr=n,this.ctx=null,this.model=t,this.element=e,this.value=l.value,this.property=l.property,this.domSetter=l.setter||l["dom-setter"],this.domGetter=l.getter||l["dom-getter"],this.objSetter=l["obj-setter"],this.objGetter=l["obj-getter"],this["typeof"]=l["typeof"]||null,this.dismiss=0,this.bindingType=r,this.log=!1,this.signal_domChanged=null,this.signal_objectChanged=null,this.locked=!1,null==this.property&&null==this.domGetter)switch(e.tagName){case"INPUT":if(o=e.getAttribute("type"),"checkbox"===o){this.property="element.checked";break}if("date"===o){var u=U.DATE;this.domWay=u.domWay,this.objectWay=u.objectWay}else if("number"===o)this["typeof"]="Number";else if("radio"===o){var u=U.RADIO;this.domWay=u.domWay;break}this.property="element.value";break;case"TEXTAREA":this.property="element.value";break;case"SELECT":this.domWay=e.multiple?U.SELECT_MULT:U.SELECT;break;default:this.property="element.innerHTML"}if(l.log&&(this.log=!0,"log"!==l.log&&(this.logExpression=l.log)),l["x-signal"]){var s=H(l["x-signal"],null,"dom")[0],a=s&&s.type;switch(a){case"dom":case"object":this["signal_"+a+"Changed"]=s.signal;break;default:log_error("Signal typs is not supported",s)}}if(l["x-pipe-signal"]){var s=H(l["x-pipe-signal"],!0,"dom")[0],a=s&&s.type;switch(a){case"dom":case"object":this["pipe_"+a+"Changed"]=s;break;default:log_error("Pipe type is not supported")}}var c=l["dom-slot"];if(null!=c){this.slots={};var f=n.parent,h=f.parent;f.parent=this,this.parent=h,this.slots[c]=function(t,e){this.domChanged(t,e)}}var p=l["object-pipe-slot"]||l["x-pipe-slot"];if(p){var d=p,v=d.indexOf("."),m=d.substring(0,v),s=d.substring(v+1);this.pipes={},this.pipes[m]={},this.pipes[m][s]=function(){this.objectChanged()},_.pipe.addController(this)}if(l.expression){if(this.expression=l.expression,null==this.value&&"single"!==r){var g=$(this.expression);"string"==typeof g?this.value=g:log_warn("Please set value attribute in DualBind Control.")}}else this.expression=this.value},dispose:function(){P(this.expression,this.model,this.ctr,this.binder)},objectChanged:function(t){if(!(this.dismiss-- >0)){if(this.locked===!0)return void log_warn("Concurance change detected",this);if(this.locked=!0,null==t&&(t=this.objectWay.get(this,this.expression)),this.domWay.set(this,t),this.log&&console.log("[BindingProvider] objectChanged -",t),this.signal_objectChanged&&e(this.ctr,this.signal_objectChanged,[t]),this.pipe_objectChanged){var n=this.pipe_objectChanged;_.pipe(n.pipe).emit(n.signal)}this.locked=!1}},domChanged:function(t,n){if(this.locked===!0)return void log_warn("Concurance change detected",this);this.locked=!0,null==n&&(n=this.domWay.get(this));var r=this["typeof"];if(null!=r){var i=window[r];n=i(n)}var o=this.validate(n);if(null==o){this.dismiss=1;var l=this.model,u=this.value;if(36===u.charCodeAt(0)){var s=u.indexOf(".");if(-1!==s){var a=u.substring(0,s);"$scope"===a&&(u=u.substring(s+1),l=T(this.ctr.parent,u))}}if(this.objectWay.set(l,u,n,this),this.dismiss=0,this.log&&console.log("[BindingProvider] domChanged -",n),null!=this.signal_domChanged&&e(this.ctr,this.signal_domChanged,[n]),null!=this.pipe_domChanged){var c=this.pipe_domChanged;_.pipe(c.pipe).emit(c.signal)}}this.locked=!1},addValidation:function(t){return null==this.validations&&(this.validations=[]),is_Array(t)?void(this.validations=this.validations.concat(t)):void this.validations.push(t)},validate:function(t){var e=this.validations,n=this.ctr,r=this.element;if(null==e||0===e.length)return null;var i=0!==arguments.length?t:this.domWay.get(this);return B.validateUi(e,i,n,r,this.objectChanged.bind(this))},objectWay:U.objectWay,domWay:U.domWay}),obj_extend(G,{create:function(t,e,n,r){var i,o=n.attr.bindingProvider,l=null==o?null:V[o];return"function"==typeof l?new l(t,e,n,r):(i=new G(t,e,n,r),null!=l&&obj_extend(i,l),i)},bind:function(e){return t(e)}}),obj_extend(G,{addObserver:c,removeObserver:h})}(),b(":visible",l),l.prototype={constructor:l,refresh:function(t,e){e.style.display=D(this.attr.check,t)?"":"none"},renderStart:function(t,e,n){this.refresh(t,n),this.attr.bind&&c(t,this.attr.bind,this.refresh.bind(this,t,n))}};var K;!function(){var t="-validate-invalid";K=class_create({attr:null,element:null,validators:null,constructor:function(){this.validators=[]},renderStart:function(t,e,n){this.element=n;var r=this.attr.value;if(r){var i=B.getFnFromModel(t,r);null!=i&&this.validators.push(i)}},validate:function(t,e,n){var r=null==e?this.element:e,i=t;0===arguments.length&&(i=obj_getProperty(this.model,this.attr.value)),0===this.validators.length&&this.initValidators();var o=this.validators,l=this.attr.silent?"validate":"validateUi";return B[l](o,i,this,r,n)},initValidators:function(){var t=this.attr,e=this.attr.message,n=null==e;n&&(e="Invalid value of `"+this.attr.value+"`");for(var r in t){switch(r){case"message":case"value":case"getter":case"silent":continue}if(r in q!=!1){var i=n?e+" Validation: `"+r+"`":e,o=B.getFnByName(r,t[r],i);null!=o&&this.validators.push(o)}else log_error("Unknown Validator:",r,this)}}}),b(":validate",K),b(":validate:message",e({template:"div."+t+' { span > "~[bind:message]" button > "~[cancel]" }',onRenderStart:function(t){"string"==typeof t&&(t={message:t}),t.cancel||(t.cancel="cancel"),this.model=t},compos:{button:"$: button"},show:function(t,e){var n=this;this.model.message=t,this.compos.button.off().on(function(){n.hide(),e&&e()}),this.$.show()},hide:function(){this.$.hide()}}))}(),b(":validate:group",u),u.prototype={constructor:u,validate:function(){for(var t,e=s(this),n=0,r=e.length;r>n;n++)if(t=e[n],!t.validate())return!1;return!0}},function(){function t(){}b(":bind",t),b("bind",t),t.prototype={constructor:t,renderStart:function(t,e,n){this.provider=G.create(t,n,this,"single"),this.provider.objectChanged()}}}(),b(":dualbind",a),b("dualbind",a),a.prototype={constructor:a,renderStart:function(t,e,n){this.provider=G.create(t,n,this),this.provider.objectChanged()},dispose:function(){var t=this.provider,e=t&&t.dispose;"function"==typeof e&&e.call(t)},validate:function(){return this.provider&&this.provider.validate()},handlers:{attr:{"x-signal":function(){}}}},function(){function t(t,e,n){return t?null==e||""===e?t+" "+n:t.replace(e,n):n}function e(t){return function(e){t.textContent=e}}function n(e,n,r){return function(i){var o=e.getAttribute(n),l=t(o,r,i);e.setAttribute(n,l),r=i}}function r(t,e,n){var r=n;return function(n){if(r!==n){r=n;var i=t.setAttribute;return is_Function(i)?void i.call(t,e,n):void(t.attr[e]=n)}}}function i(e,n,r){return function(i){switch(typeof e[n]){case"boolean":return void(r=e[n]=!!i);case"number":return void(r=e[n]=Number(i));case"string":return void(r=e[n]=t(e[n],r,i));default:return void log_warn("Unsupported elements property type",n)}}}function o(t,o,l,u,s,a){if("node"===t)return e(l);if("attr"===t){switch(s){case"value":case"disabled":case"checked":case"selected":case"selectedIndex":return i(l,s,u)}return n(l,s,u)}if("compo-attr"===t)return r(a,s,u);throw Error("Unexpected binder type: "+t)}function l(t,e,n,r,i,l,u,s){var a=o(s,e,i,t,u,l),c=L(e,n,r,l,a);R(e,n,r,l,c),A(l,function(){P(e,n,l,c)})}w("bind",{mode:"partial",current:null,element:null,nodeRenderStart:function(t,e,n,r,i){var o=D(t,e,n,i);return this.element=document.createTextNode(o),this.current=o},node:function(t,e,n,r,i){var o=this.element,u=this.current;return l(u,t,e,n,o,i,null,"node"),this.element=null,this.current=null,o},attrRenderStart:function(t,e,n,r,i){return this.current=D(t,e,n,i)},attr:function(t,e,n,r,i,o,u){return l(this.current,t,e,n,r,i,o,u),this.current}})}(),x("xx-visible",function(t,e,n,r,i,o){var l=L(e,n,r,o,function(t){i.style.display=t?"":"none"});R(e,n,r,o,l),A(o,function(){P(e,n,o,l)}),D(e,n,r,o)||(i.style.display="none")}),x("x-toggle","client",function(t,e,n,r,i,o){var l=e.substring(0,e.indexOf(":")),u=e.substring(l.length+1),s=$(u);"string"!=typeof s&&(s=s[0]),y(i,l,function(){var t=D(u,n,r,o);obj_setProperty(n,s,t)})}),x("x-class-toggle","client",function(t,e,n,r,i){var o=e.substring(0,e.indexOf(":")),l=e.substring(o.length+1).trim();y(i,o,function(){C(i).toggleClass(l)})}),function(){var n,i,l,u,s,a=t.getStatement();!function(){n=function(t,e,n,r,i){return a[t].getNodes(e,n,r,i)},i=function(t,e,n,r,i){if(null==t)return null;var o=[];return builder_build(t,e,n,r,i,o),o},l=function(t,e,n){var r=t.placeholder;null==r&&(r=document.createComment(""),n.appendChild(r)),e.placeholder=r},u=function(t,e,n,r,i,o){t.parent=o,t.model=n,t.refresh=fn_proxy(t.refresh,t),t.binder=L(t.expr||t.expression,n,r,o,t.refresh),R(t.expr||t.expression,n,r,o,t.binder)},s=function(t,e){if(null!=t)for(var n,r="function"==typeof t.splice,i=r?t.length:1,o=-1;++o<i;)n=r?t[o]:t,n.style.display=e?"":"none"}}(),function(){function e(){}function r(t,e,n,r,i,o,l,u){for(t.model=i,t.ctx=o,t.controller=u,t.refresh=fn_proxy(t.refresh,t),t.binder=I(t.refresh),t.index=n,t.Switch=[{node:e,elements:null}],R(e.expression,i,o,u,t.binder);;){if(e=e.nextSibling,null==e||"else"!==e.tagName)break;t.Switch.push({node:e,elements:null}),e.expression&&R(e.expression,i,o,u,t.binder)}return null!=n&&(t.Switch[n].elements=r),t}b("+if",{placeholder:null,meta:{serializeNodes:!0},render:function(t,e,r,o,l){for(var u=this,s=n("if",u,t,e,o),a=0,c=u;;){if(c.nodes===s)break;if(a++,c=u.nextSibling,null==c||"else"!==c.tagName){a=null;break}}return this.attr["switch-index"]=a,i(s,t,e,r,o,l)},renderEnd:function(t,n,i,o,u){var s=new e,a=this.attr["switch-index"];return l(this,s,o),r(s,this,a,t,n,i,o,u)},serializeNodes:function(e){for(var n=[e];;){if(e=e.nextSibling,null==e||"else"!==e.tagName)break;n.push(e)}return t.stringify(n)}}),e.prototype={compoName:"+if",ctx:null,model:null,controller:null,index:null,Switch:null,binder:null,refresh:function(){for(var e,n=this,r=n.Switch,i=r.length,l=-1,u=n.index,a=n.model,c=n.ctx,f=n.controller;++l<i&&(e=r[l].node.expression,null!=e)&&!D(e,a,c,f););if(u!==l){if(null!=u&&s(r[u].elements,!1),l===i)return void(n.index=null);this.index=l;var h=r[l];if(null!=h.elements)return void s(h.elements,!0);var p=t.render(h.node.nodes,a,c,null,f),d=p.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_Array_slice.call(p.childNodes):p;o(p,n.placeholder),h.elements=d}},dispose:function(){for(var t,e,n=this.Switch,r=n.length,i=-1;++i<r;)t=n[i],e=t.node.expression,e&&P(e,this.model,this.controller,this.binder),t.node=null,t.elements=null;this.controller=null,this.model=null,this.ctx=null}}}(),function(){function e(){}function n(t,e,n,r,i){if(u=f.getNodes(t,e,n,r,i),c=null,null!=u){for(var o=e.length,l=-1;++l<o&&e[l].nodes!==u;);c=l===o?null:l}}function r(t,e,n,r,i,o,l,u){return t.ctx=o,t.expr=e.expression,t.model=i,t.controller=u,t.index=n,t.nodes=e.nodes,t.refresh=fn_proxy(t.refresh,t),t.binder=L(t.expr,i,o,u,t.refresh),t.Switch=new Array(e.nodes.length),null!=n&&(t.Switch[n]=r),R(e.expression,i,o,u,t.binder),t}var u,c,f=a["switch"],h="switch-index";b("+switch",{meta:{serializeNodes:!0},serializeNodes:function(e){return t.stringify(e)},render:function(t,e,r,o,l){var s=D(this.expression,t,e,o);return n(s,this.nodes,t,e,o),null==u?null:(this.attr[h]=c,i(u,t,e,r,o,l))},renderEnd:function(t,n,i,o,u){var s=new e,a=this.attr[h];return l(this,s,o),r(s,this,a,t,n,i,o,u)}}),e.prototype={compoName:"+switch",ctx:null,model:null,controller:null,index:null,nodes:null,Switch:null,binder:null,refresh:function(e){var r=this,i=r.Switch,l=(i.length,r.index),a=r.model,f=r.ctx,h=r.controller;if(n(e,r.nodes,a,f,h),c!==l){if(null!=l&&s(i[l],!1),null==c)return void(r.index=null);this.index=c;var p=i[c];if(null!=p)return void s(p,!0);var d=t.render(u,a,f,null,h),v=d.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_Array_slice.call(d.childNodes):d;o(d,r.placeholder),i[c]=v}},dispose:function(){P(this.expr,this.model,this.controller,this.binder),this.controller=null,this.model=null,this.ctx=null;var t,e,n,r,i=this.Switch;for(t in i)if(e=i[t],null!=e)for(r=e.length,n=-1;++n<r;)null!=e[n].parentNode&&e[n].parentNode.removeChild(e[n])}}}(),function(){function t(t){this.expr=t.expression,this.nodes=t.nodes}function n(t,e,n,r,i){var o=[];return builder_build(t,e,n,r,i,o),o}a["with"];b("+with",{meta:{serializeNodes:!0},rootModel:null,render:function(t,e,r,i){var o=this.expression,l=this.nodes,u=M(o,t,e,i);return this.rootModel=t,n(l,u,e,r,i)},onRenderStartClient:function(t,e){this.rootModel=t,this.model=M(this.expression,t,e,this)},renderEnd:function(e,n,r,i,o){n=this.rootModel||n;var u=new t(this);return u.elements=e,u.model=n,u.parent=o,u.refresh=fn_proxy(u.refresh,u),u.binder=L(u.expr,n,r,o,u.refresh),R(u.expr,n,r,o,u.binder),l(this,u,i),u}}),t.prototype={compoName:"+with",elements:null,binder:null,model:null,parent:null,refresh:function(t){if(r(this.elements),this.components){for(var i=this.components.length,l=-1;++l<i;)e.dispose(this.components[l]);this.components.length=0}var u=document.createDocumentFragment();this.elements=n(this.nodes,t,null,u,this),o(u,this.placeholder),E(this)},dispose:function(){P(this.expr,this.model,this.parent,this.binder),this.parent=null,this.model=null,this.ctx=null}}}(),function(){function t(t){this.expr=t.expression,this.nodes=t.nodes}function e(t,e,n,r,i){var o=[];return builder_build(t,e,n,r,i,o),o}var n=a.visible;b("+visible",{meta:{serializeNodes:!0},render:function(t,n,r,i,o){return e(this.nodes,t,n,r,i)},renderEnd:function(e,n,r,i,o){var l=new t(this);return l.elements=e,l.model=n,l.parent=o,l.refresh=fn_proxy(l.refresh,l),l.binder=L(l.expr,n,r,o,l.refresh),R(l.expr,n,r,o,l.binder),l.refresh(),l}}),t.prototype={compoName:"+visible",elements:null,binder:null,model:null,parent:null,refresh:function(){var t=D(this.expr,this.model,this.ctx,this);n.toggle(this.elements,t)},dispose:function(){P(this.expr,this.model,this.parent,this.binder),this.parent=null,this.model=null,this.ctx=null}}}(),function(){function e(t){for(var e,n=t.length,r=-1;++r<n;)switch(e=t[r],typeof e){case"string":case"number":case"boolean":t[r]=Object(e)}}function n(t,e){for(var n=t.node.components,r=0,i=n.length,l=0,u=null,s=null,a=null,c=document.createDocumentFragment(),f=[];i>r;r++)if(a=n[r],null!=a.elements&&0!==a.elements.length)for(l=0,u=a.elements.length;u>l;l++)s=a.elements[l],s.parentNode.removeChild(s);t:for(l=0,u=e.length;u>l;l++){for(r=0;i>r;r++)if(e[l]===t._getModel(n[r])){f[l]=n[r];continue t}console.warn("No Model Found for",e[l])}for(r=0,i=f.length;i>r;r++)if(a=f[r],null!=a.elements&&0!==a.elements.length)for(l=0,u=a.elements.length;u>l;l++)s=a.elements[l],
c.appendChild(s);t.components=t.node.components=f,o(c,t.placeholder)}function r(t,e,n,r,i){var o=t.node,l=o.components;null==l&&(l=o.components=[]);var u=(t.prop1,t.prop2,t.type,t.ctx),s=t.node;if(null!=e&&null!=n){var a=e,c=e+n;for(c>l.length&&(c=l.length);c>a;a++)j(l[a],o)&&(a--,c--)}if(null!=r&&i&&i.length){var f,a=l.length,h=t._build(o,i,u,s),p=l.splice(a);for(S(o,r,h,t.placeholder),l.splice.apply(l,[r,0].concat(p)),a=0,f=p.length;f>a;a++)_.signal.emitIn(p[a],"domInsert")}}function i(t,e){for(var n,r=t.components,i=r.length;--i>-1;)n=r[i],-1!==e.indexOf(n.model)&&j(n,t.node)}var s={model:null,parent:null,refresh:function(t,l,u,s){var a,c=0,f=this.node,h=(this.model,this.ctx),p=this.node;if(null==l){var d=f.components;if(null!=d){for(var a=d.length,c=-1;++c<a;)j(d[c],f)&&(c--,a--);d.length=0}var v=this._build(f,t,h,p);return o(v,this.placeholder),void arr_each(f.components,E)}var m=t;switch(e(t),l){case"push":r(this,null,null,m.length-1,m.slice(m.length-1));break;case"pop":r(this,m.length,1);break;case"unshift":r(this,null,null,0,m.slice(0,1));break;case"shift":r(this,0,1);break;case"splice":var g=u[0],_=1===u.length?this.components.length:u[1],y=u.length>2?m.slice(u[0],u.length-2+u[0]):null;r(this,g,_,g,y);break;case"sort":case"reverse":n(this,m);break;case"remove":null!=s&&s.length&&i(this,s)}},dispose:function(){P(this.expr||this.expression,this.model,this.parent,this.binder)}};!function(){function n(t,e){this.prop1=e[i],this.prop2=e[o],this.type=e[c],this.expr=e[f],null==t.components&&(t.components=[]),this.node=t,this.components=t.components}var r=a["for"],i="for-prop-1",o="for-prop-2",c="for-type",f="for-expr";b("+for",{meta:{serializeNodes:!0},serializeNodes:function(e){return t.stringify(e)},render:function(t,n,l,u,s){var a=r.parseFor(this.expression),h=this.attr;h[i]=a[0],h[o]=a[1],h[c]=a[2],h[f]=a[3];var p=M(a[3],t,n,u);null!=p&&(is_Array(p)&&e(p),r.build(p,a,this.nodes,t,n,l,this,s))},renderEnd:function(t,e,r,i,o){var s=new n(this,this.attr);return l(this,s,i),u(s,this,e,r,i,o),s},getHandler:function(t,e){return r.getHandler(t,e)}}),n.prototype={compoName:"+for",model:null,parent:null,refresh:s.refresh,dispose:s.dispose,_getModel:function(t){return t.scope[this.prop1]},_build:function(t,e,n,i){var o=r.getNodes(t.nodes,e,this.prop1,this.prop2,this.type);return builder_build(o,this.model,n,null,i)}}}(),function(){function n(t,e,n,i,o,l){for(var u,s=e.length,a=(new Array(s),0);s>a;a++)u=r(t,a),builder_build(u,e[a],n,i,o,l)}function r(t,e){var n=new o;return n.scope={index:e},{type:Dom.COMPONENT,tagName:"each::item",nodes:t,controller:function(){return n}}}var i=(a.each,{meta:{serializeNodes:!0},serializeNodes:function(e){return t.stringify(e)},render:function(t,r,i,o,l){var u=D(this.expression,t,r,o);null!=u&&(e(u),n(this.nodes,u,r,i,this,l))},renderEnd:function(t,e,n,r,i){var o=new c(this,this.attr);return l(this,o,r),u(o,this,e,n,r,i),o}}),o=class_create({compoName:"each::item",scope:null,model:null,modelRef:null,parent:null,renderStart:function(){var t=this.parent.expression;this.modelRef=""+("."===t?"":"("+t+")")+'."'+this.scope.index+'"'},renderEnd:function(t){this.elements=t},dispose:function(){null!=this.elements&&(this.elements.length=0,this.elements=null)}}),c=class_create({constructor:function(t,e){this.expression=t.expression,this.nodes=t.nodes,null==t.components&&(t.components=[]),this.node=t,this.components=t.components},compoName:"+each",refresh:s.refresh,dispose:s.dispose,_getModel:function(t){return t.model},_build:function(t,e,r,i){var o=document.createDocumentFragment();return n(t.nodes,e,r,o,i),o}});b("each::item",o),b("+each",i)}()}()}(),obj_extend(t,{Validators:q,registerValidator:function(t,e){q[t]=e},BindingProviders:V,registerBinding:function(t,e){V[t]=e}}),obj_extend(t.obj,{addObserver:c,removeObserver:h})}(Mask,Compo),function(){custom_Statements.log={render:function(t,e,n,r,i){var o=expression_evalStatements(t.expression,e,n,i);o.unshift("Mask::Log"),console.log.apply(console,o)}},customTag_register("debugger",{render:function(t,e,n,r){}}),customTag_register(":utest",Compo({render:function(t,e,n){n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(n=n.childNodes),this.$=$(n)}}))}(),custom_Tags.define=class_create({meta:{serializeNodes:!0},constructor:function(t,e,n,r,i){Define.registerGlobal(t,e,i)},render:fn_doNothing}),custom_Tags.let=class_create({meta:{serializeNodes:!0},constructor:function(t,e,n,r,i){Define.registerScoped(t,e,i)},render:fn_doNothing}),function(){var t={meta:{mode:"server:all"},render:function(t,e,n){if(this.html=jmask(this.nodes).text(t,e,this),n.insertAdjacentHTML)return void n.insertAdjacentHTML("beforeend",this.html);if(n.ownerDocument){var r,i=document.createElement("div");for(i.innerHTML=this.html,r=i.firstChild;null!=r;)n.appendChild(r),r=r.nextSibling}},toHtml:function(){return this.html||""},html:null};customTag_register(":html",t)}(),function(){var t=class_create({meta:{serializeNodes:!0},constructor:function(t){this.fn=t.fn,this.name=t.name}});custom_Tags.slot=class_create(t,{renderEnd:function(){var t=this.parent,e=t.slots;null==e&&(e=t.slots={}),e[this.name]=this.fn}}),function(){function e(t){var e=/^\s*([\w]+)[:\$]+([\w]+)\s*$/,n=e.exec(t),r=n&&n[1],i=n&&n[2];return null==n||null==r||null==i?(log_error("PipeCompo. Invalid name.",t,"Expect",e.toString()),null):[r,i]}function n(t,n){var r=n.pipes;null==r&&(r=n.pipes={});var i=e(t.name);if(null!=i){var o=i[0],l=i[1],u=n.pipes[o];null==u&&(u=r[o]={}),u[l]=t.fn}}custom_Tags.pipe=class_create(t,{renderEnd:function(){n(this,this.parent)}}),custom_Tags.pipe.attach=n}(),custom_Tags.event=class_create(t,{renderEnd:function(t,e,n,r,i){this.fn=this.fn.bind(this.parent);var o=this.name,l=null,u=o.indexOf(":");-1!==u&&(l=o.substring(u+1).trim(),o=o.substring(0,u).trim()),Compo.Dom.addEventListener(r,o,this.fn,l,i)}}),custom_Tags["function"]=class_create(t,{renderEnd:function(){this.parent[this.name]=this.fn}})}(),function(){function t(t,e,n,r,i){var o=document.createElement(t);o.textContent=n;for(var l in e){var u=e[l];null!=u&&o.setAttribute(l,u)}return r&&o.setAttribute("id",r),i.appendChild(o),o}var e=class_create(customTag_Base,{meta:{mode:"server"},tagName:null,id:null,body:null,constructor:function(t,e,n,r,i){var o=t.content;if(null==o&&t.nodes){var l=t.nodes[0];o=l.type===Dom.TEXTNODE?l.content:jmask(l.nodes).text(e,i)}this.id=t.id,this.body=is_Function(o)?o("node",e,n,r,i):o,"style"===this.tagName&&(this.body=css_ensureScopedStyles(this.body,t,r))}}),n=class_create(e,{render:function(t,e,n){i(e,n).append(this.tagName,this)}}),r=class_create(e,{render:function(e,n,r){t(this.tagName,this.attr,this.body,null,r)}});custom_Tags.style=class_create(n,{tagName:"style"}),custom_Tags.script=class_create(r,{tagName:"script"});var i;!function(){i=function(t,n){var r="__contentManager";return t[r]||(t[r]=new e(n))};var e=class_create({constructor:function(t){this.container=t.ownerDocument.body,this.ids={}},append:function(e,n){var r=n.id,i=this.ids[r];return void 0!==i?i:(i=t(e,n.attr,n.body,n.id,this.container),void(this.ids[r]=i))}})}()}(),function(){var t={},e={get:function(e){return t[e]},resolve:function(e,n){var r=t[n];if(null!=r)return r;for(var i=":template[id="+n+"]",o=e.parent,l=null;null!=o;){if(l=jmask(o.nodes).filter(i).get(0),null!=l)return l.nodes;o=o.parent}return log_warn("Template was not found",n),null},register:function(e,n){return null==e?void log_warn("`:template` must define the `id` attr"):void(t[e]=n)}};Mask.templates=e,customTag_register(":template",{render:function(){e.register(this.attr.id,this.nodes)}}),customTag_register(":import",{renderStart:function(){var t=this.attr.id;return null==t?void log_error("`:import` shoud reference the template via id attr"):void(this.nodes=e.resolve(this,t))}}),custom_Statements.include={render:function(t,n,r,i,o,l){var u,s=attr_first(t.attr),a=customTag_get(s,o);null!=a?(u=a.prototype.template||a.prototype.nodes,null!=u&&(u=mask_merge(u,t.nodes))):u=e.get(s),null!=u&&builder_build(u,n,r,i,o,l)}},customTag_register("layout:master",{meta:{mode:"server"},render:function(){var t=this.attr.id||attr_first(this.attr);e.register(t,this.nodes)}}),customTag_register("layout:view",{meta:{mode:"server"},render:function(t,n,r,i,o){var l=e.get(this.attr.master),u=mask_merge(l,this.nodes,null,{extending:!0});builder_build(u,t,n,r,i,o)}})}(),function(){function t(t,e,n,r,i,o){t.model={};var l=t.parent,u=l.scope;null==u&&(u=l.scope={});for(var s in e)t.model[s]=u[s]=n===!1?e[s]:expression_eval(e[s],i,o,l)}custom_Tags["var"]=class_create(customTag_Base,{renderStart:function(e,n){t(this,this.attr,!0,e,n)},onRenderStartClient:function(){t(this,this.model,!1)}})}(),function(){var t={meta:{mode:"server:all"},render:function(t,e,n,r,i){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var l in this.attr)o.setAttribute(l,this.attr[l]);builder_buildSVG(this.nodes,t,e,o,r,i),n.appendChild(o)}};customTag_register("svg",t)}(),custom_Tags[":document"]=class_create({isDocument:!0,meta:{mode:mode_SERVER},render:function(t,e,n,r){var i,o,l,u=this.attr,s=this.nodes,a="html";u.doctype&&(a=u.doctype,u.doctype=null),n.appendChild(new HtmlDom.DOCTYPE("<!DOCTYPE "+a+">"));var c={tagName:"html",type:Dom.NODE,attr:u,nodes:[]};if(null!=s)for(var f,h=s.length,p=-1;++p<h;)f=s[p],"head"!==f.tagName?"body"!==f.tagName?l=!0:o=f:i=f;if(null==o&&(o={nodeType:Dom.NODE,tagName:"body",nodes:[]}),null!=i&&c.nodes.push(i),null!=o&&c.nodes.push(o),l)for(var f,h=s.length,p=0;h>p;p++)f=s[p],"head"!==f.tagName&&"body"!==f.tagName&&o.nodes.push(f);var d=this.parent;return d.components=[],builder_build(c,t,e,n,d),n}}),Mask.Compo=Compo,Mask.jmask=jmask,Mask.version="0.54.27",custom_optimize(),exports.mask=Mask}),function(t,e){"use strict";function n(){var t=e(i);return r?void(module.exports=t):window.ruta=t}var r="undefined"==typeof window||null==window.navigator,i=r?global:window;return"function"==typeof define&&define.amd?define(n):n()}(this,function(t){"use strict";function e(){return null==x&&(x=new C(S)),x}var n,r,i=t.mask||("undefined"!=typeof Mask?Mask:null),o=!0,l=Array.prototype.slice;!function(){n=function(t,e){if(null==e)return t||{};if(null==t)return r(e);for(var n in e)t[n]=e[n];return t},r=Object.create||function(t){var e=function(){};return e.prototype=t,new e}}();var u;!function(){u=function(){var t=l.call(arguments);console.error.apply(console,["Ruta"].concat(t))}}();var s,a,c,f,h,p;!function(){function t(t){for(var e,n,r=t.trim().split(/\s+/),i=r.length,o=-1;++o<i;)if(n=r[o],0!==n.length&&(e=n[0],'"'===e||"'"===e))for(var l=o;i>o;o++)if(n=r[o],n[n.length-1]===e){var u=r.splice(l,o-l+1).join(" ").slice(1,-1);r.splice(l,0,u),i=r.length;break}return r}function e(t){for(var e,n,r,i=t.length,o=0,l={},u=[];i>o;o++)r=t[o],"-"!==r[0]?u.push(r):(e=r.replace(/^[\-]+/,""),i-1>o&&"-"!==t[o+1][0]?(n=t[o+1],o++):n=!0,l[e]=n);return{path:u,query:l}}s=function(t){for(var e=t.length,n=0,r=e-1;e>n&&"/"===t[n];n++);for(;r>n&&"/"===t[r];r--);return t.substring(n,r+1)},a=function(t){return t=s(t),""===t?[]:t.split("/")},c=function(t){return"/"+t.join("/")},f=function(n){"string"==typeof n&&(n=t(n));var r=e(n);return y(r)},h=function(t){var e=t.indexOf("?");if(-1===e)return null;var n=t.substring(e+1);return d(n,"&")},p=function(t,e){var n="string"!=typeof e?v(e,"&"):e,r=t.indexOf("?");return-1!==r&&(t=t.substring(0,r)),t+"?"+n}}();var d,v;!function(){function t(t,e,n){for(var r,i=e.split("."),o=i.length,l=-1;++l<o-1;)r=i[l],null==t[r]&&(t[r]={}),t=t[r];t[i[l]]=n}function e(t){try{return decodeURIComponent(t)}catch(e){return u("decode:URI malformed"),""}}function n(t){try{return encodeURIComponent(t)}catch(e){return u("encode:URI malformed"),""}}d=function(n,r){null==r&&(r="&");for(var i,o,l={},u=n.split(r),s=0,a=u.length;a>s;s++)i=u[s].split("="),o=null==i[1]?"":e(i[1]),t(l,i[0],o);return l},v=function(t,e){null==e&&(e="&");var r,i,o="";for(r in t)i=t[r],null!=i&&("boolean"==typeof i&&(i=null),o=o+(o?e:"")+r,null!=i&&(o+="="+n(i)));return o}}();var m,g,_;!function(){m=function(t,e){return new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e)},g=function(t){if("^"===t[0])return new RegExp(t);for(var e=t.split("|"),n=0,r=e.length;r>n;n++)e[n]="^"+e[n]+"$";return new RegExp(e.join("|"))},_=function(t){var e=t.indexOf("("),n=t.lastIndexOf(")");if(-1===e||-1===n)return u("Expected alias part with regexp",t),null;var r=t.substring(e+1,n);return{alias:t.substring(1,e),matcher:g(r)}}}();var y,b;!function(){y=function(t){var e=c(t.path);return null==t.query?e:e+"?"+v(t.query,"&")},b=function(t){var e=t.indexOf("?"),n=-1===e?t:t.substring(0,e);return{path:a(n),query:-1===e?null:d(t.substring(e+1),"&")}}}();var x,w=function(){function t(t,e){this.method=36===t.charCodeAt(0)?t.substring(1,t.indexOf(" ")).toUpperCase():null,null!=this.method&&(t=t.substring(this.method.length+2)),this.strict=o,this.value=e,this.definition=t,n(this,t)}function e(){this.routes=[]}var n,r;!function(){function t(t,e){for(var n in t)if(e.test(n))return t[n]}function e(t){this.str=t}function i(t){this.str=t}n=function(t,n){var r=n.charCodeAt(0);switch(r){case 33:t.strict=!0,n=n.substring(1);break;case 94:t.strict=!1,n=n.substring(1);break;case 40:var o=1,l=n.length-1;return 41!==n.charCodeAt(n.length-1)&&(u("parser - expect group closing"),l++),void(t.match=new RegExp(n.substring(o,l)))}var s,a,c,f,h,p,d=n.split("/"),v=0,m=d.length,_=d[m-1];a=_.indexOf("?"),a>(1===m?-1:0)&&(s=_.substring(a+1),d[m-1]=_.substring(0,a));for(var y,b,x,w=!0,C=t.path=[];m>v;v++)if(c=d[v],""!==c)if(f=c.charCodeAt(0),p=c.charCodeAt(1),y=63===f,b=58===(y?p:f),h=0,y&&h++,b&&h++,0!==h&&(c=c.substring(h)),y||w||u("Strict part found after optional",n),"*"!==c){y&&(w=!1);var k=c.indexOf("(");if(b&&-1!==k){var l=c.length-1;")"!==c[l]&&(l+=1),x=new RegExp(g(c.substring(k+1,l))),c=c.substring(0,k)}y||b?b?C.push({alias:c,matcher:x,optional:y}):y&&C.push({matcher:new e(c),optional:y}):C.push(c)}else C.push({matcher:new i});if(s){var S=t.query={};d=s.split("&"),v=-1,m=d.length;for(var N,j,E,A;++v<m;)E=d[v],A=E.indexOf("="),-1!==A?(N=E.substring(0,A),j=E.substring(A+1),40===j.charCodeAt(0)&&(j=new RegExp(g(j))),S[N]=j):S[E]="";0===t.path.length&&(t.strict=!1)}},r=function(e,n){var r=n.indexOf("?"),i=-1===r?null:n.substring(r+1),o={path:n,params:null==i?{}:d(i,"&")};if(e.query)for(var l in e.query)if("?"===l[0]&&(l=l.substring(1)),":"===l[0]){var u=_(l),s=u.alias;o.params[s]=t(o.params,u.matcher)}if(-1!==r&&(n=n.substring(0,r)),null!=e.path)for(var c,f,h=a(n),p=e.path,v=p.length,m=h.length,g=0;m>g;g++)if(c=h[g],f=v>g?p[g]:null){if("string"==typeof f)continue;if(f.alias){o.params[f.alias]=c;continue}}return o},e.prototype={test:function(t){return t===this.str}},i.prototype={test:function(t){return!0}}}();var i,l;!function(){function t(t,e){for(var n in t)if(e.test(n))return!0;return!1}i=function(t,e,n){for(var i,o=b(t),u=0,s=e.length;s>u;u++)if(i=e[u],l(o,i,n))return i.current=r(i,t),i;return null},l=function(e,n,r){if(null!=r&&null!=n.method&&n.method!==r)return!1;if(n.match)return n.match.test("string"==typeof e?e:y(e));if("string"==typeof e&&(e=b(e)),n.query){var i,o,l=e.query;if(null==l)return!1;for(i in n.query){o=n.query[i];var u=i[0];if(":"!==u){if("?"!==u)if("string"!=typeof o){if(o.test&&!o.test(l[i]))return!1}else{if(null==l[i])return!1;if(o&&l[i]!==o)return!1}}else{var s=_(i);if(null==s||t(l,s.matcher)===!1)return!1}}}var a=n.path,c=a.length;if(0===c)return n.strict?0===e.path.length:!0;for(var f,h=e.path,p=0,d=h.length;d>p;p++){if(f=a[p],p>=c)return n.strict!==!0;if("string"==typeof f){if(h[p]===f)continue;return!1}if(f.matcher){if(f.matcher.test(h[p])===!1)return!1}else{if(f.optional)return!0;if(!f.alias)return!1}}return c>p?a[p].optional===!0:!0}}();return t.prototype={path:null,query:null,value:null,current:null},e.prototype={add:function(e,n){return this.routes.push(new t(e,n)),this},get:function(t,e){return i(t,this.routes,e)},clear:function(){return this.routes.length=0,this}},e.parse=function(t,e){var i={};return n(i,t),r(i,e)},e}(),C=function(){function t(t,e){if(this.collection=t||new w,e){var n="hash"===e?i:o;this.emitter=new n(this)}null==this.emitter&&o.supports()&&(this.emitter=new o(this)),null==this.emitter&&i.supports()&&(this.emitter=new i(this)),null==this.emitter&&u("Router can not be initialized - (nor HistoryAPI / nor hashchange")}if("undefined"==typeof window)return function(){};var e=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(e){r(this,t),this.listener=e,window.onhashchange=this.onhashchange.bind(this)}return e(t,{onhashchange:{value:function(){this.changed(location.hash)}},navigate:{value:function(t){return null==t?void this.changed(location.hash):void(location.hash=t)}},changed:{value:function(e){this.listener.changed(t.normalizeHash(e))}},current:{value:function(){return t.normalizeHash(location.hash)}}},{supports:{value:function(){return"undefined"!=typeof window&&"onhashchange"in window!=!1}},normalizeHash:{value:function(t){return t.replace(/^[!#\/]+/,"/")}}}),t}(),e=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(e){r(this,t),this.listener=e,this.initial=location.pathname,window.onpopstate=this.onpopstate.bind(this)}return e(t,{onpopstate:{value:function(){return this.initial===location.pathname?void(this.initial=null):void this.changed()}},navigate:{value:function(t,e){if(null==t)return void this.changed();var r="object"==typeof t,i=null;if(null!=e&&e.extend===!0){var o=r?t:h(t),l=h(location.search);if(null!=l&&null!=o){for(var u in l)void 0!==o[u]&&null===o[u]&&delete l[u];o=n(l,o),i=p(i||"",o)}}null==i&&(i=r?p("",t):t),history.pushState({},null,i),this.initial=null,this.changed()}},changed:{value:function(){this.listener.changed(location.pathname+location.search)}},current:{value:function(){return location.pathname+location.search}}},{supports:{value:function(){return"undefined"==typeof window?!1:window.history&&window.history.pushState?window.location.href===document.baseURI:!1}}}),t}();return t.prototype={changed:function(t){var e=this.collection.get(t);e&&this.action(e)},action:function(t){if("function"==typeof t.value){var e=t.current;t.value(t,e&&e.params)}},navigate:function(t,e){this.emitter.navigate(t,e)},current:function(){return this.collection.get(this.currentPath())},currentPath:function(){return this.emitter.current()}},t}(),k={pathFromCLI:f,query:{serialize:v,deserialize:d,get:function(t){var e=null==t?location.search:t;return h(e)}}},S=new w,N={Collection:w,setRouterType:function(t){return null==x&&(x=new C(S,t)),this},setStrictBehaviour:function(t){return o=t,this},add:function(t,n){return e(),S.add(t,n),this},get:function(t){return S.get(t)},navigate:function(t,n){return e().navigate(t,n),this},current:function(){return e().current()},currentPath:function(){return e().currentPath()},notifyCurrent:function(){return e().navigate(),this},parse:w.parse,$utils:k,_:k};return function(){function t(t){t.preventDefault(),t.stopPropagation(),N.navigate(this.getAttribute("href"))}null!=i&&i.registerAttrHandler("x-dynamic",function(e,n,r,i,o){o.onclick=t},"client")}(),N}),function(t){"use strict";function e(t,e){if("object"!=typeof t||null==e)return t;for(var n,r=t,i=e.split("."),o=i.length,l=0;o>l;l++)if(n=i[l],r=r[n],null==r)return r;return r}function n(t,e){for(var n in e)e[n]&&(t[n]=e[n]);return t}function r(t,n,r,i){if("function"==typeof n)return n(t)?t:null;if("undefined"==typeof r)return t==n?t:null;var o=null!=n?e(t,n):t,l=r,u=i;switch(l){case">":return o>u?t:null;case"<":return u>o?t:null;case">=":return o>=u?t:null;case"<=":return u>=o?t:null;case"!=":return o!=u?t:null;case"==":return o==u?t:null}return console.error("InvalidArgumentException: arr.js:check",arguments),null}function i(t){this.items=t}function o(t){i.prototype[t]=function(){var e=arguments.length,n=u[t](this.items,e>0?arguments[0]:null,e>1?arguments[1]:null,e>2?arguments[2]:null,e>3?arguments[3]:null);return n instanceof Array?(this.items=n,this):n}}var l=t.ruqq||(t.ruqq={}),u={where:function(t,e,n,i){var o=[];if(null==t)return o;for(var l,u=0,s=t.length;s>u;u++)l=t[u],null!=r(l,e,n,i)&&o.push(l);return o},each:"undefined"!=typeof Array.prototype.forEach?function(t,e){return null==t?t:(t.forEach(e),t)}:function(t,e){if(null==t)return t;for(var n=0,r=t.length;r>n;n++)e(t[n]);return t},remove:function(t,e,n,i){for(var o=0,l=t.length;l>o;o++)null!=r(t[o],e,n,i)&&(t.splice(o,1),o--,l--);return t},invoke:function(){for(var t=Array.prototype.slice.call(arguments),e=t.shift(),n=t.shift(),r=[],i=0;i<e.length;i++)"function"==typeof e[i][n]?r.push(e[i][n].apply(e[i],t)):r.push(null);return r},last:function(t,e,n,i){if(null==t)return null;if(null==e)return t[t.length-1];for(var o=t.length;o>-1;--o)if(null!=r(t[o],e,n,i))return t[o];return null},first:function(t,e,n,i){if(null==e)return t[0];for(var o=0,l=t.length;l>o;o++)if(null!=r(t[o],e,n,i))return t[o];return null},any:function(t,e,n,i){for(var o=0,l=t.length;l>o;o++)if(null!=r(t[o],e,n,i))return!0;return!1},isIn:function(t,e){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},map:"undefined"!=typeof Array.prototype.map?function(t,e){return null==t?[]:t.map(e)}:function(t,e){var n=[];if(null==t)return n;for(var r=0,i=t.length;i>r;r++)n.push(e(t[r],r));return n},aggr:function(t,e,n){for(var r=0,i=t.length;i>r;r++){var o=n(t[r],e,r);null!=o&&(e=o)}return e},select:function(t,e){if(null==t)return[];for(var n,r=[],i=0,o=t.length;o>i;i++)if(n=t[i],"string"==typeof e)r.push(n[e]);else if("function"==typeof e)r.push(e(n));else if(e instanceof Array){for(var l={},u=0;u<e.length;u++)l[e[u]]=t[i][e[u]];r.push(l)}return r},indexOf:function(t,e,n,i){for(var o=0,l=t.length;l>o;o++)if(null!=r(t[o],e,n,i))return o;return-1},count:function(t,e,n,i){for(var o=0,l=0,u=t.length;u>l;l++)null!=r(t[l],e,n,i)&&o++;return o},distinct:function(t,e){var n=[];if(null==t)return n;for(var r=0,i=t.length;i>r;r++){for(var o=!0,l=0;l<n.length;l++)if(e&&e(t[r],n[l])||null==e&&t[r]==n[l]){o=!1;break}o&&n.push(t[r])}return n},groupBy:function(t,e){for(var n,r,i,o=[],l=t.length,u=-1,s={};++u<l;)if(s[u]!==!0){for(i=t[u],n=[i],r=u;++r<l;)s[r]!==!0&&e(i,t[r])&&(s[r]=!0,n.push(t[r]));o.push(n)}return o}};u.each(["min","max"],function(t){u[t]=function(n,r){if(null==n)return null;for(var i=null,o=0,l=n.length;l>o;o++){var u=e(n[o],r);null!=i?"max"===t&&u>i?i=u:"min"===t&&i>u&&(i=u):i=u}return i}}),l.arr=function(t){return new i(t)},n(l.arr,u);for(var s in u)o(s)}("undefined"!=typeof window?window:global),function(t,e){"use strict";null==t&&(t="undefined"!=typeof window&&"undefined"!=typeof document?window:global),null==t.net&&(t.net={}),t.net.Uri=e(t)}(this,function(t){"use strict";function e(t){return t&&"object"==typeof t&&"function"==typeof t.combine}function n(){for(var t,e="",n=0,r=arguments.length;r>n;n++)t=arguments[n],t&&(e?("/"!==e[e.length-1]&&(e+="/"),e+="/"===t[0]?t.substring(1):t):e=t);return e}function r(t){return"/"===t[t.length-1]?t.substring(0,t.length-1):t}function i(t){var e,n=new v;for(e in t)"string"==typeof t[e]&&(n[e]=t[e]);return n}function o(t){return t.replace(/\\/g,"/").replace(/^\.\//,"").replace(/^(\w+):\/([^\/])/,"/$1:/$2")}function l(t){return d.test(t)&&"/"===t[0]?t.substring(1):t}function u(t){var e=f.exec(t.value);null==e&&"/"===t.value[0]&&(t.protocol="file"),null!=e&&(t.protocol=e[1],t.value=t.value.substring(e[0].length))}function s(t){if(null!=t.protocol){if("file"===t.protocol){var e=d.exec(t.value);return void(e&&(t.host=e[1],t.value=t.value.substring(t.host.length)))}var n=t.value.indexOf("/",2);t.host=~n?t.value.substring(0,n):t.value,t.value=t.value.replace(t.host,"")}}function a(t){var e=t.value.indexOf("?");-1!==e&&(t.search=t.value.substring(e),t.value=t.value.substring(0,e))}function c(t){var e=h.exec(t.value),n=null==e?null:e[1];null!=n&&(t.file=n,t.value=t.value.substring(0,t.value.length-n.length),t.value=r(t.value),e=p.exec(n),t.extension=null==e?null:e[1])}var f=/^([a-zA-Z]+):\/\//,h=/([^\/]+(\.[\w\d]+)?)$/i,p=/\.([\w\d]+)$/i,d=/(^\/?\w{1}:)(\/|$)/,v=function(t){return null==t?this:e(t)?t.combine(""):(t=o(t),this.value=t,u(this),s(this),a(this),c(this),this.path=r(this.value),/^[\w]+:\//.test(this.path)&&(this.path="/"+this.path),this)};return v.prototype={cdUp:function(){return this.path?"/"===this.path?this:/^\/?[a-zA-Z]+:\/?$/.test(this.path)?this:(this.path=this.path.replace(/\/?[^\/]+\/?$/i,""),this):this},combine:function(t){if(e(t)&&(t=t.toString()),!t)return i(this);if(d.test(t))return new v(t);var o=i(this);if(o.value=t,a(o),c(o),!o.value)return o;if(t=o.value.replace(/^\.\//i,""),"/"===t[0])return o.path=t,o;for(;/^(\.\.\/?)/gi.test(t);)o.cdUp(),t=t.substring(3);return o.path=r(n(o.path,t)),o},toString:function(){var t=this.protocol?this.protocol+"://":"";return t+=n(this.host,this.path,this.file)+(this.search||""),this.file||this.search||(t+="/"),t},toPathAndQuery:function(){return n(this.path,this.file)+(this.search||"")},toRelativeString:function(t){if("string"==typeof t&&(t=new v(t)),0===this.path.indexOf(t.path)){var e=this.path?this.path.replace(t.path,""):"";return"/"===e[0]&&(e=e.substring(1)),n(e,this.file)+(this.search||"")}for(var r=this.path.split("/"),i=t.path.split("/"),o="",l=0,u=Math.min(r.length,i.length);u>l&&r[l]===i[l];l++);if(l>0&&(o=r.splice(0,l).join("/")),o){for(var s,a="",c=t.path;c;){if(0==this.path.indexOf(c)){s=this.path.replace(c,"");break}c=c.replace(/\/?[^\/]+\/?$/i,""),a+="../"}return n(a,s,this.file)}return this.toString()},toLocalFile:function(){var t=n(this.host,this.path,this.file);return l(t)},toLocalDir:function(){var t=n(this.host,this.path,"/");return l(t)},toDir:function(){var t=this.protocol?this.protocol+"://":"";return t+n(this.host,this.path,"/")},isRelative:function(){return!(this.protocol||this.host)},getName:function(){return this.file.replace("."+this.extension,"")}},v.combinePathes=n,v.combine=n,v}),function(){var t={};String.format=function(e){if(~e.indexOf("#{")){for(var n="",r=0,i=arguments[1];;){var o=e.indexOf("#{",r);if(-1==o)break;n+=e.substring(r,o);var l=e.indexOf("}",o);n+=Object.getProperty(i,e.substring(o+2,l)),r=++l}return n+=e.substring(r)}for(var u=1;u<arguments.length;u++){var s=t[u]||(t[u]=new RegExp("%"+u,"g"));e=e.replace(s,arguments[u])}return e},Object.defaults=function(t,e){for(var n in e)null==t[n]&&(t[n]=e[n]);return t},Object.clear=function(t,e){if(e instanceof Array)for(var n,r=0,i=e.length;i>r;r++)n=e[r],n in t&&delete t[n];else if("object"==typeof e)for(var o in e)o in t&&delete t[o];return t},Object.extend=function(t,e){if(null==t&&(t={}),null==e)return t;for(var n in e)null!=e[n]&&(t[n]=e[n]);return t},Object.getProperty=function(t,e){if("."===e)return t;for(var n=t,r="string"==typeof e?e.split("."):e,i=-1,o=r.length;null!=n&&++i<o;)n=n[r[i]];return n},Object.setProperty=function(t,e,n){for(var r=e.split("."),i=t,o=r[r.length-1];r.length>1;){var l=r.shift();i=i[l]||(i[l]={})}i[o]=n},Object.lazyProperty=function(t,e,n){if("object"!=typeof e){for(var r=e.split("."),i=t,o=r[r.length-1];r.length>1;){var l=r.shift();i=i[l]||(i[l]={})}r=null,i.__defineGetter__(o,function(){return delete i[o],i[o]=n(),n=null,i[o]})}else for(var u in e)Object.lazyProperty(t,u,e[u])},Object.clone=function(t){if(null==t)return null;switch(typeof t){case"number":case"string":case"function":return t}if(t instanceof Array){for(var e=[],n=0,r=t.length;r>n;n++)e[n]=Object.clone(t[n]);return e}var i=t.constructor;if("function"==typeof i&&(i===String||i===Number||i===RegExp||i===Date))return new i(t);var o={};for(var l in t)o[l]=Object.clone(t[l]);return o},Object.observe=function(t,e,n){if(null==t.__observers&&Object.defineProperty(t,"__observers",{value:{},enumerable:!1}),t.__observers[e])return void t.__observers[e].push(n);(t.__observers[e]||(t.__observers[e]=[])).push(n);var r=e.split("."),i=t,o=e;r.length>1&&(o=r.pop(),i=Object.getProperty(t,r));var l=i[o];Object.defineProperty(i,o,{get:function(){return l},set:function(n){l=n;for(var r=t.__observers[e],i=0,o=r.length;o>i;i++)r[i](n)}})},Date.format=function(t,e){function n(t){return t>9?t:"0"+t}e||(e="MM/dd/yyyy"),e=e.replace("MM",n(t.getMonth()+1));var r=t.getFullYear();return e.indexOf("yyyy")>-1?e=e.replace("yyyy",r):e.indexOf("yy")>-1&&(e=e.replace("yy",r.toString().substr(2,2))),e=e.replace("dd",n(t.getDate())),e.indexOf("HH")>-1&&(e=e.replace("HH",n(t.getHours()))),e.indexOf("mm")>-1&&(e=e.replace("mm",n(t.getMinutes()))),e.indexOf("ss")>-1&&(e=e.replace("ss",n(t.getSeconds()))),e},RegExp.fromString=function(t,e){return new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e)},Function.invoke=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),n=t.shift();return function(){return e[n].apply(e,t)}}}(),function(t){function e(){}function n(){}function r(t,e,n){if(t instanceof Array){for(var i,o=[],l=0,u=t.length;u>l;l++)i=r(t[l],e,n),t[l].tagName===s&&u-1>l&&t[l+1].tagName===a&&(l+=1,null==i&&(i=r(t[l].nodes,e,n))),null!=i&&(i instanceof Array?o=o.concat(i):o.push(i));return o}if(null!=t.content)return{content:t.content,type:t.type};if(t.tagName===s){var c=t.attr.id?e[t.attr.id]:n;return c?null==t.nodes?c:r(t.nodes,e,c):null}var f={tagName:t.tagName||t.compoName,attr:t.attr,type:t.type,controller:t.controller};return t.nodes&&(f.nodes=r(t.nodes,e,n)),f}function i(t,e){if(null==e&&(e={}),t instanceof Array){for(var n=t,r=0,l=n.length;l>r;r++)i(n[r],e);return e}var s=t.tagName;if(null!=s&&s===u){var a=t.attr.id;!a&&console.error("@content has no id specified",t),e[a]&&console.error("@content already exists",a),e[a]=o(t)}return null!=t.nodes&&i(t.nodes,e),e}function o(t){for(var e,n=t.parent;null!=n&&n.tagName!==c;){var r={type:n.type,tagName:n.tagName,attr:n.attr,controller:n.controller,nodes:null};null==e?(e=r,e.nodes=t.nodes):e.nodes=[r],n=n.parent}return null!=e?e:t.nodes}var l=t.mask||Mask,u="@content",s="@placeholder",a="@else",c="layout:view",f="layout:master",h={};e.prototype={constructor:e,render:function(){h[this.attr.id]=this}},l.registerHandler(f,e),n.prototype={constructor:n,renderStart:function(){var t=h[this.attr.master];return null==t?void console.error("Master Layout is not defined for",this):(null==this.contents&&(this.contents=i(this.nodes),Object.keys&&0===Object.keys(this.contents).length&&console.warn("no contents: @content #someID")),void(this.nodes=r(t,this.contents).nodes))}},l.registerHandler(c,n)}(this),obj_extend(globals,this)}).call({},"undefined"!=typeof global?global:window);