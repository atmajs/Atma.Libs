!function(n,t){"use strict";function r(){var n=t(i);return e?void(module.exports=n):window.ruta=n}var e="undefined"==typeof window||null==window.navigator,i=e?global:window;return"function"==typeof define&&define.amd?define(r):r()}(this,function(n){"use strict";function t(){return null==x&&(x=new R(O)),x}var r,e,i=n.mask||("undefined"!=typeof Mask?Mask:null),u=!0,o=Array.prototype.slice;!function(){r=function(n,t){if(null==t)return n||{};if(null==n)return e(t);for(var r in t)n[r]=t[r];return n},e=Object.create||function(n){var t=function(){};return t.prototype=n,new t}}();var a;!function(){a=function(){var n=o.call(arguments);console.error.apply(console,["Ruta"].concat(n))}}();var s,l,c,f,h,p;!function(){function n(n){for(var t,r,e=n.trim().split(/\s+/),i=e.length,u=-1;++u<i;)if(r=e[u],0!==r.length&&(t=r[0],'"'===t||"'"===t))for(var o=u;i>u;u++)if(r=e[u],r[r.length-1]===t){var a=e.splice(o,u-o+1).join(" ").slice(1,-1);e.splice(o,0,a),i=e.length;break}return e}function t(n){for(var t,r,e,i=n.length,u=0,o={},a=[];i>u;u++)e=n[u],"-"!==e[0]?a.push(e):(t=e.replace(/^[\-]+/,""),i-1>u&&"-"!==n[u+1][0]?(r=n[u+1],u++):r=!0,o[t]=r);return{path:a,query:o}}s=function(n){for(var t=n.length,r=0,e=t-1;t>r&&"/"===n[r];r++);for(;e>r&&"/"===n[e];e--);return n.substring(r,e+1)},l=function(n){return n=s(n),""===n?[]:n.split("/")},c=function(n){return"/"+n.join("/")},f=function(r){"string"==typeof r&&(r=n(r));var e=t(r);return m(e)},h=function(n){var t=n.indexOf("?");if(-1===t)return null;var r=n.substring(t+1);return v(r,"&")},p=function(n,t){var r="string"!=typeof t?g(t,"&"):t,e=n.indexOf("?");return-1!==e&&(n=n.substring(0,e)),n+"?"+r}}();var v,g;!function(){function n(n,t,r){for(var e,i=t.split("."),u=i.length,o=-1;++o<u-1;)e=i[o],null==n[e]&&(n[e]={}),n=n[e];n[i[o]]=r}function t(n){try{return decodeURIComponent(n)}catch(t){return a("decode:URI malformed"),""}}function r(n){try{return encodeURIComponent(n)}catch(t){return a("encode:URI malformed"),""}}v=function(r,e){null==e&&(e="&");for(var i,u,o={},a=r.split(e),s=0,l=a.length;l>s;s++)i=a[s].split("="),u=null==i[1]?"":t(i[1]),n(o,i[0],u);return o},g=function(n,t){null==t&&(t="&");var e,i,u="";for(e in n)i=n[e],null!=i&&("boolean"==typeof i&&(i=null),u=u+(u?t:"")+e,null!=i&&(u+="="+r(i)));return u}}();var d,w,y;!function(){d=function(n,t){return new RegExp(n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t)},w=function(n){if("^"===n[0])return new RegExp(n);for(var t=n.split("|"),r=0,e=t.length;e>r;r++)t[r]="^"+t[r]+"$";return new RegExp(t.join("|"))},y=function(n){var t=n.indexOf("("),r=n.lastIndexOf(")");if(-1===t||-1===r)return a("Expected alias part with regexp",n),null;var e=n.substring(t+1,r);return{alias:n.substring(1,t),matcher:w(e)}}}();var m,b;!function(){m=function(n){var t=c(n.path);return null==n.query?t:t+"?"+g(n.query,"&")},b=function(n){var t=n.indexOf("?"),r=-1===t?n:n.substring(0,t);return{path:l(r),query:-1===t?null:v(n.substring(t+1),"&")}}}();var x,C=function(){function n(n,t){this.method=36===n.charCodeAt(0)?n.substring(1,n.indexOf(" ")).toUpperCase():null,null!=this.method&&(n=n.substring(this.method.length+2)),this.strict=u,this.value=t,this.definition=n,r(this,n)}function t(){this.routes=[]}var r,e;!function(){function n(n,t){for(var r in n)if(t.test(r))return n[r]}function t(n){this.str=n}function i(n){this.str=n}r=function(n,r){var e=r.charCodeAt(0);switch(e){case 33:n.strict=!0,r=r.substring(1);break;case 94:n.strict=!1,r=r.substring(1);break;case 40:var u=1,o=r.length-1;return 41!==r.charCodeAt(r.length-1)&&(a("parser - expect group closing"),o++),void(n.match=new RegExp(r.substring(u,o)))}var s,l,c,f,h,p,v=r.split("/"),g=0,d=v.length,y=v[d-1];l=y.indexOf("?"),l>(1===d?-1:0)&&(s=y.substring(l+1),v[d-1]=y.substring(0,l));for(var m,b,x,C=!0,R=n.path=[];d>g;g++)if(c=v[g],""!==c)if(f=c.charCodeAt(0),p=c.charCodeAt(1),m=63===f,b=58===(m?p:f),h=0,m&&h++,b&&h++,0!==h&&(c=c.substring(h)),m||C||a("Strict part found after optional",r),"*"!==c){m&&(C=!1);var q=c.indexOf("(");if(b&&-1!==q){var o=c.length-1;")"!==c[o]&&(o+=1),x=new RegExp(w(c.substring(q+1,o))),c=c.substring(0,q)}m||b?b?R.push({alias:c,matcher:x,optional:m}):m&&R.push({matcher:new t(c),optional:m}):R.push(c)}else R.push({matcher:new i});if(s){var O=n.query={};v=s.split("&"),g=-1,d=v.length;for(var A,E,I,P;++g<d;)I=v[g],P=I.indexOf("="),-1!==P?(A=I.substring(0,P),E=I.substring(P+1),40===E.charCodeAt(0)&&(E=new RegExp(w(E))),O[A]=E):O[I]="";0===n.path.length&&(n.strict=!1)}},e=function(t,r){var e=r.indexOf("?"),i=-1===e?null:r.substring(e+1),u={path:r,params:null==i?{}:v(i,"&")};if(t.query)for(var o in t.query)if("?"===o[0]&&(o=o.substring(1)),":"===o[0]){var a=y(o),s=a.alias;u.params[s]=n(u.params,a.matcher)}if(-1!==e&&(r=r.substring(0,e)),null!=t.path)for(var c,f,h=l(r),p=t.path,g=p.length,d=h.length,w=0;d>w;w++)if(c=h[w],f=g>w?p[w]:null){if("string"==typeof f)continue;if(f.alias){u.params[f.alias]=c;continue}}return u},t.prototype={test:function(n){return n===this.str}},i.prototype={test:function(n){return!0}}}();var i,o;!function(){function n(n,t){for(var r in n)if(t.test(r))return!0;return!1}i=function(n,t,r){for(var i,u=b(n),a=0,s=t.length;s>a;a++)if(i=t[a],o(u,i,r))return i.current=e(i,n),i;return null},o=function(t,r,e){if(null!=e&&null!=r.method&&r.method!==e)return!1;if(r.match)return r.match.test("string"==typeof t?t:m(t));if("string"==typeof t&&(t=b(t)),r.query){var i,u,o=t.query;if(null==o)return!1;for(i in r.query){u=r.query[i];var a=i[0];if(":"!==a){if("?"!==a)if("string"!=typeof u){if(u.test&&!u.test(o[i]))return!1}else{if(null==o[i])return!1;if(u&&o[i]!==u)return!1}}else{var s=y(i);if(null==s||n(o,s.matcher)===!1)return!1}}}var l=r.path,c=l.length;if(0===c)return r.strict?0===t.path.length:!0;for(var f,h=t.path,p=0,v=h.length;v>p;p++){if(f=l[p],p>=c)return r.strict!==!0;if("string"==typeof f){if(h[p]===f)continue;return!1}if(f.matcher){if(f.matcher.test(h[p])===!1)return!1}else{if(f.optional)return!0;if(!f.alias)return!1}}return c>p?l[p].optional===!0:!0}}();return n.prototype={path:null,query:null,value:null,current:null},t.prototype={add:function(t,r){return this.routes.push(new n(t,r)),this},get:function(n,t){return i(n,this.routes,t)},clear:function(){return this.routes.length=0,this}},t.parse=function(n,t){var i={};return r(i,n),e(i,t)},t}(),R=function(){function n(n,t){if(this.collection=n||new C,t){var r="hash"===t?i:u;this.emitter=new r(this)}null==this.emitter&&u.supports()&&(this.emitter=new u(this)),null==this.emitter&&i.supports()&&(this.emitter=new i(this)),null==this.emitter&&a("Router can not be initialized - (nor HistoryAPI / nor hashchange")}if("undefined"==typeof window)return function(){};var t=function(){function n(n,t){for(var r in t){var e=t[r];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(n,t)}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),e=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function n(t){e(this,n),this.listener=t,window.onhashchange=this.onhashchange.bind(this)}return t(n,{onhashchange:{value:function(){this.changed(location.hash)}},navigate:{value:function(n){return null==n?void this.changed(location.hash):void(location.hash=n)}},changed:{value:function(t){this.listener.changed(n.normalizeHash(t))}},current:{value:function(){return n.normalizeHash(location.hash)}}},{supports:{value:function(){return"undefined"!=typeof window&&"onhashchange"in window!=!1}},normalizeHash:{value:function(n){return n.replace(/^[!#\/]+/,"/")}}}),n}(),t=function(){function n(n,t){for(var r in t){var e=t[r];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(n,t)}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),e=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function n(t){e(this,n),this.listener=t,this.initial=location.pathname,window.onpopstate=this.onpopstate.bind(this)}return t(n,{onpopstate:{value:function(){return this.initial===location.pathname?void(this.initial=null):void this.changed()}},navigate:{value:function(n,t){if(null==n)return void this.changed();var e="object"==typeof n,i=null;if(null!=t&&t.extend===!0){var u=e?n:h(n),o=h(location.search);if(null!=o&&null!=u){for(var a in o)void 0!==u[a]&&null===u[a]&&delete o[a];u=r(o,u),i=p(i||"",u)}}null==i&&(i=e?p("",n):n),history.pushState({},null,i),this.initial=null,this.changed()}},changed:{value:function(){this.listener.changed(location.pathname+location.search)}},current:{value:function(){return location.pathname+location.search}}},{supports:{value:function(){return"undefined"==typeof window?!1:window.history&&window.history.pushState?window.location.href===document.baseURI:!1}}}),n}();return n.prototype={changed:function(n){var t=this.collection.get(n);t&&this.action(t)},action:function(n){if("function"==typeof n.value){var t=n.current;n.value(n,t&&t.params)}},navigate:function(n,t){this.emitter.navigate(n,t)},current:function(){return this.collection.get(this.currentPath())},currentPath:function(){return this.emitter.current()}},n}(),q={pathFromCLI:f,query:{serialize:g,deserialize:v,get:function(n){var t=null==n?location.search:n;return h(t)}}},O=new C,A={Collection:C,setRouterType:function(n){return null==x&&(x=new R(O,n)),this},setStrictBehaviour:function(n){return u=n,this},add:function(n,r){return t(),O.add(n,r),this},get:function(n){return O.get(n)},navigate:function(n,r){return t().navigate(n,r),this},current:function(){return t().current()},currentPath:function(){return t().currentPath()},notifyCurrent:function(){return t().navigate(),this},parse:C.parse,$utils:q,_:q};return function(){function n(n){n.preventDefault(),n.stopPropagation(),A.navigate(this.getAttribute("href"))}null!=i&&i.registerAttrHandler("x-dynamic",function(t,r,e,i,u){u.onclick=n},"client")}(),A});
//# sourceMappingURL=ruta.min.js.map